import{a2 as p,a3 as _,S as b,i as g,s as v,e as w,t as y,c as k,a as S,g as C,d as u,b as h,f as R,H as E,I as f,a4 as j,R as x}from"../../chunks/vendor-e69d1c9d.js";import{C as A}from"../../chunks/state-33679332.js";function L(e,t){{const s=new WebSocket(e);return p(t,r=>{const n=new AbortController;return s.addEventListener("message",o=>{console.log(o.data),r(o.data)},n),()=>n.abort()})}}function T(e){let t,s;return{c(){t=w("a"),s=y("Refresh"),this.h()},l(r){t=k(r,"A",{href:!0});var n=S(t);s=C(n,"Refresh"),n.forEach(u),this.h()},h(){t.hidden=!0,h(t,"href",e[1])},m(r,n){R(r,t,n),E(t,s),e[7](t)},p(r,[n]){n&2&&h(t,"href",r[1])},i:f,o:f,d(r){r&&u(t),e[7](null)}}}const U=_(L("ws://localhost:3000","{}"),e=>JSON.parse(e));function W({state:e,info:t}={}){switch(e==null?void 0:e.type){case A.WEB:return new URL(e.url,t==null?void 0:t.server);default:return}}function q(e,t,s){let r,n,o;j(e,U,a=>s(6,o=a));var l,c;let{serial:d}=t,i;function m(a){x[a?"unshift":"push"](()=>{i=a,s(0,i)})}return e.$$set=a=>{"serial"in a&&s(2,d=a.serial)},e.$$.update=()=>{e.$$.dirty&68&&s(5,r=o[d]),e.$$.dirty&56&&s(1,n=s(4,c=s(3,l=W(r))===null||l===void 0?void 0:l.href)!==null&&c!==void 0?c:"#"),e.$$.dirty&33&&(console.log(r),i==null||i.click())},[i,n,d,l,c,r,o,m]}class H extends b{constructor(t){super();g(this,t,q,T,v,{serial:2})}}export{H as default};
