{"version":3,"file":"_layout.svelte-669347b1.js","sources":["../../../.svelte-kit/adapter-node/chunks/snackbar-host.js","../../../.svelte-kit/adapter-node/chunks/_layout.js"],"sourcesContent":["import \"./web.js\";\nimport { w as writable } from \"./index2.js\";\nfunction setTimeoutAsync(delay, options = {}) {\n  const { signal } = options;\n  if (signal?.aborted) {\n    return Promise.reject(new Error(\"AbortError\"));\n  }\n  return new Promise((resolve, reject) => {\n    const timeoutId = setTimeout(resolve, delay);\n    if (signal) {\n      signal.addEventListener(\"abort\", () => {\n        clearTimeout(timeoutId);\n        reject(new Error(\"AbortError\"));\n      });\n    }\n  });\n}\nfunction abortSignalAny(...items) {\n  const signals = items.filter((item) => item != void 0);\n  if (signals.length <= 1) {\n    return signals[0];\n  }\n  const controller = new AbortController();\n  const abort = controller.abort.bind(controller);\n  for (const signal of signals) {\n    if (signal.aborted) {\n      abort();\n    } else {\n      signal.addEventListener(\"abort\", abort, { once: true, signal: controller.signal });\n    }\n  }\n  return controller.signal;\n}\nclass SnackbarHostState {\n  _currentSnackbarData = writable(void 0);\n  _lastSnackbar = Promise.resolve();\n  get currentSnackbarData() {\n    return this._currentSnackbarData;\n  }\n  showSnackbar(message, duration = 1500, options = {}) {\n    const dismissController = new AbortController();\n    const snackbarData = {\n      message,\n      duration,\n      dismiss: dismissController.abort.bind(dismissController)\n    };\n    const signal = abortSignalAny(dismissController.signal, options.signal);\n    const snackbarPromise = this._lastSnackbar.catch(() => {\n    }).then(() => {\n      if (signal?.aborted)\n        return;\n      this._currentSnackbarData.set(snackbarData);\n      return setTimeoutAsync(duration, { signal }).finally(() => {\n        this._currentSnackbarData.set(void 0);\n      });\n    });\n    this._lastSnackbar = snackbarPromise;\n    return snackbarPromise;\n  }\n}\nexport {\n  SnackbarHostState as S\n};\n","import { c as create_ssr_component, a as subscribe, b as add_attribute, e as escape, g as getContext, s as setContext, v as validate_component } from \"./ssr.js\";\nimport { n as navigating } from \"./stores.js\";\nimport { T as TopBar, R as RemoteFrame } from \"./TopBar.js\";\nimport { r as readable, d as derived } from \"./index2.js\";\nimport { S as SnackbarHostState } from \"./snackbar-host.js\";\nconst NavigationProgress_svelte_svelte_type_style_lang = \"\";\nconst css = {\n  code: \".progress-bar-value.svelte-7f51jt{transform-origin:0% 50%;animation:svelte-7f51jt-indeterminateAnimation 1s infinite linear}@keyframes svelte-7f51jt-indeterminateAnimation{0%{transform:translateX(0) scaleX(0)}40%{transform:translateX(0) scaleX(0.4)}100%{transform:translateX(100%) scaleX(0.5)}}\",\n  map: null\n};\nconst NavigationProgress = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let $navigating, $$unsubscribe_navigating;\n  $$unsubscribe_navigating = subscribe(navigating, (value) => $navigating = value);\n  $$result.css.add(css);\n  $$unsubscribe_navigating();\n  return `${$navigating != null ? `<div class=\"absolute w-full h-1 bg-green-900 overflow-hidden\" role=\"progressbar\"${add_attribute(\"aria-valuemin\", 0, 0)}${add_attribute(\"aria-valuemax\", 1, 0)} aria-valuetext=\"${\"Loading \" + escape($navigating?.to?.url.pathname, true)}\"><div class=\"progress-bar-value w-full h-full bg-gray-200 svelte-7f51jt\"></div></div>` : ``}`;\n});\nconst Snackbar = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let { data } = $$props;\n  if ($$props.data === void 0 && $$bindings.data && data !== void 0)\n    $$bindings.data(data);\n  return `${data ? `<aside role=\"alert\" class=\"fixed inset-4 top-auto bg-gray-200 text-black mx-auto px-4 py-2 max-w-lg\"><button type=\"button\" class=\"rounded-md float-right text-gray-600 hover:text-black\" title=\"Dismiss snackbar\" data-svelte-h=\"svelte-1osiuh9\"><span class=\"sr-only\">Dismiss snackbar</span> <svg class=\"h-6 w-6 transition-colors\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" aria-hidden=\"true\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path></svg></button> ${escape(data.message)}</aside>` : ``}`;\n});\nfunction connectRemote() {\n  {\n    return void 0;\n  }\n}\nfunction remoteState(socket) {\n  return readable(/* @__PURE__ */ new Map(), (set) => {\n    const controller = new AbortController();\n    function handleMessage({ data }) {\n      const cellData = JSON.parse(data);\n      const cellMap = new Map(Object.entries(cellData));\n      set(cellMap);\n    }\n    socket?.addEventListener(\"message\", handleMessage, controller);\n    return () => controller.abort();\n  });\n}\nfunction storeEntries(store) {\n  return derived(store, (map) => Array.from(map.entries()));\n}\nfunction storeKeys(store) {\n  return derived(store, (map) => Array.from(map.keys()));\n}\nfunction getRemoteContext() {\n  return getContext(\"remote\");\n}\nfunction getSnackbarHostContext() {\n  return getContext(SnackbarHostState);\n}\nconst Layout = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let $currentSnackbarData, $$unsubscribe_currentSnackbarData;\n  const socket = connectRemote();\n  const state = remoteState(socket);\n  setContext(\"remote\", { socket, state });\n  const snackbarHostState = new SnackbarHostState();\n  const { currentSnackbarData } = snackbarHostState;\n  $$unsubscribe_currentSnackbarData = subscribe(currentSnackbarData, (value) => $currentSnackbarData = value);\n  setContext(SnackbarHostState, snackbarHostState);\n  socket?.addEventListener(\"error\", (event) => {\n    console.error(\"RemoteSocket error\", event);\n    snackbarHostState.showSnackbar(\"Remote socket error\");\n  });\n  socket?.addEventListener(\"open\", (event) => console.info(\"RemoteSocket open\", event));\n  socket?.addEventListener(\"close\", (event) => console.info(\"RemoteSocket close\", event));\n  $$unsubscribe_currentSnackbarData();\n  return `${$$result.head += `<!-- HEAD_svelte-1tkg7m6_START -->${$$result.title = `<title>CellWall Remote</title>`, \"\"}<link rel=\"manifest\" href=\"/manifest.webmanifest\"><!-- HEAD_svelte-1tkg7m6_END -->`, \"\"} ${validate_component(NavigationProgress, \"NavigationProgress\").$$render($$result, {}, {}, {})} ${validate_component(TopBar, \"TopBar\").$$render($$result, {}, {}, {})} ${validate_component(RemoteFrame, \"RemoteFrame\").$$render($$result, {}, {}, {\n    default: () => {\n      return `${slots.default ? slots.default({}) : ``}`;\n    }\n  })} ${validate_component(Snackbar, \"Snackbar\").$$render($$result, { data: $currentSnackbarData }, {}, {})}`;\n});\nexport {\n  Layout as L,\n  storeKeys as a,\n  getSnackbarHostContext as b,\n  getRemoteContext as g,\n  storeEntries as s\n};\n"],"names":[],"mappings":";;;;;;AAEA,SAAS,eAAe,CAAC,KAAK,EAAE,OAAO,GAAG,EAAE,EAAE;AAC9C,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,OAAO,CAAC;AAC7B,EAAE,IAAI,MAAM,EAAE,OAAO,EAAE;AACvB,IAAI,OAAO,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC;AACnD,GAAG;AACH,EAAE,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,KAAK;AAC1C,IAAI,MAAM,SAAS,GAAG,UAAU,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;AACjD,IAAI,IAAI,MAAM,EAAE;AAChB,MAAM,MAAM,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAM;AAC7C,QAAQ,YAAY,CAAC,SAAS,CAAC,CAAC;AAChC,QAAQ,MAAM,CAAC,IAAI,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC;AACxC,OAAO,CAAC,CAAC;AACT,KAAK;AACL,GAAG,CAAC,CAAC;AACL,CAAC;AACD,SAAS,cAAc,CAAC,GAAG,KAAK,EAAE;AAClC,EAAE,MAAM,OAAO,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,IAAI,KAAK,IAAI,IAAI,KAAK,CAAC,CAAC,CAAC;AACzD,EAAE,IAAI,OAAO,CAAC,MAAM,IAAI,CAAC,EAAE;AAC3B,IAAI,OAAO,OAAO,CAAC,CAAC,CAAC,CAAC;AACtB,GAAG;AACH,EAAE,MAAM,UAAU,GAAG,IAAI,eAAe,EAAE,CAAC;AAC3C,EAAE,MAAM,KAAK,GAAG,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;AAClD,EAAE,KAAK,MAAM,MAAM,IAAI,OAAO,EAAE;AAChC,IAAI,IAAI,MAAM,CAAC,OAAO,EAAE;AACxB,MAAM,KAAK,EAAE,CAAC;AACd,KAAK,MAAM;AACX,MAAM,MAAM,CAAC,gBAAgB,CAAC,OAAO,EAAE,KAAK,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,UAAU,CAAC,MAAM,EAAE,CAAC,CAAC;AACzF,KAAK;AACL,GAAG;AACH,EAAE,OAAO,UAAU,CAAC,MAAM,CAAC;AAC3B,CAAC;AACD,MAAM,iBAAiB,CAAC;AACxB,EAAE,oBAAoB,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;AAC1C,EAAE,aAAa,GAAG,OAAO,CAAC,OAAO,EAAE,CAAC;AACpC,EAAE,IAAI,mBAAmB,GAAG;AAC5B,IAAI,OAAO,IAAI,CAAC,oBAAoB,CAAC;AACrC,GAAG;AACH,EAAE,YAAY,CAAC,OAAO,EAAE,QAAQ,GAAG,IAAI,EAAE,OAAO,GAAG,EAAE,EAAE;AACvD,IAAI,MAAM,iBAAiB,GAAG,IAAI,eAAe,EAAE,CAAC;AACpD,IAAI,MAAM,YAAY,GAAG;AACzB,MAAM,OAAO;AACb,MAAM,QAAQ;AACd,MAAM,OAAO,EAAE,iBAAiB,CAAC,KAAK,CAAC,IAAI,CAAC,iBAAiB,CAAC;AAC9D,KAAK,CAAC;AACN,IAAI,MAAM,MAAM,GAAG,cAAc,CAAC,iBAAiB,CAAC,MAAM,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC;AAC5E,IAAI,MAAM,eAAe,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,MAAM;AAC3D,KAAK,CAAC,CAAC,IAAI,CAAC,MAAM;AAClB,MAAM,IAAI,MAAM,EAAE,OAAO;AACzB,QAAQ,OAAO;AACf,MAAM,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;AAClD,MAAM,OAAO,eAAe,CAAC,QAAQ,EAAE,EAAE,MAAM,EAAE,CAAC,CAAC,OAAO,CAAC,MAAM;AACjE,QAAQ,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;AAC9C,OAAO,CAAC,CAAC;AACT,KAAK,CAAC,CAAC;AACP,IAAI,IAAI,CAAC,aAAa,GAAG,eAAe,CAAC;AACzC,IAAI,OAAO,eAAe,CAAC;AAC3B,GAAG;AACH;;ACrDA,MAAM,GAAG,GAAG;AACZ,EAAE,IAAI,EAAE,wSAAwS;AAChT,EAAE,GAAG,EAAE,IAAI;AACX,CAAC,CAAC;AACF,MAAM,kBAAkB,GAAG,oBAAoB,CAAC,CAAC,QAAQ,EAAE,OAAO,EAAE,UAAU,EAAE,KAAK,KAAK;AAC1F,EAAE,IAAI,WAAW,EAAE,wBAAwB,CAAC;AAC5C,EAAE,wBAAwB,GAAG,SAAS,CAAC,UAAU,EAAE,CAAC,KAAK,KAAK,WAAW,GAAG,KAAK,CAAC,CAAC;AACnF,EAAE,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AACxB,EAAE,wBAAwB,EAAE,CAAC;AAC7B,EAAE,OAAO,CAAC,EAAE,WAAW,IAAI,IAAI,GAAG,CAAC,gFAAgF,EAAE,aAAa,CAAC,eAAe,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,aAAa,CAAC,eAAe,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,iBAAiB,EAAE,UAAU,GAAG,MAAM,CAAC,WAAW,EAAE,EAAE,EAAE,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC,sFAAsF,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAC5W,CAAC,CAAC,CAAC;AACH,MAAM,QAAQ,GAAG,oBAAoB,CAAC,CAAC,QAAQ,EAAE,OAAO,EAAE,UAAU,EAAE,KAAK,KAAK;AAChF,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,OAAO,CAAC;AACzB,EAAE,IAAI,OAAO,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,UAAU,CAAC,IAAI,IAAI,IAAI,KAAK,KAAK,CAAC;AACnE,IAAI,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC1B,EAAE,OAAO,CAAC,EAAE,IAAI,GAAG,CAAC,qgBAAqgB,EAAE,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AACjkB,CAAC,CAAC,CAAC;AACH,SAAS,aAAa,GAAG;AACzB,EAAE;AACF,IAAI,OAAO,KAAK,CAAC,CAAC;AAClB,GAAG;AACH,CAAC;AACD,SAAS,WAAW,CAAC,MAAM,EAAE;AAC7B,EAAE,OAAO,QAAQ,iBAAiB,IAAI,GAAG,EAAE,EAAE,CAAC,GAAG,KAAK;AACtD,IAAI,MAAM,UAAU,GAAG,IAAI,eAAe,EAAE,CAAC;AAC7C,IAAI,SAAS,aAAa,CAAC,EAAE,IAAI,EAAE,EAAE;AACrC,MAAM,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AACxC,MAAM,MAAM,OAAO,GAAG,IAAI,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;AACxD,MAAM,GAAG,CAAC,OAAO,CAAC,CAAC;AACnB,KAAK;AACL,IAAI,MAAM,EAAE,gBAAgB,CAAC,SAAS,EAAE,aAAa,EAAE,UAAU,CAAC,CAAC;AACnE,IAAI,OAAO,MAAM,UAAU,CAAC,KAAK,EAAE,CAAC;AACpC,GAAG,CAAC,CAAC;AACL,CAAC;AACD,SAAS,YAAY,CAAC,KAAK,EAAE;AAC7B,EAAE,OAAO,OAAO,CAAC,KAAK,EAAE,CAAC,GAAG,KAAK,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;AAC5D,CAAC;AACD,SAAS,SAAS,CAAC,KAAK,EAAE;AAC1B,EAAE,OAAO,OAAO,CAAC,KAAK,EAAE,CAAC,GAAG,KAAK,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;AACzD,CAAC;AACD,SAAS,gBAAgB,GAAG;AAC5B,EAAE,OAAO,UAAU,CAAC,QAAQ,CAAC,CAAC;AAC9B,CAAC;AAID,MAAM,MAAM,GAAG,oBAAoB,CAAC,CAAC,QAAQ,EAAE,OAAO,EAAE,UAAU,EAAE,KAAK,KAAK;AAC9E,EAAE,IAAI,oBAAoB,EAAE,iCAAiC,CAAC;AAC9D,EAAE,MAAM,MAAM,GAAG,aAAa,EAAE,CAAC;AACjC,EAAE,MAAM,KAAK,GAAG,WAAW,CAAC,MAAM,CAAC,CAAC;AACpC,EAAE,UAAU,CAAC,QAAQ,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC,CAAC;AAC1C,EAAE,MAAM,iBAAiB,GAAG,IAAI,iBAAiB,EAAE,CAAC;AACpD,EAAE,MAAM,EAAE,mBAAmB,EAAE,GAAG,iBAAiB,CAAC;AACpD,EAAE,iCAAiC,GAAG,SAAS,CAAC,mBAAmB,EAAE,CAAC,KAAK,KAAK,oBAAoB,GAAG,KAAK,CAAC,CAAC;AAC9G,EAAE,UAAU,CAAC,iBAAiB,EAAE,iBAAiB,CAAC,CAAC;AACnD,EAAE,MAAM,EAAE,gBAAgB,CAAC,OAAO,EAAE,CAAC,KAAK,KAAK;AAC/C,IAAI,OAAO,CAAC,KAAK,CAAC,oBAAoB,EAAE,KAAK,CAAC,CAAC;AAC/C,IAAI,iBAAiB,CAAC,YAAY,CAAC,qBAAqB,CAAC,CAAC;AAC1D,GAAG,CAAC,CAAC;AACL,EAAE,MAAM,EAAE,gBAAgB,CAAC,MAAM,EAAE,CAAC,KAAK,KAAK,OAAO,CAAC,IAAI,CAAC,mBAAmB,EAAE,KAAK,CAAC,CAAC,CAAC;AACxF,EAAE,MAAM,EAAE,gBAAgB,CAAC,OAAO,EAAE,CAAC,KAAK,KAAK,OAAO,CAAC,IAAI,CAAC,oBAAoB,EAAE,KAAK,CAAC,CAAC,CAAC;AAC1F,EAAE,iCAAiC,EAAE,CAAC;AACtC,EAAE,OAAO,CAAC,EAAE,QAAQ,CAAC,IAAI,IAAI,CAAC,kCAAkC,EAAE,QAAQ,CAAC,KAAK,GAAG,CAAC,8BAA8B,CAAC,EAAE,EAAE,CAAC,kFAAkF,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,kBAAkB,CAAC,kBAAkB,EAAE,oBAAoB,CAAC,CAAC,QAAQ,CAAC,QAAQ,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,kBAAkB,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC,QAAQ,CAAC,QAAQ,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,kBAAkB,CAAC,WAAW,EAAE,aAAa,CAAC,CAAC,QAAQ,CAAC,QAAQ,EAAE,EAAE,EAAE,EAAE,EAAE;AACnc,IAAI,OAAO,EAAE,MAAM;AACnB,MAAM,OAAO,CAAC,EAAE,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AACzD,KAAK;AACL,GAAG,CAAC,CAAC,CAAC,EAAE,kBAAkB,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC,QAAQ,CAAC,QAAQ,EAAE,EAAE,IAAI,EAAE,oBAAoB,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;AAC9G,CAAC,CAAC;;;;;;;;;;"}