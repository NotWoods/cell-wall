{"version":3,"file":"_page.svelte-bd276374.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/cell/frame/busy/_page.svelte.js"],"sourcesContent":["import { c as create_ssr_component, a as subscribe, e as escape, b as add_attribute, v as validate_component, n as noop } from \"../../../../../chunks/ssr.js\";\nimport { F as FormattedTime } from \"../../../../../chunks/FormattedTime.js\";\nimport { f as filterState } from \"../../../../../chunks/filter-state.js\";\nimport { r as readable } from \"../../../../../chunks/index2.js\";\nimport { getFrameContext } from \"../_layout.svelte.js\";\nfunction messages(messageSource, initialState) {\n  return readable(initialState, (set) => {\n    const controller = new AbortController();\n    messageSource?.addEventListener(\n      \"message\",\n      (event) => set(event.data),\n      controller\n    );\n    return () => controller.abort();\n  });\n}\nconst _page_svelte_svelte_type_style_lang = \"\";\nconst css = {\n  code: \"main.svelte-vg30ut{background:#262626}main.busy.svelte-vg30ut{background:#d87220}main.error.svelte-vg30ut{background:red}.profile.svelte-vg30ut{display:block;border-radius:50%}\",\n  map: null\n};\nconst knownPeople = new Map(Object.entries({\n  \"tigeroakes@gmail.com\": { name: \"Tiger\", image: \"/img/tiger.jpg\" },\n  \"daphne.liu97@gmail.com\": { name: \"Daphne\", image: \"/img/daphne.jpg\" }\n}));\nconst Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let calendarId;\n  let workerState;\n  let knownPerson;\n  let isBusy;\n  let error;\n  let $workerState, $$unsubscribe_workerState = noop, $$subscribe_workerState = () => ($$unsubscribe_workerState(), $$unsubscribe_workerState = subscribe(workerState, ($$value) => $workerState = $$value), workerState);\n  let $busyState, $$unsubscribe_busyState;\n  const { state } = getFrameContext();\n  const busyState = filterState(\"BUSY\", state);\n  $$unsubscribe_busyState = subscribe(busyState, (value) => $busyState = value);\n  let worker;\n  $$result.css.add(css);\n  calendarId = $busyState?.payload;\n  $$subscribe_workerState(workerState = messages(worker, { error: \"\" }));\n  knownPerson = calendarId ? knownPeople.get(calendarId) : void 0;\n  isBusy = $workerState.isBusy ?? { busy: false };\n  error = $workerState.error;\n  $$unsubscribe_workerState();\n  $$unsubscribe_busyState();\n  return `<main class=\"${[\n    \"fill center svelte-vg30ut\",\n    (isBusy.busy ? \"busy\" : \"\") + \" \" + (Boolean(error) ? \"error\" : \"\")\n  ].join(\" \").trim()}\">${knownPerson ? `<img class=\"profile svelte-vg30ut\" alt=\"${\"Portrait of \" + escape(knownPerson.name, true)}\"${add_attribute(\"src\", knownPerson.image, 0)} width=\"150\" height=\"150\">` : ``} <h1 class=\"headline-1\">${escape(isBusy.busy ? \"Busy\" : \"Free\")}</h1> ${isBusy.next ? `<span>until ${validate_component(FormattedTime, \"FormattedTime\").$$render($$result, { time: isBusy.next }, {}, {})}</span>` : ``} ${error ? `<span>${escape(error)}</span>` : ``} </main>`;\n});\nexport {\n  Page as default\n};\n"],"names":[],"mappings":";;;;;;;;;AAKA,SAAS,QAAQ,CAAC,aAAa,EAAE,YAAY,EAAE;AAC/C,EAAE,OAAO,QAAQ,CAAC,YAAY,EAAE,CAAC,GAAG,KAAK;AACzC,IAAI,MAAM,UAAU,GAAG,IAAI,eAAe,EAAE,CAAC;AAC7C,IAAI,aAAa,EAAE,gBAAgB;AACnC,MAAM,SAAS;AACf,MAAM,CAAC,KAAK,KAAK,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC;AAChC,MAAM,UAAU;AAChB,KAAK,CAAC;AACN,IAAI,OAAO,MAAM,UAAU,CAAC,KAAK,EAAE,CAAC;AACpC,GAAG,CAAC,CAAC;AACL,CAAC;AAED,MAAM,GAAG,GAAG;AACZ,EAAE,IAAI,EAAE,kLAAkL;AAC1L,EAAE,GAAG,EAAE,IAAI;AACX,CAAC,CAAC;AACF,MAAM,WAAW,GAAG,IAAI,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC;AAC3C,EAAE,sBAAsB,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,gBAAgB,EAAE;AACpE,EAAE,wBAAwB,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,iBAAiB,EAAE;AACxE,CAAC,CAAC,CAAC,CAAC;AACC,MAAC,IAAI,GAAG,oBAAoB,CAAC,CAAC,QAAQ,EAAE,OAAO,EAAE,UAAU,EAAE,KAAK,KAAK;AAC5E,EAAE,IAAI,UAAU,CAAC;AACjB,EAAE,IAAI,WAAW,CAAC;AAClB,EAAE,IAAI,WAAW,CAAC;AAClB,EAAE,IAAI,MAAM,CAAC;AACb,EAAE,IAAI,KAAK,CAAC;AACZ,EAAE,IAAI,YAAY,EAAE,yBAAyB,GAAG,IAAI,EAAE,uBAAuB,GAAG,OAAO,yBAAyB,EAAE,EAAE,yBAAyB,GAAG,SAAS,CAAC,WAAW,EAAE,CAAC,OAAO,KAAK,YAAY,GAAG,OAAO,CAAC,EAAE,WAAW,CAAC,CAAC;AAC1N,EAAE,IAAI,UAAU,EAAE,uBAAuB,CAAC;AAC1C,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,eAAe,EAAE,CAAC;AACtC,EAAE,MAAM,SAAS,GAAG,WAAW,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;AAC/C,EAAE,uBAAuB,GAAG,SAAS,CAAC,SAAS,EAAE,CAAC,KAAK,KAAK,UAAU,GAAG,KAAK,CAAC,CAAC;AAChF,EAAE,IAAI,MAAM,CAAC;AACb,EAAE,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AACxB,EAAE,UAAU,GAAG,UAAU,EAAE,OAAO,CAAC;AACnC,EAAE,uBAAuB,CAAC,WAAW,GAAG,QAAQ,CAAC,MAAM,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;AACzE,EAAE,WAAW,GAAG,UAAU,GAAG,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,GAAG,KAAK,CAAC,CAAC;AAClE,EAAE,MAAM,GAAG,YAAY,CAAC,MAAM,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC;AAClD,EAAE,KAAK,GAAG,YAAY,CAAC,KAAK,CAAC;AAC7B,EAAE,yBAAyB,EAAE,CAAC;AAC9B,EAAE,uBAAuB,EAAE,CAAC;AAC5B,EAAE,OAAO,CAAC,aAAa,EAAE;AACzB,IAAI,2BAA2B;AAC/B,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,MAAM,GAAG,EAAE,IAAI,GAAG,IAAI,OAAO,CAAC,KAAK,CAAC,GAAG,OAAO,GAAG,EAAE,CAAC;AACvE,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE,EAAE,WAAW,GAAG,CAAC,wCAAwC,EAAE,cAAc,GAAG,MAAM,CAAC,WAAW,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,aAAa,CAAC,KAAK,EAAE,WAAW,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,0BAA0B,CAAC,GAAG,CAAC,CAAC,CAAC,wBAAwB,EAAE,MAAM,CAAC,MAAM,CAAC,IAAI,GAAG,MAAM,GAAG,MAAM,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,IAAI,GAAG,CAAC,YAAY,EAAE,kBAAkB,CAAC,aAAa,EAAE,eAAe,CAAC,CAAC,QAAQ,CAAC,QAAQ,EAAE,EAAE,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,KAAK,GAAG,CAAC,MAAM,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;AACne,CAAC;;;;"}