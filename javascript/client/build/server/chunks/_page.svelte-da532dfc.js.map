{"version":3,"file":"_page.svelte-da532dfc.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/cell/_page.svelte.js"],"sourcesContent":["import { c as create_ssr_component, b as add_attribute } from \"../../../chunks/ssr.js\";\nimport { B as BROWSER } from \"../../../chunks/prod-ssr.js\";\nimport { f as frameUrl } from \"../../../chunks/state-socket.js\";\nimport { d as derived, w as writable } from \"../../../chunks/index2.js\";\nimport \"../../../chunks/web.js\";\nconst browser = BROWSER;\nfunction client_method(key) {\n  {\n    if (key === \"before_navigate\" || key === \"after_navigate\") {\n      return () => {\n      };\n    } else {\n      const name_lookup = {\n        disable_scroll_handling: \"disableScrollHandling\",\n        preload_data: \"preloadData\",\n        preload_code: \"preloadCode\",\n        invalidate_all: \"invalidateAll\"\n      };\n      return () => {\n        throw new Error(`Cannot call ${name_lookup[key] ?? key}(...) on the server`);\n      };\n    }\n  }\n}\nconst goto = /* @__PURE__ */ client_method(\"goto\");\nconst preloadCode = /* @__PURE__ */ client_method(\"preload_code\");\nconst cellStateTypes = /* @__PURE__ */ new Set([\n  \"BLANK\",\n  \"TEXT\",\n  \"IMAGE\",\n  \"WEB\",\n  \"CLOCK\",\n  \"BUSY\"\n]);\nfunction lockState() {\n  const state = writable({\n    active: false\n  });\n  return {\n    state,\n    active: derived(state, ($state) => $state.active),\n    error: derived(state, ($state) => $state.error)\n  };\n}\nfunction requestFullScreen() {\n  const controller = new AbortController();\n  const { state, ...stores } = lockState();\n  async function enterFullScreen() {\n    try {\n      await document.documentElement.requestFullscreen().then(\n        () => state.set({ active: true }),\n        (error) => state.set({ active: false, error })\n      );\n      state.set({ active: true });\n    } catch (error) {\n      if (error instanceof Error) {\n        state.set({ active: false, error });\n      } else {\n        throw error;\n      }\n    }\n  }\n  enterFullScreen();\n  document.addEventListener(\n    \"fullscreenchange\",\n    () => {\n      state.set({ active: Boolean(document.fullscreenElement) });\n    },\n    controller\n  );\n  return {\n    ...stores,\n    async release() {\n      controller.abort();\n      await document.exitFullscreen();\n    }\n  };\n}\nfunction requestWakeLock() {\n  if (\"wakeLock\" in navigator) {\n    let handleVisiblityChange = function() {\n      if (wakeLock !== null && document.visibilityState === \"visible\") {\n        requestNewLock();\n      }\n    };\n    const controller = new AbortController();\n    let wakeLock;\n    const { state, ...stores } = lockState();\n    async function requestNewLock() {\n      try {\n        wakeLock = await navigator.wakeLock.request(\"screen\");\n        state.set({ active: true });\n        wakeLock.addEventListener(\n          \"release\",\n          () => {\n            state.set({ active: false });\n          },\n          controller\n        );\n      } catch (error) {\n        if (error instanceof DOMException) {\n          state.set({ active: false, error });\n        } else {\n          throw error;\n        }\n      }\n    }\n    requestNewLock();\n    document.addEventListener(\"visibilitychange\", handleVisiblityChange, controller);\n    document.addEventListener(\"fullscreenchange\", handleVisiblityChange, controller);\n    return {\n      ...stores,\n      async release() {\n        controller.abort();\n        await wakeLock?.release();\n      }\n    };\n  } else {\n    return void 0;\n  }\n}\nconst _page_svelte_svelte_type_style_lang = \"\";\nconst css = {\n  code: \"form.svelte-1n83scs{display:flex;flex-direction:column;row-gap:1em;max-width:100vw;font-size:1.5rem}input.svelte-1n83scs,button.svelte-1n83scs{font:inherit}.buttons.svelte-1n83scs{display:flex;justify-content:space-between}button.svelte-1n83scs{padding:0.2em 1em}@media(max-width: 21rem){form.svelte-1n83scs{font-size:1rem}label.svelte-1n83scs{font-size:1.5em}}\",\n  map: null\n};\nconst Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let { data } = $$props;\n  let id = data.id || \"\";\n  async function submit() {\n    localStorage.setItem(\"id\", id);\n    requestFullScreen();\n    requestWakeLock();\n    const routePrefetchJob = preloadCode(...Array.from(cellStateTypes, (type) => frameUrl(type, id)));\n    await goto(frameUrl(\"BLANK\", id), { replaceState: false });\n    await routePrefetchJob;\n  }\n  if ($$props.data === void 0 && $$bindings.data && data !== void 0)\n    $$bindings.data(data);\n  $$result.css.add(css);\n  {\n    {\n      if (data.autoJoin && browser) {\n        submit();\n      }\n    }\n  }\n  return `${$$result.head += `<!-- HEAD_svelte-1rqvp1e_START -->${$$result.title = `<title>New Cell | CellWall</title>`, \"\"}<!-- HEAD_svelte-1rqvp1e_END -->`, \"\"} <div class=\"fill center wrapper\"><form action=\"/cell/frame/blank\" method=\"get\" class=\"svelte-1n83scs\"><img src=\"/logo.png\" alt=\"\" width=\"48\" height=\"48\"> <label for=\"control-id\" class=\"svelte-1n83scs\" data-svelte-h=\"svelte-10tqeo\">Cell ID</label> <input id=\"control-id\" name=\"id\" type=\"text\" required class=\"svelte-1n83scs\"${add_attribute(\"value\", id, 0)}> <div class=\"buttons svelte-1n83scs\"><button type=\"reset\" class=\"svelte-1n83scs\" data-svelte-h=\"svelte-1if3dms\">Reset</button> <button type=\"submit\" class=\"svelte-1n83scs\" data-svelte-h=\"svelte-19tnfmz\">Join</button></div></form> </div>`;\n});\nexport {\n  Page as default\n};\n"],"names":[],"mappings":"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"}