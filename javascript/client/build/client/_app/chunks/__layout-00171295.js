import{S as B,i as I,s as H,e as E,c as x,a as h,d,b as u,g,M as v,l as j,E as T,V as Y,t as q,k as y,O as K,h as V,m as S,P as J,X as Z,H as ee,j as te,Q as ae,Y as U,q as b,n as re,o as k,p as se,U as z,w as N,N as ne,x as R,y as C,B as M,r as W,I as oe,J as le,K as ie,L as ue}from"./index-6bece970.js";import{n as fe,T as ce,R as me}from"./TopBar-cf6a6994.js";import{a as F}from"./index-82b3cc87.js";import{r as de,d as G}from"./index-2a0b6ee6.js";import{S as A}from"./snackbar-host-69394265.js";function Q(o){let t,a,e,r,l;return{c(){t=E("div"),a=E("div"),this.h()},l(n){t=x(n,"DIV",{class:!0,role:!0,"aria-valuemin":!0,"aria-valuemax":!0,"aria-valuetext":!0});var i=h(t);a=x(i,"DIV",{class:!0}),h(a).forEach(d),i.forEach(d),this.h()},h(){var n,i;u(a,"class","progress-bar-value w-full h-full bg-gray-200 svelte-7f51jt"),u(t,"class","absolute w-full h-1 bg-green-900 overflow-hidden"),u(t,"role","progressbar"),u(t,"aria-valuemin",e=0),u(t,"aria-valuemax",r=1),u(t,"aria-valuetext",l="Loading "+((i=(n=o[0])==null?void 0:n.to)==null?void 0:i.pathname))},m(n,i){g(n,t,i),v(t,a)},p(n,i){var _,c;i&1&&l!==(l="Loading "+((c=(_=n[0])==null?void 0:_.to)==null?void 0:c.pathname))&&u(t,"aria-valuetext",l)},d(n){n&&d(t)}}}function _e(o){let t,a=o[0]!=null&&Q(o);return{c(){a&&a.c(),t=j()},l(e){a&&a.l(e),t=j()},m(e,r){a&&a.m(e,r),g(e,t,r)},p(e,[r]){e[0]!=null?a?a.p(e,r):(a=Q(e),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null)},i:T,o:T,d(e){a&&a.d(e),e&&d(t)}}}function pe(o,t,a){let e;return Y(o,fe,r=>a(0,e=r)),[e]}class ve extends B{constructor(t){super(),I(this,t,pe,_e,H,{})}}function X(o){let t,a,e,r,l,n,i,_,c=o[0].message+"",m,s,f,w,D;return{c(){t=E("aside"),a=E("button"),e=E("span"),r=q("Dismiss snackbar"),l=y(),n=K("svg"),i=K("path"),_=y(),m=q(c),this.h()},l(p){t=x(p,"ASIDE",{role:!0,class:!0});var $=h(t);a=x($,"BUTTON",{type:!0,class:!0,title:!0});var L=h(a);e=x(L,"SPAN",{class:!0});var O=h(e);r=V(O,"Dismiss snackbar"),O.forEach(d),l=S(L),n=J(L,"svg",{class:!0,fill:!0,viewBox:!0,stroke:!0,"aria-hidden":!0});var P=h(n);i=J(P,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),h(i).forEach(d),P.forEach(d),L.forEach(d),_=S($),m=V($,c),$.forEach(d),this.h()},h(){u(e,"class","sr-only"),u(i,"stroke-linecap","round"),u(i,"stroke-linejoin","round"),u(i,"stroke-width","2"),u(i,"d","M6 18L18 6M6 6l12 12"),u(n,"class","h-6 w-6 transition-colors"),u(n,"fill","none"),u(n,"viewBox","0 0 24 24"),u(n,"stroke","currentColor"),u(n,"aria-hidden","true"),u(a,"type","button"),u(a,"class","rounded-md float-right text-gray-600 hover:text-black"),u(a,"title","Dismiss snackbar"),u(t,"role","alert"),u(t,"class","fixed inset-4 top-auto bg-gray-200 text-black mx-auto px-4 py-2 max-w-lg")},m(p,$){g(p,t,$),v(t,a),v(a,e),v(e,r),v(a,l),v(a,n),v(n,i),v(t,_),v(t,m),f=!0,w||(D=Z(a,"click",function(){ee(o[0].dismiss)&&o[0].dismiss.apply(this,arguments)}),w=!0)},p(p,$){o=p,(!f||$&1)&&c!==(c=o[0].message+"")&&te(m,c)},i(p){f||(ae(()=>{s||(s=U(t,F,{y:100,duration:300},!0)),s.run(1)}),f=!0)},o(p){s||(s=U(t,F,{y:100,duration:300},!1)),s.run(0),f=!1},d(p){p&&d(t),p&&s&&s.end(),w=!1,D()}}}function $e(o){let t,a,e=o[0]&&X(o);return{c(){e&&e.c(),t=j()},l(r){e&&e.l(r),t=j()},m(r,l){e&&e.m(r,l),g(r,t,l),a=!0},p(r,[l]){r[0]?e?(e.p(r,l),l&1&&b(e,1)):(e=X(r),e.c(),b(e,1),e.m(t.parentNode,t)):e&&(re(),k(e,1,1,()=>{e=null}),se())},i(r){a||(b(e),a=!0)},o(r){k(e),a=!1},d(r){e&&e.d(r),r&&d(t)}}}function ge(o,t,a){let{data:e}=t;return o.$$set=r=>{"data"in r&&a(0,e=r.data)},[e]}class be extends B{constructor(t){super(),I(this,t,ge,$e,H,{data:0})}}function he(){return new WebSocket(`ws://${window.location.host}/remote`)}function ke(o){return de(new Map,t=>{const a=new AbortController;function e({data:r}){const l=JSON.parse(r),n=new Map(Object.entries(l));t(n)}return o==null||o.addEventListener("message",e,a),()=>a.abort()})}function Re(o){return G(o,t=>Array.from(t.entries()))}function Ce(o){return G(o,t=>Array.from(t.keys()))}function we(o){let t;const a=o[2].default,e=oe(a,o,o[3],null);return{c(){e&&e.c()},l(r){e&&e.l(r)},m(r,l){e&&e.m(r,l),t=!0},p(r,l){e&&e.p&&(!t||l&8)&&le(e,a,r,r[3],t?ue(a,r[3],l,null):ie(r[3]),null)},i(r){t||(b(e,r),t=!0)},o(r){k(e,r),t=!1},d(r){e&&e.d(r)}}}function ye(o){let t,a,e,r,l,n,i,_,c,m;return e=new ve({}),l=new ce({}),i=new me({props:{$$slots:{default:[we]},$$scope:{ctx:o}}}),c=new be({props:{data:o[0]}}),{c(){t=E("link"),a=y(),N(e.$$.fragment),r=y(),N(l.$$.fragment),n=y(),N(i.$$.fragment),_=y(),N(c.$$.fragment),this.h()},l(s){const f=ne('[data-svelte="svelte-1tkg7m6"]',document.head);t=x(f,"LINK",{rel:!0,href:!0}),f.forEach(d),a=S(s),R(e.$$.fragment,s),r=S(s),R(l.$$.fragment,s),n=S(s),R(i.$$.fragment,s),_=S(s),R(c.$$.fragment,s),this.h()},h(){document.title="CellWall Remote",u(t,"rel","manifest"),u(t,"href","/manifest.webmanifest")},m(s,f){v(document.head,t),g(s,a,f),C(e,s,f),g(s,r,f),C(l,s,f),g(s,n,f),C(i,s,f),g(s,_,f),C(c,s,f),m=!0},p(s,[f]){const w={};f&8&&(w.$$scope={dirty:f,ctx:s}),i.$set(w);const D={};f&1&&(D.data=s[0]),c.$set(D)},i(s){m||(b(e.$$.fragment,s),b(l.$$.fragment,s),b(i.$$.fragment,s),b(c.$$.fragment,s),m=!0)},o(s){k(e.$$.fragment,s),k(l.$$.fragment,s),k(i.$$.fragment,s),k(c.$$.fragment,s),m=!1},d(s){d(t),s&&d(a),M(e,s),s&&d(r),M(l,s),s&&d(n),M(i,s),s&&d(_),M(c,s)}}}function Me(){return z("remote")}function je(){return z(A)}function Se(o,t,a){let e,{$$slots:r={},$$scope:l}=t;const n=he(),i=ke(n);W("remote",{socket:n,state:i});const _=new A,{currentSnackbarData:c}=_;return Y(o,c,m=>a(0,e=m)),W(A,_),n==null||n.addEventListener("error",m=>{console.error("RemoteSocket error",m),_.showSnackbar("Remote socket error")}),n==null||n.addEventListener("open",m=>console.info("RemoteSocket open",m)),n==null||n.addEventListener("close",m=>console.info("RemoteSocket close",m)),o.$$set=m=>{"$$scope"in m&&a(3,l=m.$$scope)},[e,c,r,l]}class Ae extends B{constructor(t){super(),I(this,t,Se,ye,H,{})}}export{Ae as _,Ce as a,je as b,Me as g,Re as s};
