import{S as B,i as I,s as T,e as E,c as x,a as h,d,b as u,g,J as v,l as j,K as P,L as X,t as q,k as y,M as K,h as V,m as S,N as W,O as Z,j as ee,P as te,Q as F,q as b,n as ae,o as k,p as re,R as se,T as J,U as ne,V as z,W as Y,w as L,X as oe,x as N,y as C,B as M,r as U,F as le,G as ie,H as ue,I as fe}from"./vendor-75710b0b.js";import{n as ce,T as me,R as de}from"./TopBar-c7a17b61.js";import{S as A}from"./snackbar-host-c0618c11.js";function G(o){let t,a,e,r,l;return{c(){t=E("div"),a=E("div"),this.h()},l(n){t=x(n,"DIV",{class:!0,role:!0,"aria-valuemin":!0,"aria-valuemax":!0,"aria-valuetext":!0});var i=h(t);a=x(i,"DIV",{class:!0}),h(a).forEach(d),i.forEach(d),this.h()},h(){var n,i;u(a,"class","progress-bar-value w-full h-full bg-gray-200 svelte-7f51jt"),u(t,"class","absolute w-full h-1 bg-green-900 overflow-hidden"),u(t,"role","progressbar"),u(t,"aria-valuemin",e=0),u(t,"aria-valuemax",r=1),u(t,"aria-valuetext",l="Loading "+((i=(n=o[0])==null?void 0:n.to)==null?void 0:i.pathname))},m(n,i){g(n,t,i),v(t,a)},p(n,i){var _,c;i&1&&l!==(l="Loading "+((c=(_=n[0])==null?void 0:_.to)==null?void 0:c.pathname))&&u(t,"aria-valuetext",l)},d(n){n&&d(t)}}}function _e(o){let t,a=o[0]!=null&&G(o);return{c(){a&&a.c(),t=j()},l(e){a&&a.l(e),t=j()},m(e,r){a&&a.m(e,r),g(e,t,r)},p(e,[r]){e[0]!=null?a?a.p(e,r):(a=G(e),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null)},i:P,o:P,d(e){a&&a.d(e),e&&d(t)}}}function pe(o,t,a){let e;return X(o,ce,r=>a(0,e=r)),[e]}class ve extends B{constructor(t){super();I(this,t,pe,_e,T,{})}}function Q(o){let t,a,e,r,l,n,i,_,c=o[0].message+"",m,s,f,w,R;return{c(){t=E("aside"),a=E("button"),e=E("span"),r=q("Dismiss snackbar"),l=y(),n=K("svg"),i=K("path"),_=y(),m=q(c),this.h()},l(p){t=x(p,"ASIDE",{role:!0,class:!0});var $=h(t);a=x($,"BUTTON",{type:!0,class:!0,title:!0});var D=h(a);e=x(D,"SPAN",{class:!0});var H=h(e);r=V(H,"Dismiss snackbar"),H.forEach(d),l=S(D),n=W(D,"svg",{class:!0,fill:!0,viewBox:!0,stroke:!0,"aria-hidden":!0});var O=h(n);i=W(O,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),h(i).forEach(d),O.forEach(d),D.forEach(d),_=S($),m=V($,c),$.forEach(d),this.h()},h(){u(e,"class","sr-only"),u(i,"stroke-linecap","round"),u(i,"stroke-linejoin","round"),u(i,"stroke-width","2"),u(i,"d","M6 18L18 6M6 6l12 12"),u(n,"class","h-6 w-6 transition-colors"),u(n,"fill","none"),u(n,"viewBox","0 0 24 24"),u(n,"stroke","currentColor"),u(n,"aria-hidden","true"),u(a,"type","button"),u(a,"class","rounded-md float-right text-gray-600 hover:text-black"),u(a,"title","Dismiss snackbar"),u(t,"role","alert"),u(t,"class","fixed inset-4 top-auto bg-gray-200 text-black mx-auto px-4 py-2 max-w-lg")},m(p,$){g(p,t,$),v(t,a),v(a,e),v(e,r),v(a,l),v(a,n),v(n,i),v(t,_),v(t,m),f=!0,w||(R=Z(a,"click",function(){se(o[0].dismiss)&&o[0].dismiss.apply(this,arguments)}),w=!0)},p(p,$){o=p,(!f||$&1)&&c!==(c=o[0].message+"")&&ee(m,c)},i(p){f||(te(()=>{s||(s=F(t,J,{y:100,duration:300},!0)),s.run(1)}),f=!0)},o(p){s||(s=F(t,J,{y:100,duration:300},!1)),s.run(0),f=!1},d(p){p&&d(t),p&&s&&s.end(),w=!1,R()}}}function $e(o){let t,a,e=o[0]&&Q(o);return{c(){e&&e.c(),t=j()},l(r){e&&e.l(r),t=j()},m(r,l){e&&e.m(r,l),g(r,t,l),a=!0},p(r,[l]){r[0]?e?(e.p(r,l),l&1&&b(e,1)):(e=Q(r),e.c(),b(e,1),e.m(t.parentNode,t)):e&&(ae(),k(e,1,1,()=>{e=null}),re())},i(r){a||(b(e),a=!0)},o(r){k(e),a=!1},d(r){e&&e.d(r),r&&d(t)}}}function ge(o,t,a){let{data:e}=t;return o.$$set=r=>{"data"in r&&a(0,e=r.data)},[e]}class be extends B{constructor(t){super();I(this,t,ge,$e,T,{data:0})}}function he(){return new WebSocket(`ws://${window.location.host}/remote`)}function ke(o){return ne(new Map,t=>{const a=new AbortController;function e({data:r}){const l=JSON.parse(r),n=new Map(Object.entries(l));t(n)}return o==null||o.addEventListener("message",e,a),()=>a.abort()})}function De(o){return z(o,t=>Array.from(t.entries()))}function Le(o){return z(o,t=>Array.from(t.keys()))}function we(o){let t;const a=o[2].default,e=le(a,o,o[3],null);return{c(){e&&e.c()},l(r){e&&e.l(r)},m(r,l){e&&e.m(r,l),t=!0},p(r,l){e&&e.p&&(!t||l&8)&&ie(e,a,r,r[3],t?fe(a,r[3],l,null):ue(r[3]),null)},i(r){t||(b(e,r),t=!0)},o(r){k(e,r),t=!1},d(r){e&&e.d(r)}}}function ye(o){let t,a,e,r,l,n,i,_,c,m;return e=new ve({}),l=new me({}),i=new de({props:{$$slots:{default:[we]},$$scope:{ctx:o}}}),c=new be({props:{data:o[0]}}),{c(){t=E("link"),a=y(),L(e.$$.fragment),r=y(),L(l.$$.fragment),n=y(),L(i.$$.fragment),_=y(),L(c.$$.fragment),this.h()},l(s){const f=oe('[data-svelte="svelte-1tkg7m6"]',document.head);t=x(f,"LINK",{rel:!0,href:!0}),f.forEach(d),a=S(s),N(e.$$.fragment,s),r=S(s),N(l.$$.fragment,s),n=S(s),N(i.$$.fragment,s),_=S(s),N(c.$$.fragment,s),this.h()},h(){document.title="CellWall Remote",u(t,"rel","manifest"),u(t,"href","/manifest.webmanifest")},m(s,f){v(document.head,t),g(s,a,f),C(e,s,f),g(s,r,f),C(l,s,f),g(s,n,f),C(i,s,f),g(s,_,f),C(c,s,f),m=!0},p(s,[f]){const w={};f&8&&(w.$$scope={dirty:f,ctx:s}),i.$set(w);const R={};f&1&&(R.data=s[0]),c.$set(R)},i(s){m||(b(e.$$.fragment,s),b(l.$$.fragment,s),b(i.$$.fragment,s),b(c.$$.fragment,s),m=!0)},o(s){k(e.$$.fragment,s),k(l.$$.fragment,s),k(i.$$.fragment,s),k(c.$$.fragment,s),m=!1},d(s){d(t),s&&d(a),M(e,s),s&&d(r),M(l,s),s&&d(n),M(i,s),s&&d(_),M(c,s)}}}function Ne(){return Y("remote")}function Ce(){return Y(A)}function Se(o,t,a){let e,{$$slots:r={},$$scope:l}=t;const n=he(),i=ke(n);U("remote",{socket:n,state:i});const _=new A,{currentSnackbarData:c}=_;return X(o,c,m=>a(0,e=m)),U(A,_),n==null||n.addEventListener("error",m=>{console.error("RemoteSocket error",m),_.showSnackbar("Remote socket error")}),n==null||n.addEventListener("open",m=>console.info("RemoteSocket open",m)),n==null||n.addEventListener("close",m=>console.info("RemoteSocket close",m)),o.$$set=m=>{"$$scope"in m&&a(3,l=m.$$scope)},[e,c,r,l]}class Me extends B{constructor(t){super();I(this,t,Se,ye,T,{})}}export{Me as _,Ne as a,Le as b,Ce as g,De as s};
