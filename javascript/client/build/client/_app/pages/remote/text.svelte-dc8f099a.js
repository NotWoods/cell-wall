import{S as H,i as L,s as K,w as h,x as g,y as v,q as b,o as w,B as E,V as D,k as O,m as x,g as d,d as u,e as T,c as C,a as I,b as i,E as V,ah as U,t as S,h as y,M as z}from"../../chunks/index-6bece970.js";import{R as M,D as X}from"../../chunks/DeviceOptions-dd7641e8.js";import{H as P}from"../../chunks/HorizontalField-10ed728a.js";import{V as j}from"../../chunks/VerticalField-ddc7385f.js";import{F as G}from"../../chunks/Form-8928ba22.js";import{g as J,s as Q,a as W}from"../../chunks/__layout-fd782b1f.js";import"../../chunks/Label-f27fee94.js";import"../../chunks/snackbar-host-d8a20024.js";import"../../chunks/web-75f832b0.js";import"../../chunks/index-2a0b6ee6.js";import"../../chunks/TopBar-f9ff8a42.js";import"../../chunks/index-82b3cc87.js";function Y(n){let e,r;return{c(){e=T("textarea"),this.h()},l(s){e=C(s,"TEXTAREA",{class:!0,id:!0,name:!0,rows:!0,placeholder:!0}),I(e).forEach(u),this.h()},h(){i(e,"class",r=n[6]),e.required=!0,i(e,"id","control-text"),i(e,"name","text"),i(e,"rows","10"),i(e,"placeholder"," Apple \r Banana \r Carrot")},m(s,o){d(s,e,o)},p(s,o){o&64&&r!==(r=s[6])&&i(e,"class",r)},d(s){s&&u(e)}}}function Z(n){let e;return{c(){e=T("input"),this.h()},l(r){e=C(r,"INPUT",{id:!0,name:!0,type:!0}),this.h()},h(){i(e,"id","control-color"),i(e,"name","backgroundColor"),i(e,"type","color"),e.value="#ffffff"},m(r,s){d(r,e,s)},p:V,d(r){r&&u(e)}}}function ee(n){let e,r,s,o;return r=new X({props:{devices:n[1]}}),{c(){e=T("select"),h(r.$$.fragment),this.h()},l(a){e=C(a,"SELECT",{name:!0,id:!0,class:!0});var l=I(e);g(r.$$.fragment,l),l.forEach(u),this.h()},h(){e.multiple=!0,i(e,"name","device"),i(e,"id","control-serial"),i(e,"class",s=n[6])},m(a,l){d(a,e,l),v(r,e,null),U(e,n[0]),o=!0},p(a,l){const c={};l&2&&(c.devices=a[1]),r.$set(c),(!o||l&64&&s!==(s=a[6]))&&i(e,"class",s),(!o||l&1)&&U(e,a[0])},i(a){o||(b(r.$$.fragment,a),o=!0)},o(a){w(r.$$.fragment,a),o=!1},d(a){a&&u(e),E(r)}}}function te(n){let e,r,s,o,a,l,c,m;return{c(){e=T("select"),r=T("option"),s=S("Ignore"),o=T("option"),a=S("Blank"),l=T("option"),c=S("Off"),this.h()},l($){e=C($,"SELECT",{id:!0,name:!0,class:!0});var p=I(e);r=C(p,"OPTION",{});var _=I(r);s=y(_,"Ignore"),_.forEach(u),o=C(p,"OPTION",{});var k=I(o);a=y(k,"Blank"),k.forEach(u),l=C(p,"OPTION",{});var t=I(l);c=y(t,"Off"),t.forEach(u),p.forEach(u),this.h()},h(){r.__value="ignore",r.value=r.__value,o.__value="blank",o.value=o.__value,l.__value="off",l.value=l.__value,i(e,"id","control-rest"),i(e,"name","rest"),i(e,"class",m=n[6])},m($,p){d($,e,p),z(e,r),z(r,s),z(e,o),z(o,a),z(e,l),z(l,c)},p($,p){p&64&&m!==(m=$[6])&&i(e,"class",m)},d($){$&&u(e)}}}function se(n){let e;return{c(){e=T("input"),this.h()},l(r){e=C(r,"INPUT",{id:!0,name:!0,type:!0}),this.h()},h(){i(e,"id","control-delay"),i(e,"name","delay"),i(e,"type","number"),e.value="0"},m(r,s){d(r,e,s)},p:V,d(r){r&&u(e)}}}function re(n){let e,r,s,o,a,l,c,m,$,p,_,k;return e=new j({props:{for:"control-text",label:"Text",$$slots:{default:[Y,({inputClassName:t})=>({6:t}),({inputClassName:t})=>t?64:0]},$$scope:{ctx:n}}}),s=new P({props:{for:"control-color",label:"Background Color",$$slots:{default:[Z]},$$scope:{ctx:n}}}),a=new P({props:{for:"control-serial",label:"Devices",$$slots:{default:[ee,({inputClassName:t})=>({6:t}),({inputClassName:t})=>t?64:0]},$$scope:{ctx:n}}}),c=new P({props:{for:"control-rest",label:"Remaining Cells",$$slots:{default:[te,({inputClassName:t})=>({6:t}),({inputClassName:t})=>t?64:0]},$$scope:{ctx:n}}}),$=new P({props:{for:"control-delay",label:"Update delay",$$slots:{default:[se]},$$scope:{ctx:n}}}),_=new M({props:{loading:n[5]}}),{c(){h(e.$$.fragment),r=O(),h(s.$$.fragment),o=O(),h(a.$$.fragment),l=O(),h(c.$$.fragment),m=O(),h($.$$.fragment),p=O(),h(_.$$.fragment)},l(t){g(e.$$.fragment,t),r=x(t),g(s.$$.fragment,t),o=x(t),g(a.$$.fragment,t),l=x(t),g(c.$$.fragment,t),m=x(t),g($.$$.fragment,t),p=x(t),g(_.$$.fragment,t)},m(t,f){v(e,t,f),d(t,r,f),v(s,t,f),d(t,o,f),v(a,t,f),d(t,l,f),v(c,t,f),d(t,m,f),v($,t,f),d(t,p,f),v(_,t,f),k=!0},p(t,f){const B={};f&192&&(B.$$scope={dirty:f,ctx:t}),e.$set(B);const N={};f&128&&(N.$$scope={dirty:f,ctx:t}),s.$set(N);const R={};f&195&&(R.$$scope={dirty:f,ctx:t}),a.$set(R);const F={};f&192&&(F.$$scope={dirty:f,ctx:t}),c.$set(F);const q={};f&128&&(q.$$scope={dirty:f,ctx:t}),$.$set(q);const A={};f&32&&(A.loading=t[5]),_.$set(A)},i(t){k||(b(e.$$.fragment,t),b(s.$$.fragment,t),b(a.$$.fragment,t),b(c.$$.fragment,t),b($.$$.fragment,t),b(_.$$.fragment,t),k=!0)},o(t){w(e.$$.fragment,t),w(s.$$.fragment,t),w(a.$$.fragment,t),w(c.$$.fragment,t),w($.$$.fragment,t),w(_.$$.fragment,t),k=!1},d(t){E(e,t),t&&u(r),E(s,t),t&&u(o),E(a,t),t&&u(l),E(c,t),t&&u(m),E($,t),t&&u(p),E(_,t)}}}function oe(n){let e,r;return e=new G({props:{class:"flex flex-col gap-y-4",action:"/api/action/text",onSubmit:ae,$$slots:{default:[re,({loading:s})=>({5:s}),({loading:s})=>s?32:0]},$$scope:{ctx:n}}}),{c(){h(e.$$.fragment)},l(s){g(e.$$.fragment,s)},m(s,o){v(e,s,o),r=!0},p(s,[o]){const a={};o&163&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){r||(b(e.$$.fragment,s),r=!0)},o(s){w(e.$$.fragment,s),r=!1},d(s){E(e,s)}}}async function ae(n,e){const r=n.get("backgroundColor");r!=="#ffffff"&&e.searchParams.set("backgroundColor",r),e.searchParams.set("rest",n.get("rest")),e.searchParams.set("delay",n.get("delay"));try{const s=await fetch(e.toString(),{method:"post",headers:{"content-type":"text/plain"},body:n.get("text")});if(!s.ok)throw new Error(s.statusText)}catch(s){throw console.error(s),s}}function ne(n,e,r){let s,o;const{state:a}=J(),l=Q(a);D(n,l,m=>r(1,o=m));const c=W(a);return D(n,c,m=>r(0,s=m)),[s,o,l,c]}class ve extends H{constructor(e){super(),L(this,e,ne,oe,K,{})}}export{ve as default};
