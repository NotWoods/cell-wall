import{S as D,i as V,s as H,w as d,x as h,y as g,q as v,o as b,B as E,V as q,k as O,m as I,g as _,d as m,e as w,c as C,a as k,b as c,E as L,ah as A,t as S,h as z,M as T}from"../../chunks/index-6bece970.js";import{R as y,D as K}from"../../chunks/DeviceOptions-da53de79.js";import{H as P}from"../../chunks/HorizontalField-10ed728a.js";import{V as M}from"../../chunks/VerticalField-ddc7385f.js";import{F as U}from"../../chunks/Form-1a153f1b.js";import{g as X,s as j,a as G}from"../../chunks/__layout-00171295.js";import"../../chunks/Label-f27fee94.js";import"../../chunks/snackbar-host-69394265.js";import"../../chunks/web-1a0de502.js";import"../../chunks/index-2a0b6ee6.js";import"../../chunks/TopBar-cf6a6994.js";import"../../chunks/index-82b3cc87.js";function J(l){let e,o;return{c(){e=w("textarea"),this.h()},l(s){e=C(s,"TEXTAREA",{class:!0,id:!0,name:!0,rows:!0,placeholder:!0}),k(e).forEach(m),this.h()},h(){c(e,"class",o=l[6]),e.required=!0,c(e,"id","control-text"),c(e,"name","text"),c(e,"rows","10"),c(e,"placeholder"," Apple \r Banana \r Carrot")},m(s,r){_(s,e,r)},p(s,r){r&64&&o!==(o=s[6])&&c(e,"class",o)},d(s){s&&m(e)}}}function Q(l){let e;return{c(){e=w("input"),this.h()},l(o){e=C(o,"INPUT",{id:!0,name:!0,type:!0}),this.h()},h(){c(e,"id","control-color"),c(e,"name","backgroundColor"),c(e,"type","color"),e.value="#ffffff"},m(o,s){_(o,e,s)},p:L,d(o){o&&m(e)}}}function W(l){let e,o,s,r;return o=new K({props:{devices:l[1]}}),{c(){e=w("select"),d(o.$$.fragment),this.h()},l(a){e=C(a,"SELECT",{name:!0,id:!0,class:!0});var n=k(e);h(o.$$.fragment,n),n.forEach(m),this.h()},h(){e.multiple=!0,c(e,"name","device"),c(e,"id","control-serial"),c(e,"class",s=l[6])},m(a,n){_(a,e,n),g(o,e,null),A(e,l[0]),r=!0},p(a,n){const f={};n&2&&(f.devices=a[1]),o.$set(f),(!r||n&64&&s!==(s=a[6]))&&c(e,"class",s),(!r||n&1)&&A(e,a[0])},i(a){r||(v(o.$$.fragment,a),r=!0)},o(a){b(o.$$.fragment,a),r=!1},d(a){a&&m(e),E(o)}}}function Y(l){let e,o,s,r,a,n,f,u;return{c(){e=w("select"),o=w("option"),s=S("Ignore"),r=w("option"),a=S("Blank"),n=w("option"),f=S("Off"),this.h()},l($){e=C($,"SELECT",{id:!0,name:!0,class:!0});var p=k(e);o=C(p,"OPTION",{});var t=k(o);s=z(t,"Ignore"),t.forEach(m),r=C(p,"OPTION",{});var i=k(r);a=z(i,"Blank"),i.forEach(m),n=C(p,"OPTION",{});var x=k(n);f=z(x,"Off"),x.forEach(m),p.forEach(m),this.h()},h(){o.__value="ignore",o.value=o.__value,r.__value="blank",r.value=r.__value,n.__value="off",n.value=n.__value,c(e,"id","control-rest"),c(e,"name","rest"),c(e,"class",u=l[6])},m($,p){_($,e,p),T(e,o),T(o,s),T(e,r),T(r,a),T(e,n),T(n,f)},p($,p){p&64&&u!==(u=$[6])&&c(e,"class",u)},d($){$&&m(e)}}}function Z(l){let e,o,s,r,a,n,f,u,$,p;return e=new M({props:{for:"control-text",label:"Text",$$slots:{default:[J,({inputClassName:t})=>({6:t}),({inputClassName:t})=>t?64:0]},$$scope:{ctx:l}}}),s=new P({props:{for:"control-color",label:"Background Color",$$slots:{default:[Q]},$$scope:{ctx:l}}}),a=new P({props:{for:"control-serial",label:"Devices",$$slots:{default:[W,({inputClassName:t})=>({6:t}),({inputClassName:t})=>t?64:0]},$$scope:{ctx:l}}}),f=new P({props:{for:"control-rest",label:"Remaining Cells",$$slots:{default:[Y,({inputClassName:t})=>({6:t}),({inputClassName:t})=>t?64:0]},$$scope:{ctx:l}}}),$=new y({props:{loading:l[5]}}),{c(){d(e.$$.fragment),o=O(),d(s.$$.fragment),r=O(),d(a.$$.fragment),n=O(),d(f.$$.fragment),u=O(),d($.$$.fragment)},l(t){h(e.$$.fragment,t),o=I(t),h(s.$$.fragment,t),r=I(t),h(a.$$.fragment,t),n=I(t),h(f.$$.fragment,t),u=I(t),h($.$$.fragment,t)},m(t,i){g(e,t,i),_(t,o,i),g(s,t,i),_(t,r,i),g(a,t,i),_(t,n,i),g(f,t,i),_(t,u,i),g($,t,i),p=!0},p(t,i){const x={};i&192&&(x.$$scope={dirty:i,ctx:t}),e.$set(x);const B={};i&128&&(B.$$scope={dirty:i,ctx:t}),s.$set(B);const R={};i&195&&(R.$$scope={dirty:i,ctx:t}),a.$set(R);const F={};i&192&&(F.$$scope={dirty:i,ctx:t}),f.$set(F);const N={};i&32&&(N.loading=t[5]),$.$set(N)},i(t){p||(v(e.$$.fragment,t),v(s.$$.fragment,t),v(a.$$.fragment,t),v(f.$$.fragment,t),v($.$$.fragment,t),p=!0)},o(t){b(e.$$.fragment,t),b(s.$$.fragment,t),b(a.$$.fragment,t),b(f.$$.fragment,t),b($.$$.fragment,t),p=!1},d(t){E(e,t),t&&m(o),E(s,t),t&&m(r),E(a,t),t&&m(n),E(f,t),t&&m(u),E($,t)}}}function ee(l){let e,o;return e=new U({props:{class:"flex flex-col gap-y-4",action:"/api/action/text",onSubmit:te,$$slots:{default:[Z,({loading:s})=>({5:s}),({loading:s})=>s?32:0]},$$scope:{ctx:l}}}),{c(){d(e.$$.fragment)},l(s){h(e.$$.fragment,s)},m(s,r){g(e,s,r),o=!0},p(s,[r]){const a={};r&163&&(a.$$scope={dirty:r,ctx:s}),e.$set(a)},i(s){o||(v(e.$$.fragment,s),o=!0)},o(s){b(e.$$.fragment,s),o=!1},d(s){E(e,s)}}}const _e=!0;async function te(l,e){const o=l.get("backgroundColor");o!=="#ffffff"&&e.searchParams.set("backgroundColor",o),e.searchParams.set("rest",l.get("rest"));try{const s=await fetch(e.toString(),{method:"post",headers:{"content-type":"text/plain"},body:l.get("text")});if(!s.ok)throw new Error(s.statusText)}catch(s){throw console.error(s),s}}function se(l,e,o){let s,r;const{state:a}=X(),n=j(a);q(l,n,u=>o(1,r=u));const f=G(a);return q(l,f,u=>o(0,s=u)),[s,r,n,f]}class de extends D{constructor(e){super(),V(this,e,se,ee,H,{})}}export{de as default,_e as prerender};
