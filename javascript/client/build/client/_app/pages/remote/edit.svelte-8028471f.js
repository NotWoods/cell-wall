import{S as V,i as Z,s as x,w as b,x as w,y as k,q as v,o as g,B as z,k as P,m as N,g as _,d as m,a9 as ee,l as G,e as U,c as C,a as te,b as o,P as le,ab as J,O as se,n as ne,a4 as ae,a5 as ie,p as re}from"../../chunks/vendor-972526c7.js";import{c as oe,H as S,D as fe}from"../../chunks/_DeviceOption-88788b37.js";import{F as ue}from"../../chunks/SubmitButton-1680a1c0.js";import{P as $e}from"../../chunks/_PowerButtons-2c9c5389.js";import{f as ce}from"../../chunks/_form-52443b97.js";import{R as pe}from"../../chunks/_ResetSubmit-e5269f42.js";import"../../chunks/snackbar-host-fd27c917.js";function K(r,e,a){const s=r.slice();return s[7]=e[a],s}function Q(r,e){let a,s,l;return s=new fe({props:{device:e[7]}}),{key:r,first:null,c(){a=G(),b(s.$$.fragment),this.h()},l(n){a=G(),w(s.$$.fragment,n),this.h()},h(){this.first=a},m(n,i){_(n,a,i),k(s,n,i),l=!0},p(n,i){e=n;const $={};i&1&&($.device=e[7]),s.$set($)},i(n){l||(v(s.$$.fragment,n),l=!0)},o(n){g(s.$$.fragment,n),l=!1},d(n){n&&m(a),z(s,n)}}}function me(r){let e,a=[],s=new Map,l,n,i,$,c=r[0];const h=p=>p[7].serial;for(let p=0;p<c.length;p+=1){let u=K(r,c,p),d=h(u);s.set(d,a[p]=Q(d,u))}return{c(){e=U("select");for(let p=0;p<a.length;p+=1)a[p].c();this.h()},l(p){e=C(p,"SELECT",{class:!0,name:!0,id:!0});var u=te(e);for(let d=0;d<a.length;d+=1)a[d].l(u);u.forEach(m),this.h()},h(){o(e,"class",l=r[6]),o(e,"name","serial"),o(e,"id","control-serial"),r[1]===void 0&&le(()=>r[4].call(e))},m(p,u){_(p,e,u);for(let d=0;d<a.length;d+=1)a[d].m(e,null);J(e,r[1]),n=!0,i||($=se(e,"change",r[4]),i=!0)},p(p,u){u&1&&(c=p[0],ne(),a=ae(a,u,h,1,p,c,s,e,ie,Q,null,K),re()),(!n||u&64&&l!==(l=p[6]))&&o(e,"class",l),u&2&&J(e,p[1])},i(p){if(!n){for(let u=0;u<c.length;u+=1)v(a[u]);n=!0}},o(p){for(let u=0;u<a.length;u+=1)g(a[u]);n=!1},d(p){p&&m(e);for(let u=0;u<a.length;u+=1)a[u].d();i=!1,$()}}}function he(r){let e,a;return{c(){e=U("input"),this.h()},l(s){e=C(s,"INPUT",{type:!0,id:!0,name:!0}),this.h()},h(){var s,l;o(e,"type","checkbox"),o(e,"id","control-connected"),o(e,"name","connected"),e.disabled=!0,e.checked=a=(l=(s=r[2])==null?void 0:s.connected)!=null?l:!1},m(s,l){_(s,e,l)},p(s,l){var n,i;l&4&&a!==(a=(i=(n=s[2])==null?void 0:n.connected)!=null?i:!1)&&(e.checked=a)},d(s){s&&m(e)}}}function _e(r){let e,a;return e=new $e({props:{serial:r[1]}}),{c(){b(e.$$.fragment)},l(s){w(e.$$.fragment,s)},m(s,l){k(e,s,l),a=!0},p(s,l){const n={};l&2&&(n.serial=s[1]),e.$set(n)},i(s){a||(v(e.$$.fragment,s),a=!0)},o(s){g(e.$$.fragment,s),a=!1},d(s){z(e,s)}}}function de(r){let e,a,s;return{c(){e=U("input"),this.h()},l(l){e=C(l,"INPUT",{id:!0,class:!0,name:!0,type:!0,placeholder:!0}),this.h()},h(){var l,n,i;o(e,"id","control-deviceName"),o(e,"class",a=r[6]),o(e,"name","deviceName"),o(e,"type","text"),e.value=s=(i=(n=(l=r[2])==null?void 0:l.info)==null?void 0:n.deviceName)!=null?i:"",o(e,"placeholder","Pixel 10")},m(l,n){_(l,e,n)},p(l,n){var i,$,c;n&64&&a!==(a=l[6])&&o(e,"class",a),n&4&&s!==(s=(c=($=(i=l[2])==null?void 0:i.info)==null?void 0:$.deviceName)!=null?c:"")&&e.value!==s&&(e.value=s)},d(l){l&&m(e)}}}function ve(r){let e,a,s;return{c(){e=U("input"),this.h()},l(l){e=C(l,"INPUT",{id:!0,class:!0,name:!0,type:!0,min:!0,placeholder:!0}),this.h()},h(){var l,n,i;o(e,"id","control-width"),o(e,"class",a=r[6]),o(e,"name","width"),o(e,"type","number"),o(e,"min",0),e.value=s=(i=(n=(l=r[2])==null?void 0:l.info)==null?void 0:n.width)!=null?i:"",o(e,"placeholder","900")},m(l,n){_(l,e,n)},p(l,n){var i,$,c;n&64&&a!==(a=l[6])&&o(e,"class",a),n&4&&s!==(s=(c=($=(i=l[2])==null?void 0:i.info)==null?void 0:$.width)!=null?c:"")&&e.value!==s&&(e.value=s)},d(l){l&&m(e)}}}function ge(r){let e,a,s;return{c(){e=U("input"),this.h()},l(l){e=C(l,"INPUT",{id:!0,class:!0,name:!0,type:!0,min:!0,placeholder:!0}),this.h()},h(){var l,n,i;o(e,"id","control-height"),o(e,"class",a=r[6]),o(e,"name","height"),o(e,"type","number"),o(e,"min",0),e.value=s=(i=(n=(l=r[2])==null?void 0:l.info)==null?void 0:n.height)!=null?i:"",o(e,"placeholder","2100")},m(l,n){_(l,e,n)},p(l,n){var i,$,c;n&64&&a!==(a=l[6])&&o(e,"class",a),n&4&&s!==(s=(c=($=(i=l[2])==null?void 0:i.info)==null?void 0:$.height)!=null?c:"")&&e.value!==s&&(e.value=s)},d(l){l&&m(e)}}}function be(r){let e,a,s;return{c(){e=U("input"),this.h()},l(l){e=C(l,"INPUT",{id:!0,class:!0,name:!0,type:!0,placeholder:!0}),this.h()},h(){var l,n,i;o(e,"id","control-x"),o(e,"class",a=r[6]),o(e,"name","x"),o(e,"type","number"),e.value=s=(i=(n=(l=r[2])==null?void 0:l.info)==null?void 0:n.x)!=null?i:"",o(e,"placeholder","10")},m(l,n){_(l,e,n)},p(l,n){var i,$,c;n&64&&a!==(a=l[6])&&o(e,"class",a),n&4&&s!==(s=(c=($=(i=l[2])==null?void 0:i.info)==null?void 0:$.x)!=null?c:"")&&e.value!==s&&(e.value=s)},d(l){l&&m(e)}}}function we(r){let e,a,s;return{c(){e=U("input"),this.h()},l(l){e=C(l,"INPUT",{id:!0,class:!0,name:!0,type:!0,placeholder:!0}),this.h()},h(){var l,n,i;o(e,"id","control-y"),o(e,"class",a=r[6]),o(e,"name","y"),o(e,"type","number"),e.value=s=(i=(n=(l=r[2])==null?void 0:l.info)==null?void 0:n.y)!=null?i:"",o(e,"placeholder","0")},m(l,n){_(l,e,n)},p(l,n){var i,$,c;n&64&&a!==(a=l[6])&&o(e,"class",a),n&4&&s!==(s=(c=($=(i=l[2])==null?void 0:i.info)==null?void 0:$.y)!=null?c:"")&&e.value!==s&&(e.value=s)},d(l){l&&m(e)}}}function ke(r){let e,a,s;return{c(){e=U("input"),this.h()},l(l){e=C(l,"INPUT",{id:!0,class:!0,name:!0,type:!0,placeholder:!0}),this.h()},h(){var l,n,i;o(e,"id","control-server"),o(e,"class",a=r[6]),o(e,"name","server"),o(e,"type","url"),e.value=s=(i=(n=(l=r[2])==null?void 0:l.info)==null?void 0:n.server)!=null?i:"",o(e,"placeholder","http://192.168.0.1")},m(l,n){_(l,e,n)},p(l,n){var i,$,c;n&64&&a!==(a=l[6])&&o(e,"class",a),n&4&&s!==(s=(c=($=(i=l[2])==null?void 0:i.info)==null?void 0:$.server)!=null?c:"")&&e.value!==s&&(e.value=s)},d(l){l&&m(e)}}}function ze(r){let e,a,s,l,n,i,$,c,h,p,u,d,T,y,j,B,D,E,I,F;return e=new S({props:{for:"control-serial",label:"Device",$$slots:{default:[me,({inputClassName:t})=>({6:t}),({inputClassName:t})=>t?64:0]},$$scope:{ctx:r}}}),s=new S({props:{for:"control-connected",label:"Connected",$$slots:{default:[he]},$$scope:{ctx:r}}}),n=new S({props:{label:"Power",$$slots:{default:[_e]},$$scope:{ctx:r}}}),$=new S({props:{for:"control-deviceName",label:"Device Name",$$slots:{default:[de,({inputClassName:t})=>({6:t}),({inputClassName:t})=>t?64:0]},$$scope:{ctx:r}}}),h=new S({props:{for:"control-width",label:"Width",$$slots:{default:[ve,({inputClassName:t})=>({6:t}),({inputClassName:t})=>t?64:0]},$$scope:{ctx:r}}}),u=new S({props:{for:"control-height",label:"Height",$$slots:{default:[ge,({inputClassName:t})=>({6:t}),({inputClassName:t})=>t?64:0]},$$scope:{ctx:r}}}),T=new S({props:{for:"control-x",label:"X Position",$$slots:{default:[be,({inputClassName:t})=>({6:t}),({inputClassName:t})=>t?64:0]},$$scope:{ctx:r}}}),j=new S({props:{for:"control-y",label:"Y Position",$$slots:{default:[we,({inputClassName:t})=>({6:t}),({inputClassName:t})=>t?64:0]},$$scope:{ctx:r}}}),D=new S({props:{for:"control-server",label:"Asset Server",$$slots:{default:[ke,({inputClassName:t})=>({6:t}),({inputClassName:t})=>t?64:0]},$$scope:{ctx:r}}}),I=new pe({props:{loading:r[5]}}),{c(){b(e.$$.fragment),a=P(),b(s.$$.fragment),l=P(),b(n.$$.fragment),i=P(),b($.$$.fragment),c=P(),b(h.$$.fragment),p=P(),b(u.$$.fragment),d=P(),b(T.$$.fragment),y=P(),b(j.$$.fragment),B=P(),b(D.$$.fragment),E=P(),b(I.$$.fragment)},l(t){w(e.$$.fragment,t),a=N(t),w(s.$$.fragment,t),l=N(t),w(n.$$.fragment,t),i=N(t),w($.$$.fragment,t),c=N(t),w(h.$$.fragment,t),p=N(t),w(u.$$.fragment,t),d=N(t),w(T.$$.fragment,t),y=N(t),w(j.$$.fragment,t),B=N(t),w(D.$$.fragment,t),E=N(t),w(I.$$.fragment,t)},m(t,f){k(e,t,f),_(t,a,f),k(s,t,f),_(t,l,f),k(n,t,f),_(t,i,f),k($,t,f),_(t,c,f),k(h,t,f),_(t,p,f),k(u,t,f),_(t,d,f),k(T,t,f),_(t,y,f),k(j,t,f),_(t,B,f),k(D,t,f),_(t,E,f),k(I,t,f),F=!0},p(t,f){const H={};f&1091&&(H.$$scope={dirty:f,ctx:t}),e.$set(H);const O={};f&1028&&(O.$$scope={dirty:f,ctx:t}),s.$set(O);const R={};f&1026&&(R.$$scope={dirty:f,ctx:t}),n.$set(R);const q={};f&1092&&(q.$$scope={dirty:f,ctx:t}),$.$set(q);const A={};f&1092&&(A.$$scope={dirty:f,ctx:t}),h.$set(A);const L={};f&1092&&(L.$$scope={dirty:f,ctx:t}),u.$set(L);const W={};f&1092&&(W.$$scope={dirty:f,ctx:t}),T.$set(W);const M={};f&1092&&(M.$$scope={dirty:f,ctx:t}),j.$set(M);const X={};f&1092&&(X.$$scope={dirty:f,ctx:t}),D.$set(X);const Y={};f&32&&(Y.loading=t[5]),I.$set(Y)},i(t){F||(v(e.$$.fragment,t),v(s.$$.fragment,t),v(n.$$.fragment,t),v($.$$.fragment,t),v(h.$$.fragment,t),v(u.$$.fragment,t),v(T.$$.fragment,t),v(j.$$.fragment,t),v(D.$$.fragment,t),v(I.$$.fragment,t),F=!0)},o(t){g(e.$$.fragment,t),g(s.$$.fragment,t),g(n.$$.fragment,t),g($.$$.fragment,t),g(h.$$.fragment,t),g(u.$$.fragment,t),g(T.$$.fragment,t),g(j.$$.fragment,t),g(D.$$.fragment,t),g(I.$$.fragment,t),F=!1},d(t){z(e,t),t&&m(a),z(s,t),t&&m(l),z(n,t),t&&m(i),z($,t),t&&m(c),z(h,t),t&&m(p),z(u,t),t&&m(d),z(T,t),t&&m(y),z(j,t),t&&m(B),z(D,t),t&&m(E),z(I,t)}}}function Pe(r){let e,a;return e=new ue({props:{class:"flex flex-col gap-y-4",action:"/api/device/"+r[1],onSubmit:r[3],$$slots:{default:[ze,({loading:s})=>({5:s}),({loading:s})=>s?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},l(s){w(e.$$.fragment,s)},m(s,l){k(e,s,l),a=!0},p(s,[l]){const n={};l&2&&(n.action="/api/device/"+s[1]),l&1063&&(n.$$scope={dirty:l,ctx:s}),e.$set(n)},i(s){a||(v(e.$$.fragment,s),a=!0)},o(s){g(e.$$.fragment,s),a=!1},d(s){z(e,s)}}}const ye=oe();function Ne(r,e,a){var c;let s,{devices:l}=e,n=(c=l[0])==null?void 0:c.serial;async function i(h,p){const u=await fetch(p.toString(),{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:ce(h)});console.log(await u.json())}function $(){n=ee(this),a(1,n)}return r.$$set=h=>{"devices"in h&&a(0,l=h.devices)},r.$$.update=()=>{r.$$.dirty&3&&a(2,s=l.find(h=>h.serial===n))},[l,n,s,i,$]}class Be extends V{constructor(e){super();Z(this,e,Ne,Pe,x,{devices:0})}}export{Be as default,ye as load};
