import{S as D,i as H,s as L,w as d,x as g,y as h,q as v,o as b,B as E,R as q,k as O,m as I,g as _,d as u,e as w,c as C,a as k,b as c,E as V,ad as A,t as S,h as z,M as T}from"../../chunks/index-36754a35.js";import{R as y,D as K}from"../../chunks/DeviceOptions-0a96ff24.js";import{H as P}from"../../chunks/HorizontalField-ace97908.js";import{V as M}from"../../chunks/VerticalField-905a4fdf.js";import{F as U}from"../../chunks/Form-7b6d1322.js";import{g as X,s as j,a as G}from"../../chunks/__layout-fb12489c.js";import"../../chunks/Label-a93f63a8.js";import"../../chunks/snackbar-host-48cbce91.js";import"../../chunks/web-9961d8d9.js";import"../../chunks/index-2d3b577e.js";import"../../chunks/TopBar-b37596c0.js";function J(l){let e,o;return{c(){e=w("textarea"),this.h()},l(s){e=C(s,"TEXTAREA",{class:!0,id:!0,name:!0,rows:!0,placeholder:!0}),k(e).forEach(u),this.h()},h(){c(e,"class",o=l[6]),e.required=!0,c(e,"id","control-text"),c(e,"name","text"),c(e,"rows","10"),c(e,"placeholder"," Apple \r Banana \r Carrot")},m(s,r){_(s,e,r)},p(s,r){r&64&&o!==(o=s[6])&&c(e,"class",o)},d(s){s&&u(e)}}}function Q(l){let e;return{c(){e=w("input"),this.h()},l(o){e=C(o,"INPUT",{id:!0,name:!0,type:!0}),this.h()},h(){c(e,"id","control-color"),c(e,"name","backgroundColor"),c(e,"type","color"),e.value="#ffffff"},m(o,s){_(o,e,s)},p:V,d(o){o&&u(e)}}}function W(l){let e,o,s,r;return o=new K({props:{devices:l[1]}}),{c(){e=w("select"),d(o.$$.fragment),this.h()},l(a){e=C(a,"SELECT",{name:!0,id:!0,class:!0});var n=k(e);g(o.$$.fragment,n),n.forEach(u),this.h()},h(){e.multiple=!0,c(e,"name","device"),c(e,"id","control-serial"),c(e,"class",s=l[6])},m(a,n){_(a,e,n),h(o,e,null),A(e,l[0]),r=!0},p(a,n){const f={};n&2&&(f.devices=a[1]),o.$set(f),(!r||n&64&&s!==(s=a[6]))&&c(e,"class",s),(!r||n&1)&&A(e,a[0])},i(a){r||(v(o.$$.fragment,a),r=!0)},o(a){b(o.$$.fragment,a),r=!1},d(a){a&&u(e),E(o)}}}function Y(l){let e,o,s,r,a,n,f,m;return{c(){e=w("select"),o=w("option"),s=S("Ignore"),r=w("option"),a=S("Blank"),n=w("option"),f=S("Off"),this.h()},l($){e=C($,"SELECT",{id:!0,name:!0,class:!0});var p=k(e);o=C(p,"OPTION",{});var t=k(o);s=z(t,"Ignore"),t.forEach(u),r=C(p,"OPTION",{});var i=k(r);a=z(i,"Blank"),i.forEach(u),n=C(p,"OPTION",{});var x=k(n);f=z(x,"Off"),x.forEach(u),p.forEach(u),this.h()},h(){o.__value="ignore",o.value=o.__value,r.__value="blank",r.value=r.__value,n.__value="off",n.value=n.__value,c(e,"id","control-rest"),c(e,"name","rest"),c(e,"class",m=l[6])},m($,p){_($,e,p),T(e,o),T(o,s),T(e,r),T(r,a),T(e,n),T(n,f)},p($,p){p&64&&m!==(m=$[6])&&c(e,"class",m)},d($){$&&u(e)}}}function Z(l){let e,o,s,r,a,n,f,m,$,p;return e=new M({props:{for:"control-text",label:"Text",$$slots:{default:[J,({inputClassName:t})=>({6:t}),({inputClassName:t})=>t?64:0]},$$scope:{ctx:l}}}),s=new P({props:{for:"control-color",label:"Background Color",$$slots:{default:[Q]},$$scope:{ctx:l}}}),a=new P({props:{for:"control-serial",label:"Devices",$$slots:{default:[W,({inputClassName:t})=>({6:t}),({inputClassName:t})=>t?64:0]},$$scope:{ctx:l}}}),f=new P({props:{for:"control-rest",label:"Remaining Cells",$$slots:{default:[Y,({inputClassName:t})=>({6:t}),({inputClassName:t})=>t?64:0]},$$scope:{ctx:l}}}),$=new y({props:{loading:l[5]}}),{c(){d(e.$$.fragment),o=O(),d(s.$$.fragment),r=O(),d(a.$$.fragment),n=O(),d(f.$$.fragment),m=O(),d($.$$.fragment)},l(t){g(e.$$.fragment,t),o=I(t),g(s.$$.fragment,t),r=I(t),g(a.$$.fragment,t),n=I(t),g(f.$$.fragment,t),m=I(t),g($.$$.fragment,t)},m(t,i){h(e,t,i),_(t,o,i),h(s,t,i),_(t,r,i),h(a,t,i),_(t,n,i),h(f,t,i),_(t,m,i),h($,t,i),p=!0},p(t,i){const x={};i&192&&(x.$$scope={dirty:i,ctx:t}),e.$set(x);const R={};i&128&&(R.$$scope={dirty:i,ctx:t}),s.$set(R);const B={};i&195&&(B.$$scope={dirty:i,ctx:t}),a.$set(B);const F={};i&192&&(F.$$scope={dirty:i,ctx:t}),f.$set(F);const N={};i&32&&(N.loading=t[5]),$.$set(N)},i(t){p||(v(e.$$.fragment,t),v(s.$$.fragment,t),v(a.$$.fragment,t),v(f.$$.fragment,t),v($.$$.fragment,t),p=!0)},o(t){b(e.$$.fragment,t),b(s.$$.fragment,t),b(a.$$.fragment,t),b(f.$$.fragment,t),b($.$$.fragment,t),p=!1},d(t){E(e,t),t&&u(o),E(s,t),t&&u(r),E(a,t),t&&u(n),E(f,t),t&&u(m),E($,t)}}}function ee(l){let e,o;return e=new U({props:{class:"flex flex-col gap-y-4",action:"/api/action/text",onSubmit:te,$$slots:{default:[Z,({loading:s})=>({5:s}),({loading:s})=>s?32:0]},$$scope:{ctx:l}}}),{c(){d(e.$$.fragment)},l(s){g(e.$$.fragment,s)},m(s,r){h(e,s,r),o=!0},p(s,[r]){const a={};r&163&&(a.$$scope={dirty:r,ctx:s}),e.$set(a)},i(s){o||(v(e.$$.fragment,s),o=!0)},o(s){b(e.$$.fragment,s),o=!1},d(s){E(e,s)}}}const pe=!0;async function te(l,e){const o=l.get("backgroundColor");o!=="#ffffff"&&e.searchParams.set("backgroundColor",o),e.searchParams.set("rest",l.get("rest"));try{const s=await fetch(e.toString(),{method:"post",headers:{"content-type":"text/plain"},body:l.get("text")});if(!s.ok)throw new Error(s.statusText)}catch(s){throw console.error(s),s}}function se(l,e,o){let s,r;const{state:a}=X(),n=j(a);q(l,n,m=>o(1,r=m));const f=G(a);return q(l,f,m=>o(0,s=m)),[s,r,n,f]}class _e extends D{constructor(e){super(),H(this,e,se,ee,L,{})}}export{_e as default,pe as prerender};
