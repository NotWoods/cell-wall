import{S as A,i as B,s as D,w as u,x as p,y as d,q as _,o as g,B as h,L as z,k as v,m as w,g as b,d as $,e as x,c as C,a as q,b as c,ae as F}from"../../chunks/vendor-75710b0b.js";import{R as I}from"../../chunks/ResetSubmit-0b95bdf5.js";import{D as y}from"../../chunks/DeviceOptions-bb52aced.js";import{H as R}from"../../chunks/HorizontalField-b164da6e.js";import{V as H}from"../../chunks/VerticalField-6d675f87.js";import{F as L}from"../../chunks/SubmitButton-c2efd1a2.js";import{a as P,s as V,b as K}from"../../chunks/__layout-9fa4247b.js";import"../../chunks/LoadingSpinner-2691eeec.js";import"../../chunks/snackbar-host-c0618c11.js";import"../../chunks/cell-state-schema-de0c81a8.js";import"../../chunks/TopBar-c7a17b61.js";function N(n){let e,s;return{c(){e=x("textarea"),this.h()},l(t){e=C(t,"TEXTAREA",{class:!0,id:!0,name:!0,rows:!0,placeholder:!0}),q(e).forEach($),this.h()},h(){c(e,"class",s=n[6]),e.required=!0,c(e,"id","control-text"),c(e,"name","text"),c(e,"rows","10"),c(e,"placeholder"," Apple \r Banana \r Carrot")},m(t,a){b(t,e,a)},p(t,a){a&64&&s!==(s=t[6])&&c(e,"class",s)},d(t){t&&$(e)}}}function O(n){let e;return{c(){e=x("input"),this.h()},l(s){e=C(s,"INPUT",{id:!0,name:!0,type:!0}),this.h()},h(){c(e,"id","control-color"),c(e,"name","backgroundColor"),c(e,"type","color"),e.value="#ffffff"},m(s,t){b(s,e,t)},d(s){s&&$(e)}}}function U(n){let e,s,t,a;return s=new y({props:{devices:n[1]}}),{c(){e=x("select"),u(s.$$.fragment),this.h()},l(o){e=C(o,"SELECT",{name:!0,id:!0,class:!0});var l=q(e);p(s.$$.fragment,l),l.forEach($),this.h()},h(){e.multiple=!0,c(e,"name","device"),c(e,"id","control-serial"),c(e,"class",t=n[6])},m(o,l){b(o,e,l),d(s,e,null),F(e,n[0]),a=!0},p(o,l){const f={};l&2&&(f.devices=o[1]),s.$set(f),(!a||l&64&&t!==(t=o[6]))&&c(e,"class",t),(!a||l&1)&&F(e,o[0])},i(o){a||(_(s.$$.fragment,o),a=!0)},o(o){g(s.$$.fragment,o),a=!1},d(o){o&&$(e),h(s)}}}function X(n){let e,s,t,a,o,l,f,m;return e=new H({props:{for:"control-text",label:"Text",$$slots:{default:[N,({inputClassName:r})=>({6:r}),({inputClassName:r})=>r?64:0]},$$scope:{ctx:n}}}),t=new R({props:{for:"control-color",label:"Background Color",$$slots:{default:[O]},$$scope:{ctx:n}}}),o=new R({props:{for:"control-serial",label:"Devices",$$slots:{default:[U,({inputClassName:r})=>({6:r}),({inputClassName:r})=>r?64:0]},$$scope:{ctx:n}}}),f=new I({props:{loading:n[5]}}),{c(){u(e.$$.fragment),s=v(),u(t.$$.fragment),a=v(),u(o.$$.fragment),l=v(),u(f.$$.fragment)},l(r){p(e.$$.fragment,r),s=w(r),p(t.$$.fragment,r),a=w(r),p(o.$$.fragment,r),l=w(r),p(f.$$.fragment,r)},m(r,i){d(e,r,i),b(r,s,i),d(t,r,i),b(r,a,i),d(o,r,i),b(r,l,i),d(f,r,i),m=!0},p(r,i){const E={};i&192&&(E.$$scope={dirty:i,ctx:r}),e.$set(E);const k={};i&128&&(k.$$scope={dirty:i,ctx:r}),t.$set(k);const S={};i&195&&(S.$$scope={dirty:i,ctx:r}),o.$set(S);const T={};i&32&&(T.loading=r[5]),f.$set(T)},i(r){m||(_(e.$$.fragment,r),_(t.$$.fragment,r),_(o.$$.fragment,r),_(f.$$.fragment,r),m=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),g(o.$$.fragment,r),g(f.$$.fragment,r),m=!1},d(r){h(e,r),r&&$(s),h(t,r),r&&$(a),h(o,r),r&&$(l),h(f,r)}}}function j(n){let e,s;return e=new L({props:{class:"flex flex-col gap-y-4",action:"/api/action/text",onSubmit:G,$$slots:{default:[X,({loading:t})=>({5:t}),({loading:t})=>t?32:0]},$$scope:{ctx:n}}}),{c(){u(e.$$.fragment)},l(t){p(e.$$.fragment,t)},m(t,a){d(e,t,a),s=!0},p(t,[a]){const o={};a&163&&(o.$$scope={dirty:a,ctx:t}),e.$set(o)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){h(e,t)}}}const ne=!0;async function G(n,e){const s=n.get("backgroundColor");s!=="#ffffff"&&e.searchParams.set("backgroundColor",s);try{const t=await fetch(e.toString(),{method:"post",headers:{"content-type":"text/plain"},body:n.get("text")});if(!t.ok)throw new Error(t.statusText)}catch(t){throw console.error(t),t}}function J(n,e,s){let t,a;const{state:o}=P(),l=V(o);z(n,l,m=>s(1,a=m));const f=K(o);return z(n,f,m=>s(0,t=m)),[t,a,l,f]}class le extends A{constructor(e){super();B(this,e,J,j,D,{})}}export{le as default,ne as prerender};
