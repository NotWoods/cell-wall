var he=Object.defineProperty,de=Object.defineProperties;var $e=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var ge=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable;var V=(o,e,t)=>e in o?he(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,X=(o,e)=>{for(var t in e||(e={}))ge.call(e,t)&&V(o,t,e[t]);if(J)for(var t of J(e))be.call(e,t)&&V(o,t,e[t]);return o},Y=(o,e)=>de(o,$e(e));import{S as F,i as I,s as N,F as ae,e as y,c as T,a as C,d as m,b as _,g,G as ie,H as fe,I as ue,q as h,o as $,l as S,w as b,x as v,y as k,B as w,n as z,a6 as ce,a7 as _e,p as B,a8 as R,k as O,m as D,t as U,h as j,J as P,j as pe,a9 as ve,Y as E,O as me,a5 as ke,L as Q,aa as we,K as ye,ab as Te,a2 as Ee,ac as Ce,P as Se,ad as Z}from"../../chunks/vendor-75710b0b.js";import{R as Ae}from"../../chunks/ResetSubmit-033ddad8.js";import{D as Ne}from"../../chunks/DeviceOptions-bb52aced.js";import{H}from"../../chunks/HorizontalField-b164da6e.js";import{F as Oe}from"../../chunks/SubmitButton-fc79d27b.js";import{a as De,s as Fe}from"../../chunks/__layout-0e029e9f.js";import{g as W,a as M}from"../../chunks/cell-state-schema-b294815b.js";import{P as Ie}from"../../chunks/_PowerButtons-93ed9434.js";import{p as Le}from"../../chunks/_form-52443b97.js";import"../../chunks/LoadingSpinner-2691eeec.js";import"../../chunks/snackbar-host-898281c9.js";import"../../chunks/TopBar-c7a17b61.js";const qe=["#0F172A","#7F1D1D","#7C2D12","#78350F","#713F12","#365314","#14532D","#064E3B","#134E4A","#164E63","#0C4A6E","#1E3A8A","#312E81","#4C1D95","#581C87","#701A75","#831843","#881337"];class ze{constructor(e=qe){if(this.colors=e,e.length===0)throw new TypeError("No colors provided");this.reset()}reset(){this.unusedColors=this.colors.slice()}next(){const e=Math.floor(Math.random()*this.unusedColors.length),t=this.unusedColors[e];return this.unusedColors.splice(e,1),this.unusedColors.length===0&&this.reset(),t}}function Be(o){let e,t;const r=o[1].default,i=ae(r,o,o[0],null);return{c(){e=y("ul"),i&&i.c(),this.h()},l(n){e=T(n,"UL",{class:!0,role:!0});var a=C(e);i&&i.l(a),a.forEach(m),this.h()},h(){_(e,"class","flex flex-wrap border-b-2 border-slate-700"),_(e,"role","tablist")},m(n,a){g(n,e,a),i&&i.m(e,null),t=!0},p(n,[a]){i&&i.p&&(!t||a&1)&&ie(i,r,n,n[0],t?ue(r,n[0],a,null):fe(n[0]),null)},i(n){t||(h(i,n),t=!0)},o(n){$(i,n),t=!1},d(n){n&&m(e),i&&i.d(n)}}}function Pe(o,e,t){let{$$slots:r={},$$scope:i}=e;return o.$$set=n=>{"$$scope"in n&&t(0,i=n.$$scope)},[i,r]}class Re extends F{constructor(e){super();I(this,e,Pe,Be,N,{})}}function x(o,e,t){const r=o.slice();return r[6]=e[t].name,r[7]=e[t].type,r[8]=e[t].property,r[9]=e[t].fallback,r}function ee(o,e,t){const r=o.slice();return r[13]=e[t],r}function Me(o){let e,t,r,i,n,a,l;return{c(){e=y("input"),this.h()},l(s){e=T(s,"INPUT",{id:!0,class:!0,name:!0,type:!0}),this.h()},h(){var s,f;_(e,"id",t="control-"+o[6]),_(e,"class",r=o[7]==="color"?"":o[12]),_(e,"name",i=o[6]),_(e,"type",n=o[7]),e.required=a=o[2].has(o[6]),e.value=l=(f=(s=o[0])==null?void 0:s[o[6]])!=null?f:o[9]},m(s,f){g(s,e,f)},p(s,f){var c,d;f&2&&t!==(t="control-"+s[6])&&_(e,"id",t),f&4098&&r!==(r=s[7]==="color"?"":s[12])&&_(e,"class",r),f&2&&i!==(i=s[6])&&_(e,"name",i),f&2&&n!==(n=s[7])&&_(e,"type",n),f&6&&a!==(a=s[2].has(s[6]))&&(e.required=a),f&3&&l!==(l=(d=(c=s[0])==null?void 0:c[s[6]])!=null?d:s[9])&&e.value!==l&&(e.value=l)},d(s){s&&m(e)}}}function Ue(o){let e,t,r,i,n=o[8].enum,a=[];for(let l=0;l<n.length;l+=1)a[l]=te(ee(o,n,l));return{c(){e=y("select");for(let l=0;l<a.length;l+=1)a[l].c();this.h()},l(l){e=T(l,"SELECT",{id:!0,name:!0,class:!0});var s=C(e);for(let f=0;f<a.length;f+=1)a[f].l(s);s.forEach(m),this.h()},h(){_(e,"id",t="control-"+o[6]),_(e,"name",r=o[6]),_(e,"class",i=o[12])},m(l,s){g(l,e,s);for(let f=0;f<a.length;f+=1)a[f].m(e,null)},p(l,s){if(s&2){n=l[8].enum;let f;for(f=0;f<n.length;f+=1){const c=ee(l,n,f);a[f]?a[f].p(c,s):(a[f]=te(c),a[f].c(),a[f].m(e,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=n.length}s&2&&t!==(t="control-"+l[6])&&_(e,"id",t),s&2&&r!==(r=l[6])&&_(e,"name",r),s&4096&&i!==(i=l[12])&&_(e,"class",i)},d(l){l&&m(e),ve(a,l)}}}function te(o){let e,t=o[13]+"",r,i;return{c(){e=y("option"),r=U(t),this.h()},l(n){e=T(n,"OPTION",{});var a=C(e);r=j(a,t),a.forEach(m),this.h()},h(){e.__value=i=o[13],e.value=e.__value},m(n,a){g(n,e,a),P(e,r)},p(n,a){a&2&&t!==(t=n[13]+"")&&pe(r,t),a&2&&i!==(i=n[13])&&(e.__value=i,e.value=e.__value)},d(n){n&&m(e)}}}function je(o){let e,t;function r(a,l){return l&2&&(e=null),e==null&&(e=!!Array.isArray(a[8].enum)),e?Ue:Me}let i=r(o,-1),n=i(o);return{c(){n.c(),t=O()},l(a){n.l(a),t=D(a)},m(a,l){n.m(a,l),g(a,t,l)},p(a,l){i===(i=r(a,l))&&n?n.p(a,l):(n.d(1),n=i(a),n&&(n.c(),n.m(t.parentNode,t)))},d(a){n.d(a),a&&m(t)}}}function le(o,e){let t,r,i;return r=new H({props:{for:"control-"+e[6],label:e[3](e[6]),$$slots:{default:[je,({inputClassName:n})=>({12:n}),({inputClassName:n})=>n?4096:0]},$$scope:{ctx:e}}}),{key:o,first:null,c(){t=S(),b(r.$$.fragment),this.h()},l(n){t=S(),v(r.$$.fragment,n),this.h()},h(){this.first=t},m(n,a){g(n,t,a),k(r,n,a),i=!0},p(n,a){e=n;const l={};a&2&&(l.for="control-"+e[6]),a&10&&(l.label=e[3](e[6])),a&69639&&(l.$$scope={dirty:a,ctx:e}),r.$set(l)},i(n){i||(h(r.$$.fragment,n),i=!0)},o(n){$(r.$$.fragment,n),i=!1},d(n){n&&m(t),w(r,n)}}}function He(o){let e=[],t=new Map,r,i,n=o[1];const a=l=>l[6];for(let l=0;l<n.length;l+=1){let s=x(o,n,l),f=a(s);t.set(f,e[l]=le(f,s))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();r=S()},l(l){for(let s=0;s<e.length;s+=1)e[s].l(l);r=S()},m(l,s){for(let f=0;f<e.length;f+=1)e[f].m(l,s);g(l,r,s),i=!0},p(l,[s]){s&4111&&(n=l[1],z(),e=ce(e,s,a,1,l,n,t,r.parentNode,_e,le,r,x),B())},i(l){if(!i){for(let s=0;s<n.length;s+=1)h(e[s]);i=!0}},o(l){for(let s=0;s<e.length;s+=1)$(e[s]);i=!1},d(l){for(let s=0;s<e.length;s+=1)e[s].d(l);l&&m(r)}}}function We(o,e){if(Array.isArray(e.enum))return"select";if(o.endsWith("Color"))return"color";if(e.format==="uri")return"url";switch(e.type){case"number":return"number";default:return"text"}}function Ge(o,e,t){let r,i,n;const a=new ze;let{schema:l}=e,{state:s=void 0}=e;return o.$$set=f=>{"schema"in f&&t(4,l=f.schema),"state"in f&&t(0,s=f.state)},o.$$.update=()=>{o.$$.dirty&16&&t(3,r=f=>{var c,d,A;if(f==="payload")switch((A=(d=(c=l==null?void 0:l.properties)==null?void 0:c.type)==null?void 0:d.enum)==null?void 0:A[0]){case"WEB":return"URL";case"IMAGE":return"Source";case"TEXT":return"Text";default:return R(f)}return R(f)}),o.$$.dirty&16&&t(2,i=new Set((l==null?void 0:l.required)||[])),o.$$.dirty&16&&t(1,n=Object.entries((l==null?void 0:l.properties)||{}).filter(([f])=>f!=="type").map(([f,c])=>{const d=We(f,c);return{name:f,property:c,type:d,fallback:d==="color"?a.next():""}}))},[s,n,i,r,l]}class Ke extends F{constructor(e){super();I(this,e,Ge,He,N,{schema:4,state:0})}}function Je(o){let e,t,r,i,n;const a=o[3].default,l=ae(a,o,o[2],null);return{c(){e=y("li"),t=y("button"),l&&l.c(),this.h()},l(s){e=T(s,"LI",{class:!0});var f=C(e);t=T(f,"BUTTON",{type:!0,class:!0,role:!0,"aria-selected":!0,"aria-controls":!0});var c=C(t);l&&l.l(c),c.forEach(m),f.forEach(m),this.h()},h(){_(t,"type","button"),_(t,"class","border-b-2 -mb-[2px] px-4 py-2 transition-colors"),_(t,"role","tab"),_(t,"aria-selected",o[0]),_(t,"aria-controls",o[1]),E(t,"text-green-400",o[0]),E(t,"border-current",o[0]),E(t,"border-transparent",!o[0]),E(t,"hover:border-white",!o[0]),_(e,"class","inline-block")},m(s,f){g(s,e,f),P(e,t),l&&l.m(t,null),r=!0,i||(n=me(t,"click",o[4]),i=!0)},p(s,[f]){l&&l.p&&(!r||f&4)&&ie(l,a,s,s[2],r?ue(a,s[2],f,null):fe(s[2]),null),(!r||f&1)&&_(t,"aria-selected",s[0]),(!r||f&2)&&_(t,"aria-controls",s[1]),f&1&&E(t,"text-green-400",s[0]),f&1&&E(t,"border-current",s[0]),f&1&&E(t,"border-transparent",!s[0]),f&1&&E(t,"hover:border-white",!s[0])},i(s){r||(h(l,s),r=!0)},o(s){$(l,s),r=!1},d(s){s&&m(e),l&&l.d(s),i=!1,n()}}}function Ve(o,e,t){let{$$slots:r={},$$scope:i}=e,{selected:n=!1}=e,{controls:a}=e;function l(s){ke.call(this,o,s)}return o.$$set=s=>{"selected"in s&&t(0,n=s.selected),"controls"in s&&t(1,a=s.controls),"$$scope"in s&&t(2,i=s.$$scope)},[n,a,i,r,l]}class Xe extends F{constructor(e){super();I(this,e,Ve,Je,N,{selected:0,controls:1})}}function Ye(o){let e;return{c(){e=U(o[2])},l(t){e=j(t,o[2])},m(t,r){g(t,e,r)},p(t,r){r&4&&pe(e,t[2])},d(t){t&&m(e)}}}function Qe(o){let e,t;return e=new Xe({props:{selected:o[1]===o[0],controls:"custom-form",$$slots:{default:[Ye]},$$scope:{ctx:o}}}),e.$on("click",o[4]),{c(){b(e.$$.fragment)},l(r){v(e.$$.fragment,r)},m(r,i){k(e,r,i),t=!0},p(r,[i]){const n={};i&3&&(n.selected=r[1]===r[0]),i&36&&(n.$$scope={dirty:i,ctx:r}),e.$set(n)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){$(e.$$.fragment,r),t=!1},d(r){w(e,r)}}}function Ze(o,e,t){let r,i,{selectedType:n}=e,{schema:a}=e;const l=()=>{t(0,n=r)};return o.$$set=s=>{"selectedType"in s&&t(0,n=s.selectedType),"schema"in s&&t(3,a=s.schema)},o.$$.update=()=>{o.$$.dirty&8&&t(1,r=W(a)),o.$$.dirty&2&&t(2,i=R(r.toLocaleLowerCase()))},[n,r,i,a,l]}class xe extends F{constructor(e){super();I(this,e,Ze,Qe,N,{selectedType:0,schema:3})}}function se(o,e,t){const r=o.slice();return r[13]=e[t],r}function re(o,e){let t,r,i,n;function a(s){e[9](s)}let l={schema:e[13]};return e[0]!==void 0&&(l.selectedType=e[0]),r=new xe({props:l}),Ee.push(()=>Ce(r,"selectedType",a)),{key:o,first:null,c(){t=S(),b(r.$$.fragment),this.h()},l(s){t=S(),v(r.$$.fragment,s),this.h()},h(){this.first=t},m(s,f){g(s,t,f),k(r,s,f),n=!0},p(s,f){e=s;const c={};!i&&f&1&&(i=!0,c.selectedType=e[0],we(()=>i=!1)),r.$set(c)},i(s){n||(h(r.$$.fragment,s),n=!0)},o(s){$(r.$$.fragment,s),n=!1},d(s){s&&m(t),w(r,s)}}}function et(o){let e=[],t=new Map,r,i,n=M;const a=l=>W(l[13]);for(let l=0;l<n.length;l+=1){let s=se(o,n,l),f=a(s);t.set(f,e[l]=re(f,s))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();r=S()},l(l){for(let s=0;s<e.length;s+=1)e[s].l(l);r=S()},m(l,s){for(let f=0;f<e.length;f+=1)e[f].m(l,s);g(l,r,s),i=!0},p(l,s){s&1&&(n=M,z(),e=ce(e,s,a,1,l,n,t,r.parentNode,_e,re,r,se),B())},i(l){if(!i){for(let s=0;s<n.length;s+=1)h(e[s]);i=!0}},o(l){for(let s=0;s<e.length;s+=1)$(e[s]);i=!1},d(l){for(let s=0;s<e.length;s+=1)e[s].d(l);l&&m(r)}}}function tt(o){let e,t,r,i,n,a,l,s;return i=new Ne({props:{devices:o[4]}}),{c(){e=y("select"),t=y("option"),r=U("All devices"),b(i.$$.fragment),this.h()},l(f){e=T(f,"SELECT",{class:!0,id:!0});var c=C(e);t=T(c,"OPTION",{});var d=C(t);r=j(d,"All devices"),d.forEach(m),v(i.$$.fragment,c),c.forEach(m),this.h()},h(){t.__value="",t.value=t.__value,_(e,"class",n=o[12]+" cursor-pointer"),_(e,"id","control-serial"),o[1]===void 0&&Se(()=>o[10].call(e))},m(f,c){g(f,e,c),P(e,t),P(t,r),k(i,e,null),Z(e,o[1]),a=!0,l||(s=me(e,"change",o[10]),l=!0)},p(f,c){const d={};c&16&&(d.devices=f[4]),i.$set(d),(!a||c&4096&&n!==(n=f[12]+" cursor-pointer"))&&_(e,"class",n),c&2&&Z(e,f[1])},i(f){a||(h(i.$$.fragment,f),a=!0)},o(f){$(i.$$.fragment,f),a=!1},d(f){f&&m(e),w(i),l=!1,s()}}}function ne(o){let e,t;return e=new H({props:{label:"Power",$$slots:{default:[lt]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},l(r){v(e.$$.fragment,r)},m(r,i){k(e,r,i),t=!0},p(r,i){const n={};i&65538&&(n.$$scope={dirty:i,ctx:r}),e.$set(n)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){$(e.$$.fragment,r),t=!1},d(r){w(e,r)}}}function lt(o){let e,t;return e=new Ie({props:{serial:o[1]}}),{c(){b(e.$$.fragment)},l(r){v(e.$$.fragment,r)},m(r,i){k(e,r,i),t=!0},p(r,i){const n={};i&2&&(n.serial=r[1]),e.$set(n)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){$(e.$$.fragment,r),t=!1},d(r){w(e,r)}}}function oe(o){var r;let e,t;return e=new Ke({props:{schema:o[2],state:(r=o[3])==null?void 0:r.state}}),{c(){b(e.$$.fragment)},l(i){v(e.$$.fragment,i)},m(i,n){k(e,i,n),t=!0},p(i,n){var l;const a={};n&4&&(a.schema=i[2]),n&8&&(a.state=(l=i[3])==null?void 0:l.state),e.$set(a)},i(i){t||(h(e.$$.fragment,i),t=!0)},o(i){$(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function st(o){var d,A;let e,t,r=!o[3]||((A=(d=o[3])==null?void 0:d.connection)==null?void 0:A.includes("android")),i,n=o[0],a,l,s;e=new H({props:{for:"control-serial",label:"Device",$$slots:{default:[tt,({inputClassName:u})=>({12:u}),({inputClassName:u})=>u?4096:0]},$$scope:{ctx:o}}});let f=r&&ne(o),c=oe(o);return l=new Ae({props:{loading:o[11]}}),{c(){b(e.$$.fragment),t=O(),f&&f.c(),i=O(),c.c(),a=O(),b(l.$$.fragment)},l(u){v(e.$$.fragment,u),t=D(u),f&&f.l(u),i=D(u),c.l(u),a=D(u),v(l.$$.fragment,u)},m(u,p){k(e,u,p),g(u,t,p),f&&f.m(u,p),g(u,i,p),c.m(u,p),g(u,a,p),k(l,u,p),s=!0},p(u,p){var G,K;const L={};p&69650&&(L.$$scope={dirty:p,ctx:u}),e.$set(L),p&8&&(r=!u[3]||((K=(G=u[3])==null?void 0:G.connection)==null?void 0:K.includes("android"))),r?f?(f.p(u,p),p&8&&h(f,1)):(f=ne(u),f.c(),h(f,1),f.m(i.parentNode,i)):f&&(z(),$(f,1,1,()=>{f=null}),B()),p&1&&N(n,n=u[0])?(z(),$(c,1,1,ye),B(),c=oe(u),c.c(),h(c),c.m(a.parentNode,a)):c.p(u,p);const q={};p&2048&&(q.loading=u[11]),l.$set(q)},i(u){s||(h(e.$$.fragment,u),h(f),h(c),h(l.$$.fragment,u),s=!0)},o(u){$(e.$$.fragment,u),$(f),$(c),$(l.$$.fragment,u),s=!1},d(u){w(e,u),u&&m(t),f&&f.d(u),u&&m(i),c.d(u),u&&m(a),w(l,u)}}}function rt(o){let e,t,r,i,n;return t=new Re({props:{$$slots:{default:[et]},$$scope:{ctx:o}}}),i=new Oe({props:{id:"custom-form",class:"flex flex-col gap-y-4 px-2",role:"tabpanel",action:"/api/device/state/"+o[1],onSubmit:o[7],$$slots:{default:[st,({loading:a})=>({11:a}),({loading:a})=>a?2048:0]},$$scope:{ctx:o}}}),{c(){e=y("nav"),b(t.$$.fragment),r=O(),b(i.$$.fragment),this.h()},l(a){e=T(a,"NAV",{class:!0});var l=C(e);v(t.$$.fragment,l),l.forEach(m),r=D(a),v(i.$$.fragment,a),this.h()},h(){_(e,"class","mb-6")},m(a,l){g(a,e,l),k(t,e,null),g(a,r,l),k(i,a,l),n=!0},p(a,[l]){const s={};l&65537&&(s.$$scope={dirty:l,ctx:a}),t.$set(s);const f={};l&2&&(f.action="/api/device/state/"+a[1]),l&67614&&(f.$$scope={dirty:l,ctx:a}),i.$set(f)},i(a){n||(h(t.$$.fragment,a),h(i.$$.fragment,a),n=!0)},o(a){$(t.$$.fragment,a),$(i.$$.fragment,a),n=!1},d(a){a&&m(e),w(t),a&&m(r),w(i,a)}}}function nt(o,e,t){let r,i,n,a;const{state:l}=De();Q(o,l,p=>t(8,n=p));const s=Fe(l);Q(o,s,p=>t(4,a=p));let f="BLANK",c="";async function d(p,L){const q=Object.fromEntries(p);await Le(L.toString(),Y(X({},q),{type:f}))}function A(p){f=p,t(0,f)}function u(){c=Te(this),t(1,c)}return o.$$.update=()=>{o.$$.dirty&258&&t(3,r=n.get(c)),o.$$.dirty&1&&t(2,i=M.find(p=>W(p)===f))},[f,c,i,r,a,l,s,d,n,A,u]}class bt extends F{constructor(e){super();I(this,e,nt,rt,N,{})}}export{bt as default};
