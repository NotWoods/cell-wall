import{S as le,i as ae,s as ne,e as p,c as g,a as b,d,b as y,g as V,K as Y,a2 as re,t as W,k as R,h as L,m as I,J as c,j as B,w as oe,X as ce,x as he,y as fe,a6 as Q,q as de,o as ue,B as _e,L as ve,a7 as Z}from"../../chunks/vendor-98a08ead.js";import{c as me}from"../../chunks/cell-state-schema-a24ecc56.js";import{a as pe}from"../../chunks/__layout-32179090.js";import"../../chunks/TopBar-7466b32b.js";import"../../chunks/snackbar-host-483fec76.js";function H(e){return typeof e=="number"&&!Number.isNaN(e)}function ie(e={}){return H(e.width)&&H(e.height)}function ge(e={}){return H(e.x)&&H(e.y)&&ie(e)}function be(e){let s;return{c(){s=p("canvas"),this.h()},l(t){s=g(t,"CANVAS",{class:!0,height:!0,width:!0}),b(s).forEach(d),this.h()},h(){y(s,"class","fill shadow shadow-green-900 rounded-lg border-8 svelte-nnt7wc"),y(s,"height","700"),y(s,"width","1200")},m(t,l){V(t,s,l),e[4](s)},p:Y,i:Y,o:Y,d(t){t&&d(s),e[4](null)}}}function ke(e,s){if(!e)return 1;const{width:t,height:l}=me(s),r=e.width/t,a=e.height/l;return Math.min(r,a)}function we(e,s,t){if(!!e){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.font="20px sans-serif";for(const l of t){const{x:r,y:a,width:i,height:f}=l;e.fillStyle="#EFEFEF",e.fillRect(r*s,a*s,i*s,f*s),e.fillStyle="#1b5e20",e.fillText(l.deviceName||l.serial,r*s+10,a*s+30,i*s-20)}}}function ye(e,s,t){let l,r,{rects:a=[]}=s,i;function f(u){re[u?"unshift":"push"](()=>{i=u,t(0,i)})}return e.$$set=u=>{"rects"in u&&t(1,a=u.rects)},e.$$.update=()=>{var u;e.$$.dirty&1&&t(3,l=(u=i==null?void 0:i.getContext("2d"))!=null?u:void 0),e.$$.dirty&3&&t(2,r=ke(i,a)),e.$$.dirty&14&&we(l,r,a)},[i,a,r,l,f]}class Ee extends le{constructor(s){super();ae(this,s,ye,be,ne,{rects:1})}}function x(e,s,t){const l=e.slice();return l[3]=s[t],l}function ee(e,s,t){const l=e.slice();return l[3]=s[t],l}function te(e,s){let t,l,r=s[3].serial+"",a,i,f,u=s[3].width+"",E,w,v=s[3].height+"",S,N;return{key:e,first:null,c(){t=p("div"),l=p("dt"),a=W(r),i=R(),f=p("dd"),E=W(u),w=W(" x "),S=W(v),N=R(),this.h()},l(m){t=g(m,"DIV",{});var _=b(t);l=g(_,"DT",{class:!0});var P=b(l);a=L(P,r),P.forEach(d),i=I(_),f=g(_,"DD",{class:!0});var C=b(f);E=L(C,u),w=L(C," x "),S=L(C,v),C.forEach(d),N=I(_),_.forEach(d),this.h()},h(){y(l,"class","svelte-1htb5k2"),y(f,"class","svelte-1htb5k2"),this.first=t},m(m,_){V(m,t,_),c(t,l),c(l,a),c(t,i),c(t,f),c(f,E),c(f,w),c(f,S),c(t,N)},p(m,_){s=m,_&1&&r!==(r=s[3].serial+"")&&B(a,r),_&1&&u!==(u=s[3].width+"")&&B(E,u),_&1&&v!==(v=s[3].height+"")&&B(S,v)},d(m){m&&d(t)}}}function se(e,s){let t,l=s[3].serial+"",r;return{key:e,first:null,c(){t=p("li"),r=W(l),this.h()},l(a){t=g(a,"LI",{class:!0});var i=b(t);r=L(i,l),i.forEach(d),this.h()},h(){y(t,"class","svelte-1htb5k2"),this.first=t},m(a,i){V(a,t,i),c(t,r)},p(a,i){s=a,i&1&&l!==(l=s[3].serial+"")&&B(r,l)},d(a){a&&d(t)}}}function Ce(e){let s,t,l,r,a,i,f,u,E,w,v=[],S=new Map,N,m,_,P,C,T,k=[],j=new Map,$;l=new Ee({props:{rects:e[0].rectWithPos}});let q=e[0].rect;const z=n=>n[3].serial;for(let n=0;n<q.length;n+=1){let o=ee(e,q,n),h=z(o);S.set(h,v[n]=te(h,o))}let A=e[0].rest;const J=n=>n[3].serial;for(let n=0;n<A.length;n+=1){let o=x(e,A,n),h=J(o);j.set(h,k[n]=se(h,o))}return{c(){s=R(),t=p("section"),oe(l.$$.fragment),r=R(),a=p("aside"),i=p("div"),f=p("h2"),u=W("No X/Y"),E=R(),w=p("dl");for(let n=0;n<v.length;n+=1)v[n].c();N=R(),m=p("div"),_=p("h2"),P=W("No width/height"),C=R(),T=p("ul");for(let n=0;n<k.length;n+=1)k[n].c();this.h()},l(n){ce('[data-svelte="svelte-p288z0"]',document.head).forEach(d),s=I(n),t=g(n,"SECTION",{class:!0});var h=b(t);he(l.$$.fragment,h),r=I(h),a=g(h,"ASIDE",{class:!0});var F=b(a);i=g(F,"DIV",{});var M=b(i);f=g(M,"H2",{class:!0});var K=b(f);u=L(K,"No X/Y"),K.forEach(d),E=I(M),w=g(M,"DL",{});var O=b(w);for(let D=0;D<v.length;D+=1)v[D].l(O);O.forEach(d),M.forEach(d),N=I(F),m=g(F,"DIV",{});var X=b(m);_=g(X,"H2",{class:!0});var U=b(_);P=L(U,"No width/height"),U.forEach(d),C=I(X),T=g(X,"UL",{});var G=b(T);for(let D=0;D<k.length;D+=1)k[D].l(G);G.forEach(d),X.forEach(d),F.forEach(d),h.forEach(d),this.h()},h(){document.title="Canvas | CellWall",y(f,"class","font-bold"),y(_,"class","font-bold"),y(a,"class","mt-4 svelte-1htb5k2"),y(t,"class","fill")},m(n,o){V(n,s,o),V(n,t,o),fe(l,t,null),c(t,r),c(t,a),c(a,i),c(i,f),c(f,u),c(i,E),c(i,w);for(let h=0;h<v.length;h+=1)v[h].m(w,null);c(a,N),c(a,m),c(m,_),c(_,P),c(m,C),c(m,T);for(let h=0;h<k.length;h+=1)k[h].m(T,null);$=!0},p(n,[o]){const h={};o&1&&(h.rects=n[0].rectWithPos),l.$set(h),o&1&&(q=n[0].rect,v=Q(v,o,z,1,n,q,S,w,Z,te,null,ee)),o&1&&(A=n[0].rest,k=Q(k,o,J,1,n,A,j,T,Z,se,null,x))},i(n){$||(de(l.$$.fragment,n),$=!0)},o(n){ue(l.$$.fragment,n),$=!1},d(n){n&&d(s),n&&d(t),_e(l);for(let o=0;o<v.length;o+=1)v[o].d();for(let o=0;o<k.length;o+=1)k[o].d()}}}function Se(e){const s=[],t=[],l=[];for(const[r,{info:a}]of e){if(!a){l.push({serial:r});continue}ge(a)?s.push(a):ie(a)?t.push(a):l.push(a)}return{rectWithPos:s,rect:t,rest:l}}function Ne(e,s,t){let l,r;const{state:a}=pe();return ve(e,a,i=>t(2,r=i)),e.$$.update=()=>{e.$$.dirty&4&&t(0,l=Se(r))},[l,a,r]}class Pe extends le{constructor(s){super();ae(this,s,Ne,Ce,ne,{})}}export{Pe as default};
