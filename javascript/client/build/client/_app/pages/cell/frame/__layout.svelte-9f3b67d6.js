import{W as E,S as b,i as k,s as S,F as z,M as p,N as d,a as v,d as _,b as u,g as m,J as L,k as g,l as y,X as M,m as w,G as q,H as D,I as A,q as B,o as F,L as I,v as N,r as j}from"../../../chunks/vendor-7aa287fa.js";import{c as x,a as G,s as H,f as J,g as P}from"../../../chunks/state-socket-a939541a.js";import"../../../chunks/singletons-d1fb5791.js";import"../../../chunks/cell-state-schema-a24ecc56.js";function C(o){let t,a,n;return{c(){t=p("svg"),a=p("path"),this.h()},l(l){t=d(l,"svg",{class:!0,xmlns:!0,viewBox:!0,height:!0,width:!0,fill:!0,stroke:!0});var f=v(t);a=d(f,"path",{d:!0}),v(a).forEach(_),f.forEach(_),this.h()},h(){u(a,"d","M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"),u(t,"class","socket-error svelte-oss7oo"),u(t,"xmlns","http://www.w3.org/2000/svg"),u(t,"viewBox","0 0 24 24"),u(t,"height","24px"),u(t,"width","24px"),u(t,"fill",n=o[0]==="error"?"#DC2626":"#EA580C"),u(t,"stroke","#fff")},m(l,f){m(l,t,f),L(t,a)},p(l,f){f&1&&n!==(n=l[0]==="error"?"#DC2626":"#EA580C")&&u(t,"fill",n)},d(l){l&&_(t)}}}function R(o){let t,a,n,l;const f=o[6].default,i=z(f,o,o[5],null);let s=o[0]!=="open"&&C(o);return{c(){t=g(),i&&i.c(),a=g(),s&&s.c(),n=y(),this.h()},l(e){M('[data-svelte="svelte-al2hjo"]',document.head).forEach(_),t=w(e),i&&i.l(e),a=w(e),s&&s.l(e),n=y(),this.h()},h(){document.title="Cell"},m(e,r){m(e,t,r),i&&i.m(e,r),m(e,a,r),s&&s.m(e,r),m(e,n,r),l=!0},p(e,[r]){i&&i.p&&(!l||r&32)&&q(i,f,e,e[5],l?A(f,e[5],r,null):D(e[5]),null),e[0]!=="open"?s?s.p(e,r):(s=C(e),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i(e){l||(B(i,e),l=!0)},o(e){F(i,e),l=!1},d(e){e&&_(t),i&&i.d(e),e&&_(a),s&&s.d(e),e&&_(n)}}}function Q(){return E("frame")}const T=async({url:o})=>{const t=o.searchParams.get("id");return t?{props:{serial:t}}:{status:400,error:new Error("Missing ID")}};function U(o,t,a){let n,l,{$$slots:f={},$$scope:i}=t,{serial:s}=t,e="open";const r=x(s),h=G(r);return I(o,h,c=>a(4,l=c)),N(()=>{H(r)}),j("frame",{socket:r,state:h}),r==null||r.addEventListener("error",()=>{a(0,e="error")}),r==null||r.addEventListener("close",()=>{a(0,e="close")}),o.$$set=c=>{"serial"in c&&a(2,s=c.serial),"$$scope"in c&&a(5,i=c.$$scope)},o.$$.update=()=>{o.$$.dirty&20&&a(3,n=J(l.type,s)),o.$$.dirty&8&&P(n,{replaceState:!0})},[e,h,s,n,l,i,f]}class V extends b{constructor(t){super();k(this,t,U,R,S,{serial:2})}}export{V as default,Q as getFrameContext,T as load};
