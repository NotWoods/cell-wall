import{S as g,i as b,s as $,O as w,P as C,a as h,d as u,b as _,g as m,M as N,l as y,E as v,F as O,I as z,e as L,c as M,J as P,K as T,L as A,q as d,Q as R,R as U,o as p,T as J,U as Q,w as B,x as V,y as j,B as F,k as E,N as G,m as S,p as H,V as W,v as X,r as Y,n as Z}from"../../../chunks/index-6bece970.js";import{c as x,a as ee,s as te,f as se,g as re}from"../../../chunks/state-socket-92adeb5a.js";import{r as ne}from"../../../chunks/index-2a0b6ee6.js";import{q as oe,f as ae}from"../../../chunks/index-82b3cc87.js";import"../../../chunks/web-75f832b0.js";import{r as le}from"../../../chunks/random-ca7fbb84.js";import"../../../chunks/singletons-d1fb5791.js";function I(n){let e,s,t;return{c(){e=w("svg"),s=w("path"),this.h()},l(r){e=C(r,"svg",{class:!0,xmlns:!0,viewBox:!0,height:!0,width:!0,fill:!0,stroke:!0});var a=h(e);s=C(a,"path",{d:!0}),h(s).forEach(u),a.forEach(u),this.h()},h(){_(s,"d","M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"),_(e,"class","socket-error svelte-oss7oo"),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"viewBox","0 0 24 24"),_(e,"height","24px"),_(e,"width","24px"),_(e,"fill",t=n[1]==="error"?"#DC2626":"#EA580C"),_(e,"stroke","#fff")},m(r,a){m(r,e,a),N(e,s)},p(r,a){a&2&&t!==(t=r[1]==="error"?"#DC2626":"#EA580C")&&_(e,"fill",t)},d(r){r&&u(e)}}}function ie(n){let e,s=n[1]!=="open"&&I(n);return{c(){s&&s.c(),e=y()},l(t){s&&s.l(t),e=y()},m(t,r){s&&s.m(t,r),m(t,e,r)},p(t,[r]){t[1]!=="open"?s?s.p(t,r):(s=I(t),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},i:v,o:v,d(t){s&&s.d(t),t&&u(e)}}}function ce(n){return ne("open",e=>{const s=new AbortController;return n==null||n.addEventListener("error",()=>e("error"),s),n==null||n.addEventListener("close",()=>e("close"),s),()=>s.abort()})}function fe(n,e,s){let t,r,a=v,l=()=>(a(),a=O(t,i=>s(1,r=i)),t);n.$$.on_destroy.push(()=>a());let{socket:o}=e;return n.$$set=i=>{"socket"in i&&s(2,o=i.socket)},n.$$.update=()=>{n.$$.dirty&4&&l(s(0,t=ce(o)))},[t,r,o]}class ue extends g{constructor(e){super(),b(this,e,fe,ie,$,{socket:2})}}function _e(n){let e,s,t,r;const a=n[2].default,l=z(a,n,n[1],null);return{c(){e=L("div"),l&&l.c(),this.h()},l(o){e=M(o,"DIV",{class:!0});var i=h(e);l&&l.l(i),i.forEach(u),this.h()},h(){_(e,"class","inner fill svelte-noax5s")},m(o,i){m(o,e,i),l&&l.m(e,null),r=!0},p(o,[i]){n=o,l&&l.p&&(!r||i&2)&&P(l,a,n,n[1],r?A(a,n[1],i,null):T(n[1]),null)},i(o){r||(d(l,o),R(()=>{t&&t.end(1),s=U(e,me,{duration:D,x:n[0].x,y:n[0].y}),s.start()}),r=!0)},o(o){p(l,o),s&&s.invalidate(),t=J(e,ae,{delay:D,duration:50}),r=!1},d(o){o&&u(e),l&&l.d(o),o&&t&&t.end()}}}function me(n,{duration:e,x:s=0,y:t=0}){const r=getComputedStyle(n),a=r.transform==="none"?"":r.transform;return{delay:0,duration:e,easing:oe,css:l=>`transform: ${a} translate(${(1-l)*s}%, ${(1-l)*t}%);`}}const K={left:{x:-100,y:0},right:{x:100,y:0},top:{x:0,y:-100},bottom:{x:0,y:100}},de=Object.keys(K),D=500;function pe(n,e,s){let{$$slots:t={},$$scope:r}=e;const a=K[le(de)];return n.$$set=l=>{"$$scope"in l&&s(1,r=l.$$scope)},[a,r,t]}class ve extends g{constructor(e){super(),b(this,e,pe,_e,$,{})}}function he(n){let e;const s=n[5].default,t=z(s,n,n[6],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,a){t&&t.m(r,a),e=!0},p(r,a){t&&t.p&&(!e||a&64)&&P(t,s,r,r[6],e?A(s,r[6],a,null):T(r[6]),null)},i(r){e||(d(t,r),e=!0)},o(r){p(t,r),e=!1},d(r){t&&t.d(r)}}}function q(n){let e,s;return e=new ve({props:{$$slots:{default:[he]},$$scope:{ctx:n}}}),{c(){B(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,r){j(e,t,r),s=!0},p(t,r){const a={};r&64&&(a.$$scope={dirty:r,ctx:t}),e.$set(a)},i(t){s||(d(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){F(e,t)}}}function ye(n){let e,s;return e=new ue({props:{socket:n[1]}}),{c(){B(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,r){j(e,t,r),s=!0},p:v,i(t){s||(d(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){F(e,t)}}}function $e(n){let e,s,t=n[0].type,r,a,l,o=q(n),i=n[1]&&ye(n);return{c(){e=E(),s=L("div"),o.c(),r=E(),i&&i.c(),a=y(),this.h()},l(c){G('[data-svelte="svelte-al2hjo"]',document.head).forEach(u),e=S(c),s=M(c,"DIV",{class:!0});var k=h(s);o.l(k),k.forEach(u),r=S(c),i&&i.l(c),a=y(),this.h()},h(){document.title="Cell",_(s,"class","layout svelte-12yt1eb")},m(c,f){m(c,e,f),m(c,s,f),o.m(s,null),m(c,r,f),i&&i.m(c,f),m(c,a,f),l=!0},p(c,[f]){f&1&&$(t,t=c[0].type)?(Z(),p(o,1,1,v),H(),o=q(c),o.c(),d(o,1),o.m(s,null)):o.p(c,f),c[1]&&i.p(c,f)},i(c){l||(d(o),d(i),l=!0)},o(c){p(o),p(i),l=!1},d(c){c&&u(e),c&&u(s),o.d(c),c&&u(r),i&&i.d(c),c&&u(a)}}}function De(){return Q("frame")}const qe=async({url:n})=>{const e=n.searchParams.get("id");return e?{props:{serial:e}}:{status:400,error:new Error("Missing ID")}};function ge(n,e,s){let t,r,{$$slots:a={},$$scope:l}=e,{serial:o}=e;const i=x(o),c=ee(i);return W(n,c,f=>s(0,r=f)),X(()=>{te(i)}),Y("frame",{socket:i,state:c}),n.$$set=f=>{"serial"in f&&s(3,o=f.serial),"$$scope"in f&&s(6,l=f.$$scope)},n.$$.update=()=>{n.$$.dirty&9&&s(4,t=se(r.type,o)),n.$$.dirty&16&&re(t,{replaceState:!0})},[r,i,c,o,t,a,l]}class ze extends g{constructor(e){super(),b(this,e,ge,$e,$,{serial:3})}}export{ze as default,De as getFrameContext,qe as load};
