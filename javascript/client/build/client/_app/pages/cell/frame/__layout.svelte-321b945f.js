import{W as d,S as _,i as m,s as p,F as h,k as g,X as y,d as f,m as S,g as E,G as v,H as C,I as L,q as b,o as q,L as F,v as I,r as M}from"../../../chunks/vendor-92048905.js";import{c as j,a as w,s as z,f as D,g as G}from"../../../chunks/state-socket-bd1aeee5.js";import"../../../chunks/singletons-d1fb5791.js";import"../../../chunks/cell-state-schema-a24ecc56.js";function H(s){let a,n;const i=s[5].default,t=h(i,s,s[4],null);return{c(){a=g(),t&&t.c(),this.h()},l(e){y('[data-svelte="svelte-al2hjo"]',document.head).forEach(f),a=S(e),t&&t.l(e),this.h()},h(){document.title="Cell"},m(e,l){E(e,a,l),t&&t.m(e,l),n=!0},p(e,[l]){t&&t.p&&(!n||l&16)&&v(t,i,e,e[4],n?L(i,e[4],l,null):C(e[4]),null)},i(e){n||(b(t,e),n=!0)},o(e){q(t,e),n=!1},d(e){e&&f(a),t&&t.d(e)}}}function x(){return d("frame")}const A=async({url:s})=>{const a=s.searchParams.get("id");return a?{props:{serial:a}}:{status:400,error:new Error("Missing ID")}};function P(s,a,n){let i,t,{$$slots:e={},$$scope:l}=a,{serial:c}=a;const o=j(c),u=w(o);return F(s,u,r=>n(3,t=r)),I(()=>{z(o)}),M("frame",{socket:o,state:u}),o==null||o.addEventListener("error",r=>console.error("Socket error",r)),o==null||o.addEventListener("open",r=>console.info("Socket open",r)),o==null||o.addEventListener("close",r=>console.info("Socket close",r)),s.$$set=r=>{"serial"in r&&n(1,c=r.serial),"$$scope"in r&&n(4,l=r.$$scope)},s.$$.update=()=>{s.$$.dirty&10&&n(2,i=D(t.type,c)),s.$$.dirty&4&&G(i,{replaceState:!0})},[u,c,i,t,l,e]}class B extends _{constructor(a){super();m(this,a,P,H,p,{serial:1})}}export{B as default,x as getFrameContext,A as load};
