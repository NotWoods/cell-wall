var N=Object.defineProperty,R=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var q=(n,e,a)=>e in n?N(n,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[e]=a,h=(n,e)=>{for(var a in e||(e={}))E.call(e,a)&&q(n,a,e[a]);if(g)for(var a of g(e))S.call(e,a)&&q(n,a,e[a]);return n},b=(n,e)=>R(n,V(e));var w=(n,e)=>{var a={};for(var t in n)E.call(n,t)&&e.indexOf(t)<0&&(a[t]=n[t]);if(n!=null&&g)for(var t of g(n))e.indexOf(t)<0&&S.call(n,t)&&(a[t]=n[t]);return a};import{V as F,D as B,S as D,i as P,s as T,w as d,x as $,y as p,q as l,o as c,B as _,k as y,X as A,d as m,m as k,g as v,p as I,n as O,e as W,c as j,b as f,af as C,O as M}from"../../chunks/vendor-75710b0b.js";import{g as U}from"../../chunks/navigation-0e6511d1.js";import{R as X}from"../../chunks/ResetSubmit-033ddad8.js";import{V as x}from"../../chunks/VerticalField-6d675f87.js";import{F as z}from"../../chunks/SubmitButton-fc79d27b.js";import{R as G,T as H}from"../../chunks/TopBar-c7a17b61.js";import"../../chunks/singletons-d1fb5791.js";import"../../chunks/LoadingSpinner-2691eeec.js";import"../../chunks/snackbar-host-898281c9.js";import"../../chunks/cell-state-schema-b294815b.js";const K=!0;function J(){const n=B({active:!1});return{state:n,active:F(n,e=>e.active),error:F(n,e=>e.error)}}function Q(){const n=new AbortController,o=J(),{state:e}=o,a=w(o,["state"]);async function t(){try{await document.documentElement.requestFullscreen().then(()=>e.set({active:!0}),r=>e.set({active:!1,error:r})),e.set({active:!0})}catch(r){if(r instanceof Error)e.set({active:!1,error:r});else throw r}}return t(),document.addEventListener("fullscreenchange",()=>{e.set({active:Boolean(document.fullscreenElement)})},n),b(h({},a),{async release(){n.abort(),await document.exitFullscreen()}})}function Y(){if("wakeLock"in navigator){let e=function(){t!==null&&document.visibilityState==="visible"&&s()};const a=new AbortController;let t;const n=J(),{state:o}=n,r=w(n,["state"]);async function s(){try{t=await navigator.wakeLock.request("screen"),o.set({active:!0}),t.addEventListener("release",()=>{o.set({active:!1})},a)}catch(i){if(i instanceof DOMException)o.set({active:!1,error:i});else throw i}}return s(),document.addEventListener("visibilitychange",e,a),document.addEventListener("fullscreenchange",e,a),b(h({},r),{async release(){a.abort(),await(t==null?void 0:t.release())}})}else return}function L(n){let e,a;return e=new H({}),{c(){d(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,o){p(e,t,o),a=!0},i(t){a||(l(e.$$.fragment,t),a=!0)},o(t){c(e.$$.fragment,t),a=!1},d(t){_(e,t)}}}function Z(n){let e,a,t,o;return{c(){e=W("input"),this.h()},l(r){e=j(r,"INPUT",{id:!0,class:!0,name:!0,type:!0}),this.h()},h(){f(e,"id","control-id"),f(e,"class",a=n[5]),f(e,"name","id"),f(e,"type","text"),e.required=!0},m(r,s){v(r,e,s),C(e,n[0]),t||(o=M(e,"input",n[3]),t=!0)},p(r,s){s&32&&a!==(a=r[5])&&f(e,"class",a),s&1&&e.value!==r[0]&&C(e,r[0])},d(r){r&&m(e),t=!1,o()}}}function ee(n){let e,a,t,o;return e=new x({props:{for:"control-id",label:"ID",$$slots:{default:[Z,({inputClassName:r})=>({5:r}),({inputClassName:r})=>r?32:0]},$$scope:{ctx:n}}}),t=new X({props:{loading:n[4]}}),{c(){d(e.$$.fragment),a=y(),d(t.$$.fragment)},l(r){$(e.$$.fragment,r),a=k(r),$(t.$$.fragment,r)},m(r,s){p(e,r,s),v(r,a,s),p(t,r,s),o=!0},p(r,s){const i={};s&97&&(i.$$scope={dirty:s,ctx:r}),e.$set(i);const u={};s&16&&(u.loading=r[4]),t.$set(u)},i(r){o||(l(e.$$.fragment,r),l(t.$$.fragment,r),o=!0)},o(r){c(e.$$.fragment,r),c(t.$$.fragment,r),o=!1},d(r){_(e,r),r&&m(a),_(t,r)}}}function te(n){let e,a;return e=new z({props:{class:"flex flex-col gap-y-4",action:"/cell/frame/blank",method:"get",onSubmit:n[2],$$slots:{default:[ee,({loading:t})=>({4:t}),({loading:t})=>t?16:0]},$$scope:{ctx:n}}}),{c(){d(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,o){p(e,t,o),a=!0},p(t,o){const r={};o&81&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){a||(l(e.$$.fragment,t),a=!0)},o(t){c(e.$$.fragment,t),a=!1},d(t){_(e,t)}}}function re(n){let e,a,t,o,r=!n[1]&&L();return t=new G({props:{$$slots:{default:[te]},$$scope:{ctx:n}}}),{c(){e=y(),r&&r.c(),a=y(),d(t.$$.fragment),this.h()},l(s){A('[data-svelte="svelte-1rqvp1e"]',document.head).forEach(m),e=k(s),r&&r.l(s),a=k(s),$(t.$$.fragment,s),this.h()},h(){document.title="New Cell | CellWall"},m(s,i){v(s,e,i),r&&r.m(s,i),v(s,a,i),p(t,s,i),o=!0},p(s,[i]){s[1]?r&&(O(),c(r,1,1,()=>{r=null}),I()):r?i&2&&l(r,1):(r=L(),r.c(),l(r,1),r.m(a.parentNode,a));const u={};i&65&&(u.$$scope={dirty:i,ctx:s}),t.$set(u)},i(s){o||(l(r),l(t.$$.fragment,s),o=!0)},o(s){c(r),c(t.$$.fragment,s),o=!1},d(s){s&&m(e),r&&r.d(s),s&&m(a),_(t,s)}}}const pe=async({url:n})=>({props:{id:n.searchParams.get("id")||"",autoJoin:n.searchParams.has("autojoin")}});function ae(n,e,a){let{id:t=""}=e,{autoJoin:o=!1}=e;async function r(){Q(),Y(),await U(`/cell/frame/blank?id=${t}`,{replaceState:!1})}function s(){t=this.value,a(0,t)}return n.$$set=i=>{"id"in i&&a(0,t=i.id),"autoJoin"in i&&a(1,o=i.autoJoin)},n.$$.update=()=>{n.$$.dirty&2&&o&&K&&r()},[t,o,r,s]}class _e extends D{constructor(e){super();P(this,e,ae,re,T,{id:0,autoJoin:1})}}export{_e as default,pe as load};
