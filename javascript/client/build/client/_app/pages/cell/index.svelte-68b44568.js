var D=Object.defineProperty,I=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var T=(r,e,n)=>e in r?D(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,q=(r,e)=>{for(var n in e||(e={}))A.call(e,n)&&T(r,n,e[n]);if(k)for(var n of k(e))N.call(e,n)&&T(r,n,e[n]);return r},S=(r,e)=>I(r,P(e));var C=(r,e)=>{var n={};for(var t in r)A.call(r,t)&&e.indexOf(t)<0&&(n[t]=r[t]);if(r!=null&&k)for(var t of k(r))e.indexOf(t)<0&&N.call(r,t)&&(n[t]=r[t]);return n};import{V as M,D as W,S as j,i as z,s as O,w as b,x as g,y as v,q as p,o as $,B as w,e as _,k as F,X as x,c as h,d as m,m as L,b as f,J as y,g as E,p as K,n as U,ag as R,O as X}from"../../chunks/vendor-98a08ead.js";import{g as G}from"../../chunks/navigation-0e6511d1.js";import{R as H}from"../../chunks/ResetSubmit-553f1bb8.js";import{V as Q}from"../../chunks/VerticalField-f8b9cc78.js";import{F as Y}from"../../chunks/SubmitButton-f44ddfd6.js";import{R as Z,T as ee}from"../../chunks/TopBar-7466b32b.js";import"../../chunks/singletons-d1fb5791.js";import"../../chunks/LoadingSpinner-2dad316c.js";import"../../chunks/snackbar-host-483fec76.js";import"../../chunks/cell-state-schema-a24ecc56.js";const te=!0;function B(){const r=W({active:!1});return{state:r,active:M(r,e=>e.active),error:M(r,e=>e.error)}}function ae(){const r=new AbortController,s=B(),{state:e}=s,n=C(s,["state"]);async function t(){try{await document.documentElement.requestFullscreen().then(()=>e.set({active:!0}),a=>e.set({active:!1,error:a})),e.set({active:!0})}catch(a){if(a instanceof Error)e.set({active:!1,error:a});else throw a}}return t(),document.addEventListener("fullscreenchange",()=>{e.set({active:Boolean(document.fullscreenElement)})},r),S(q({},n),{async release(){r.abort(),await document.exitFullscreen()}})}function ne(){if("wakeLock"in navigator){let e=function(){t!==null&&document.visibilityState==="visible"&&o()};const n=new AbortController;let t;const r=B(),{state:s}=r,a=C(r,["state"]);async function o(){try{t=await navigator.wakeLock.request("screen"),s.set({active:!0}),t.addEventListener("release",()=>{s.set({active:!1})},n)}catch(i){if(i instanceof DOMException)s.set({active:!1,error:i});else throw i}}return o(),document.addEventListener("visibilitychange",e,n),document.addEventListener("fullscreenchange",e,n),S(q({},a),{async release(){n.abort(),await(t==null?void 0:t.release())}})}else return}function V(r){let e,n;return e=new ee({}),{c(){b(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,s){v(e,t,s),n=!0},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function re(r){let e,n,t,s;return{c(){e=_("input"),this.h()},l(a){e=h(a,"INPUT",{id:!0,class:!0,name:!0,type:!0}),this.h()},h(){f(e,"id","control-id"),f(e,"class",n=r[5]),f(e,"name","id"),f(e,"type","text"),e.required=!0},m(a,o){E(a,e,o),R(e,r[0]),t||(s=X(e,"input",r[3]),t=!0)},p(a,o){o&32&&n!==(n=a[5])&&f(e,"class",n),o&1&&e.value!==a[0]&&R(e,a[0])},d(a){a&&m(e),t=!1,s()}}}function se(r){let e,n,t,s;return e=new Q({props:{for:"control-id",label:"ID",$$slots:{default:[re,({inputClassName:a})=>({5:a}),({inputClassName:a})=>a?32:0]},$$scope:{ctx:r}}}),t=new H({props:{loading:r[4]}}),{c(){b(e.$$.fragment),n=F(),b(t.$$.fragment)},l(a){g(e.$$.fragment,a),n=L(a),g(t.$$.fragment,a)},m(a,o){v(e,a,o),E(a,n,o),v(t,a,o),s=!0},p(a,o){const i={};o&97&&(i.$$scope={dirty:o,ctx:a}),e.$set(i);const d={};o&16&&(d.loading=a[4]),t.$set(d)},i(a){s||(p(e.$$.fragment,a),p(t.$$.fragment,a),s=!0)},o(a){$(e.$$.fragment,a),$(t.$$.fragment,a),s=!1},d(a){w(e,a),a&&m(n),w(t,a)}}}function oe(r){let e,n;return e=new Y({props:{class:"flex flex-col gap-y-4",action:"/cell/frame/blank",method:"get",onSubmit:r[2],$$slots:{default:[se,({loading:t})=>({4:t}),({loading:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,s){v(e,t,s),n=!0},p(t,s){const a={};s&81&&(a.$$scope={dirty:s,ctx:t}),e.$set(a)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function le(r){let e,n,t,s,a,o,i,d,c=!r[1]&&V();return i=new Z({props:{$$slots:{default:[oe]},$$scope:{ctx:r}}}),{c(){e=_("meta"),n=_("meta"),t=_("meta"),s=_("link"),a=F(),c&&c.c(),o=F(),b(i.$$.fragment),this.h()},l(l){const u=x('[data-svelte="svelte-1vwepwj"]',document.head);e=h(u,"META",{name:!0,content:!0}),n=h(u,"META",{name:!0,content:!0}),t=h(u,"META",{name:!0,content:!0}),s=h(u,"LINK",{rel:!0,sizes:!0,href:!0}),u.forEach(m),a=L(l),c&&c.l(l),o=L(l),g(i.$$.fragment,l),this.h()},h(){document.title="New Cell | CellWall",f(e,"name","apple-mobile-web-app-capable"),f(e,"content","yes"),f(n,"name","apple-mobile-web-app-status-bar-style"),f(n,"content","black-translucent"),f(t,"name","apple-mobile-web-app-title"),f(t,"content","CellWall"),f(s,"rel","apple-touch-icon"),f(s,"sizes","274x274"),f(s,"href","/maskable_icon.png")},m(l,u){y(document.head,e),y(document.head,n),y(document.head,t),y(document.head,s),E(l,a,u),c&&c.m(l,u),E(l,o,u),v(i,l,u),d=!0},p(l,[u]){l[1]?c&&(U(),$(c,1,1,()=>{c=null}),K()):c?u&2&&p(c,1):(c=V(),c.c(),p(c,1),c.m(o.parentNode,o));const J={};u&65&&(J.$$scope={dirty:u,ctx:l}),i.$set(J)},i(l){d||(p(c),p(i.$$.fragment,l),d=!0)},o(l){$(c),$(i.$$.fragment,l),d=!1},d(l){m(e),m(n),m(t),m(s),l&&m(a),c&&c.d(l),l&&m(o),w(i,l)}}}const ve=async({url:r})=>({props:{id:r.searchParams.get("id")||"",autoJoin:r.searchParams.has("autojoin")}});function ie(r,e,n){let{id:t=""}=e,{autoJoin:s=!1}=e;async function a(){ae(),ne(),await G(`/cell/frame/blank?id=${t}`,{replaceState:!1})}function o(){t=this.value,n(0,t)}return r.$$set=i=>{"id"in i&&n(0,t=i.id),"autoJoin"in i&&n(1,s=i.autoJoin)},r.$$.update=()=>{r.$$.dirty&2&&s&&te&&a()},[t,s,a,o]}class we extends j{constructor(e){super();z(this,e,ie,le,O,{id:0,autoJoin:1})}}export{we as default,ve as load};
