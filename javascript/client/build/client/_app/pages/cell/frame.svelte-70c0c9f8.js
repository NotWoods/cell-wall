import{ad as _,ae as p,S as b,i as w,s as k,k as y,e as g,W as v,d as c,m as C,c as E,a as S,b as m,g as f,K as i,L as W,a0 as q}from"../../chunks/vendor-972526c7.js";import{C as L}from"../../chunks/state-33679332.js";function j(e,t){{const s=new WebSocket(e);return _(t,a=>{const r=new AbortController;return s.addEventListener("message",l=>{console.log(l.data),a(l.data)},r),()=>r.abort()})}}function A(e){let t,s;return{c(){t=y(),s=g("iframe"),this.h()},l(a){v('[data-svelte="svelte-1owks98"]',document.head).forEach(c),t=C(a),s=E(a,"IFRAME",{title:!0,class:!0}),S(s).forEach(c),this.h()},h(){document.title="CellWall",m(s,"title","Cell content"),m(s,"class","svelte-9qi62d")},m(a,r){f(a,t,r),f(a,s,r),e[3](s)},p:i,i,o:i,d(a){a&&c(t),a&&c(s),e[3](null)}}}const D=p(j("ws://localhost:3000","{}"),e=>JSON.parse(e)),T=async({url:e})=>{const t=e.searchParams.get("id");return t?{props:{serial:t}}:{status:400,error:new Error("Missing ID")}};function F({state:e,info:t}={}){switch(e==null?void 0:e.type){case L.WEB:return new URL(e.url,t==null?void 0:t.server);default:return}}function I(e,t,s){var u,d;let a,r;W(e,D,n=>s(2,r=n));let{serial:l}=t,o;o&&(o.src=(d=(u=F(a))==null?void 0:u.href)!=null?d:"about:blank");function h(n){q[n?"unshift":"push"](()=>{o=n,s(0,o)})}return e.$$set=n=>{"serial"in n&&s(1,l=n.serial)},e.$$.update=()=>{e.$$.dirty&6&&(a=r[l])},[o,l,r,h]}class U extends b{constructor(t){super();w(this,t,I,A,k,{serial:1})}}export{U as default,T as load};
