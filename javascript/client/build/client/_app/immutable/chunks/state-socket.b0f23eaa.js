import{c as a}from"./singletons.b467ccca.js";import{b as s}from"./web.85761f5a.js";import{r as f}from"./index.5159c792.js";const w=a("goto"),b=a("preload_code");function y(e){return new WebSocket(`ws://${window.location.host}/cells/${e}`)}function l(e){return!!(e&&typeof e=="object"&&"type"in e)}function d(e){return e instanceof ArrayBuffer?e.byteLength===0:e instanceof Blob?e.size===0:!1}function u(e){try{return JSON.parse(e)}catch(n){if(n instanceof SyntaxError)return;throw n}}function g(e){let n=s;return f(s,r=>{const t=new AbortController;function c({data:o}){if(typeof o=="string"){const i=u(o);if(l(i)){n=i;return}}d(o)||(n.payload=o),r(n)}return e==null||e.addEventListener("message",c,t),()=>t.abort()})}function v(e,n){if(e){const r=()=>{const t={width:window.innerWidth,height:window.innerHeight};e.send(JSON.stringify(t))};switch(document.addEventListener("resize",r,n),e.addEventListener("close",()=>{document.removeEventListener("resize",r)}),e.readyState){case 0:e.addEventListener("open",r,n);break;case 1:r();break}}}function S(e,n){return`/cell/frame/${e.toLowerCase()}?id=${n}`}export{g as a,y as c,S as f,w as g,b as p,v as s};
