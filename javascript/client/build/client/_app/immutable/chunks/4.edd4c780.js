import{s as C,n as j,b as K,j as V,d as W,D as A,c as z,u as F,g as J,a as U,B as G}from"./scheduler.fd4d87b3.js";import{S as M,i as x,D as E,j as _,d as p,e as k,c as w,p as R,f as d,g as h,t as $,v as Q,a as g,w as X,s as v,o as Y,u as Z,b,q as ee,z as te,r as ae,O as B,k as y,h as re,l as S,m as L,n as D}from"./index.64515c27.js";import{n as se}from"./stores.bc7ffb6f.js";import{T as ne,R as oe}from"./TopBar.6950972f.js";import{a as H}from"./index.fe5f1800.js";import{r as ie,d as P}from"./index.5159c792.js";import{S as I}from"./snackbar-host.8684c3d0.js";function O(n){let t,e,a;return{c(){t=k("div"),e=k("div"),this.h()},l(r){t=w(r,"DIV",{class:!0,role:!0,"aria-valuemin":!0,"aria-valuemax":!0,"aria-valuetext":!0});var o=R(t);e=w(o,"DIV",{class:!0}),R(e).forEach(p),o.forEach(p),this.h()},h(){var r,o;d(e,"class","progress-bar-value w-full h-full bg-gray-200 svelte-7f51jt"),d(t,"class","absolute w-full h-1 bg-green-900 overflow-hidden"),d(t,"role","progressbar"),d(t,"aria-valuemin",0),d(t,"aria-valuemax",1),d(t,"aria-valuetext",a="Loading "+((o=(r=n[0])==null?void 0:r.to)==null?void 0:o.url.pathname))},m(r,o){_(r,t,o),h(t,e)},p(r,o){var i,f;o&1&&a!==(a="Loading "+((f=(i=r[0])==null?void 0:i.to)==null?void 0:f.url.pathname))&&d(t,"aria-valuetext",a)},d(r){r&&p(t)}}}function le(n){let t,e=n[0]!=null&&O(n);return{c(){e&&e.c(),t=E()},l(a){e&&e.l(a),t=E()},m(a,r){e&&e.m(a,r),_(a,t,r)},p(a,[r]){a[0]!=null?e?e.p(a,r):(e=O(a),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:j,o:j,d(a){a&&p(t),e&&e.d(a)}}}function fe(n,t,e){let a;return K(n,se,r=>e(0,a=r)),[a]}class ue extends M{constructor(t){super(),x(this,t,fe,le,C,{})}}function q(n){let t,e,a='<span class="sr-only">Dismiss snackbar</span> <svg class="h-6 w-6 transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',r,o=n[0].message+"",i,f,c,m,u;return{c(){t=k("aside"),e=k("button"),e.innerHTML=a,r=v(),i=Y(o),this.h()},l(s){t=w(s,"ASIDE",{role:!0,class:!0});var l=R(t);e=w(l,"BUTTON",{type:!0,class:!0,title:!0,"data-svelte-h":!0}),Z(e)!=="svelte-1osiuh9"&&(e.innerHTML=a),r=b(l),i=ee(l,o),l.forEach(p),this.h()},h(){d(e,"type","button"),d(e,"class","rounded-md float-right text-gray-600 hover:text-black"),d(e,"title","Dismiss snackbar"),d(t,"role","alert"),d(t,"class","fixed inset-4 top-auto bg-gray-200 text-black mx-auto px-4 py-2 max-w-lg")},m(s,l){_(s,t,l),h(t,e),h(t,r),h(t,i),c=!0,m||(u=te(e,"click",function(){V(n[0].dismiss)&&n[0].dismiss.apply(this,arguments)}),m=!0)},p(s,l){n=s,(!c||l&1)&&o!==(o=n[0].message+"")&&ae(i,o)},i(s){c||(s&&W(()=>{c&&(f||(f=B(t,H,{y:100,duration:300},!0)),f.run(1))}),c=!0)},o(s){s&&(f||(f=B(t,H,{y:100,duration:300},!1)),f.run(0)),c=!1},d(s){s&&p(t),s&&f&&f.end(),m=!1,u()}}}function ce(n){let t,e=n[0]&&q(n);return{c(){e&&e.c(),t=E()},l(a){e&&e.l(a),t=E()},m(a,r){e&&e.m(a,r),_(a,t,r)},p(a,[r]){a[0]?e?(e.p(a,r),r&1&&$(e,1)):(e=q(a),e.c(),$(e,1),e.m(t.parentNode,t)):e&&(Q(),g(e,1,1,()=>{e=null}),X())},i(a){$(e)},o(a){g(e)},d(a){a&&p(t),e&&e.d(a)}}}function me(n,t,e){let{data:a}=t;return n.$$set=r=>{"data"in r&&e(0,a=r.data)},[a]}class de extends M{constructor(t){super(),x(this,t,me,ce,C,{data:0})}}function pe(){return new WebSocket(`ws://${window.location.host}/remote`)}function _e(n){return ie(new Map,t=>{const e=new AbortController;function a({data:r}){const o=JSON.parse(r),i=new Map(Object.entries(o));t(i)}return n==null||n.addEventListener("message",a,e),()=>e.abort()})}function De(n){return P(n,t=>Array.from(t.entries()))}function Ee(n){return P(n,t=>Array.from(t.keys()))}function $e(n){let t;const e=n[2].default,a=z(e,n,n[3],null);return{c(){a&&a.c()},l(r){a&&a.l(r)},m(r,o){a&&a.m(r,o),t=!0},p(r,o){a&&a.p&&(!t||o&8)&&F(a,e,r,r[3],t?U(e,r[3],o,null):J(r[3]),null)},i(r){t||($(a,r),t=!0)},o(r){g(a,r),t=!1},d(r){a&&a.d(r)}}}function ge(n){let t,e,a,r,o,i,f,c,m,u;return a=new ue({}),o=new ne({}),f=new oe({props:{$$slots:{default:[$e]},$$scope:{ctx:n}}}),m=new de({props:{data:n[0]}}),{c(){t=k("link"),e=v(),y(a.$$.fragment),r=v(),y(o.$$.fragment),i=v(),y(f.$$.fragment),c=v(),y(m.$$.fragment),this.h()},l(s){const l=re("svelte-1tkg7m6",document.head);t=w(l,"LINK",{rel:!0,href:!0}),l.forEach(p),e=b(s),S(a.$$.fragment,s),r=b(s),S(o.$$.fragment,s),i=b(s),S(f.$$.fragment,s),c=b(s),S(m.$$.fragment,s),this.h()},h(){document.title="CellWall Remote",d(t,"rel","manifest"),d(t,"href","/manifest.webmanifest")},m(s,l){h(document.head,t),_(s,e,l),L(a,s,l),_(s,r,l),L(o,s,l),_(s,i,l),L(f,s,l),_(s,c,l),L(m,s,l),u=!0},p(s,[l]){const N={};l&8&&(N.$$scope={dirty:l,ctx:s}),f.$set(N);const T={};l&1&&(T.data=s[0]),m.$set(T)},i(s){u||($(a.$$.fragment,s),$(o.$$.fragment,s),$(f.$$.fragment,s),$(m.$$.fragment,s),u=!0)},o(s){g(a.$$.fragment,s),g(o.$$.fragment,s),g(f.$$.fragment,s),g(m.$$.fragment,s),u=!1},d(s){s&&(p(e),p(r),p(i),p(c)),p(t),D(a,s),D(o,s),D(f,s),D(m,s)}}}function Re(){return G("remote")}function ve(n,t,e){let a,{$$slots:r={},$$scope:o}=t;const i=pe(),f=_e(i);A("remote",{socket:i,state:f});const c=new I,{currentSnackbarData:m}=c;return K(n,m,u=>e(0,a=u)),A(I,c),i==null||i.addEventListener("error",u=>{console.error("RemoteSocket error",u),c.showSnackbar("Remote socket error")}),i==null||i.addEventListener("open",u=>console.info("RemoteSocket open",u)),i==null||i.addEventListener("close",u=>console.info("RemoteSocket close",u)),n.$$set=u=>{"$$scope"in u&&e(3,o=u.$$scope)},[a,m,r,o]}class Ce extends M{constructor(t){super(),x(this,t,ve,ge,C,{})}}export{Ce as L,Ee as a,Re as g,De as s};
