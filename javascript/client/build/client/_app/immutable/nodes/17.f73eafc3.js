import{s as O,c as ae,u as oe,g as ie,a as fe,p as be,b as G,d as $e,n as ve,m as ke,E as ye}from"../chunks/scheduler.fd4d87b3.js";import{S as P,i as z,e as S,c as w,p as E,d as h,f as p,j as g,t as d,a as b,k as $,l as v,m as k,n as y,D as T,s as A,b as I,E as ue,C as D,o as ce,q as _e,g as F,r as me,v as R,w as H,H as C,z as pe,u as Se,y as J,x as we,N as Te}from"../chunks/index.64515c27.js";import{e as N,u as he,o as de}from"../chunks/each.0555d8d8.js";import{D as Ee,R as Ce}from"../chunks/DeviceOptions.b118da36.js";import{H as V}from"../chunks/HorizontalField.160b8ef4.js";import{F as Ne}from"../chunks/Form.09dfc92a.js";import{g as qe,s as Oe}from"../chunks/4.edd4c780.js";import{a as Pe,d as ze,e as Ae,f as Ie,g as De,h as Le}from"../chunks/web.85761f5a.js";import{a as je}from"../chunks/color.f67fd270.js";import{s as ge}from"../chunks/index.9144b5bf.js";import{P as Be}from"../chunks/_PowerButtons.e4bf962c.js";import{p as Fe}from"../chunks/_form.d55ea23c.js";const U=[Pe,ze,Ae,Ie,De,Le],Re=async({url:i})=>({defaultSerial:i.searchParams.get("id")||""}),Et=Object.freeze(Object.defineProperty({__proto__:null,load:Re},Symbol.toStringTag,{value:"Module"}));function He(i){let e,l;const t=i[1].default,a=ae(t,i,i[0],null);return{c(){e=S("ul"),a&&a.c(),this.h()},l(r){e=w(r,"UL",{class:!0,role:!0});var o=E(e);a&&a.l(o),o.forEach(h),this.h()},h(){p(e,"class","flex flex-wrap border-b-2 border-slate-700"),p(e,"role","tablist")},m(r,o){g(r,e,o),a&&a.m(e,null),l=!0},p(r,[o]){a&&a.p&&(!l||o&1)&&oe(a,t,r,r[0],l?fe(t,r[0],o,null):ie(r[0]),null)},i(r){l||(d(a,r),l=!0)},o(r){b(a,r),l=!1},d(r){r&&h(e),a&&a.d(r)}}}function Me(i,e,l){let{$$slots:t={},$$scope:a}=e;return i.$$set=r=>{"$$scope"in r&&l(0,a=r.$$scope)},[a,t]}class Ue extends P{constructor(e){super(),z(this,e,Me,He,O,{})}}function Q(i,e,l){const t=i.slice();return t[12]=e[l],t}function X(i,e,l){const t=i.slice();return t[9]=e[l],t}function Ve(i){let e,l,t,a,r,o,s,n=i[5]&&Y(i);return{c(){e=S("input"),o=A(),n&&n.c(),s=T(),this.h()},l(f){e=w(f,"INPUT",{id:!0,list:!0,class:!0,name:!0,type:!0}),o=I(f),n&&n.l(f),s=T(),this.h()},h(){p(e,"id",l="control-"+i[0]),p(e,"list",t=i[5]?`list-${i[0]}`:void 0),p(e,"class",a=i[4]==="color"?"":i[8]),p(e,"name",i[0]),p(e,"type",i[4]),e.required=i[2],e.value=r=typeof i[3]=="string"?i[3]:i[6]},m(f,u){g(f,e,u),g(f,o,u),n&&n.m(f,u),g(f,s,u)},p(f,u){u&1&&l!==(l="control-"+f[0])&&p(e,"id",l),u&33&&t!==(t=f[5]?`list-${f[0]}`:void 0)&&p(e,"list",t),u&272&&a!==(a=f[4]==="color"?"":f[8])&&p(e,"class",a),u&1&&p(e,"name",f[0]),u&16&&p(e,"type",f[4]),u&4&&(e.required=f[2]),u&72&&r!==(r=typeof f[3]=="string"?f[3]:f[6])&&e.value!==r&&(e.value=r),f[5]?n?n.p(f,u):(n=Y(f),n.c(),n.m(s.parentNode,s)):n&&(n.d(1),n=null)},d(f){f&&(h(e),h(o),h(s)),n&&n.d(f)}}}function We(i){let e,l,t,a=N(i[1].enum),r=[];for(let o=0;o<a.length;o+=1)r[o]=x(X(i,a,o));return{c(){e=S("select");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=w(o,"SELECT",{id:!0,name:!0,class:!0});var s=E(e);for(let n=0;n<r.length;n+=1)r[n].l(s);s.forEach(h),this.h()},h(){p(e,"id",l="control-"+i[0]),p(e,"name",i[0]),p(e,"class",t=i[8])},m(o,s){g(o,e,s);for(let n=0;n<r.length;n+=1)r[n]&&r[n].m(e,null)},p(o,s){if(s&2){a=N(o[1].enum);let n;for(n=0;n<a.length;n+=1){const f=X(o,a,n);r[n]?r[n].p(f,s):(r[n]=x(f),r[n].c(),r[n].m(e,null))}for(;n<r.length;n+=1)r[n].d(1);r.length=a.length}s&1&&l!==(l="control-"+o[0])&&p(e,"id",l),s&1&&p(e,"name",o[0]),s&256&&t!==(t=o[8])&&p(e,"class",t)},d(o){o&&h(e),ue(r,o)}}}function Y(i){let e,l,t=N(i[5]),a=[];for(let r=0;r<t.length;r+=1)a[r]=Z(Q(i,t,r));return{c(){e=S("datalist");for(let r=0;r<a.length;r+=1)a[r].c();this.h()},l(r){e=w(r,"DATALIST",{id:!0});var o=E(e);for(let s=0;s<a.length;s+=1)a[s].l(o);o.forEach(h),this.h()},h(){p(e,"id",l="list-"+i[0])},m(r,o){g(r,e,o);for(let s=0;s<a.length;s+=1)a[s]&&a[s].m(e,null)},p(r,o){if(o&32){t=N(r[5]);let s;for(s=0;s<t.length;s+=1){const n=Q(r,t,s);a[s]?a[s].p(n,o):(a[s]=Z(n),a[s].c(),a[s].m(e,null))}for(;s<a.length;s+=1)a[s].d(1);a.length=t.length}o&1&&l!==(l="list-"+r[0])&&p(e,"id",l)},d(r){r&&h(e),ue(a,r)}}}function Z(i){let e,l;return{c(){e=S("option"),this.h()},l(t){e=w(t,"OPTION",{}),E(e).forEach(h),this.h()},h(){e.__value=l=i[12],D(e,e.__value)},m(t,a){g(t,e,a)},p(t,a){a&32&&l!==(l=t[12])&&(e.__value=l,D(e,e.__value))},d(t){t&&h(e)}}}function x(i){let e,l=i[9]+"",t,a;return{c(){e=S("option"),t=ce(l),this.h()},l(r){e=w(r,"OPTION",{});var o=E(e);t=_e(o,l),o.forEach(h),this.h()},h(){e.__value=a=i[9],D(e,e.__value)},m(r,o){g(r,e,o),F(e,t)},p(r,o){o&2&&l!==(l=r[9]+"")&&me(t,l),o&2&&a!==(a=r[9])&&(e.__value=a,D(e,e.__value))},d(r){r&&h(e)}}}function Ke(i){let e,l;function t(o,s){return s&2&&(e=null),e==null&&(e=!!Array.isArray(o[1].enum)),e?We:Ve}let a=t(i,-1),r=a(i);return{c(){r.c(),l=T()},l(o){r.l(o),l=T()},m(o,s){r.m(o,s),g(o,l,s)},p(o,s){a===(a=t(o,s))&&r?r.p(o,s):(r.d(1),r=a(o),r&&(r.c(),r.m(l.parentNode,l)))},d(o){o&&h(l),r.d(o)}}}function Ge(i){let e,l;return e=new V({props:{for:"control-"+i[0],label:i[7],$$slots:{default:[Ke,({inputClassName:t})=>({8:t}),({inputClassName:t})=>t?256:0]},$$scope:{ctx:i}}}),{c(){$(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,a){k(e,t,a),l=!0},p(t,[a]){const r={};a&1&&(r.for="control-"+t[0]),a&128&&(r.label=t[7]),a&33151&&(r.$$scope={dirty:a,ctx:t}),e.$set(r)},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){y(e,t)}}}const Je=new je;function Qe(i,e){if(Array.isArray(e.enum))return"select";if(i.endsWith("Color"))return"color";switch(e.type){case"number":return"number";case"string":if(e.format==="uri")return"url";default:return"text"}}function Xe(i,e,l){let t,a,r,o,{name:s}=e,{property:n}=e,{required:f}=e,{value:u}=e;return i.$$set=_=>{"name"in _&&l(0,s=_.name),"property"in _&&l(1,n=_.property),"required"in _&&l(2,f=_.required),"value"in _&&l(3,u=_.value)},i.$$.update=()=>{i.$$.dirty&3&&l(7,t=n.title??ge(s)),i.$$.dirty&3&&l(4,a=Qe(s,n)),i.$$.dirty&16&&l(6,r=a==="color"?Je.next():""),i.$$.dirty&2&&l(5,o=n.examples&&n.examples.length>0?n.examples:void 0)},[s,n,f,u,a,o,r,t]}class Ye extends P{constructor(e){super(),z(this,e,Xe,Ge,O,{name:0,property:1,required:2,value:3})}}function ee(i,e,l){const t=i.slice();return t[4]=e[l].name,t[5]=e[l].property,t}function te(i,e){var r;let l,t,a;return t=new Ye({props:{name:e[4],property:e[5],required:e[2].has(e[4]),value:(r=e[0])==null?void 0:r[e[4]]}}),{key:i,first:null,c(){l=T(),$(t.$$.fragment),this.h()},l(o){l=T(),v(t.$$.fragment,o),this.h()},h(){this.first=l},m(o,s){g(o,l,s),k(t,o,s),a=!0},p(o,s){var f;e=o;const n={};s&2&&(n.name=e[4]),s&2&&(n.property=e[5]),s&6&&(n.required=e[2].has(e[4])),s&3&&(n.value=(f=e[0])==null?void 0:f[e[4]]),t.$set(n)},i(o){a||(d(t.$$.fragment,o),a=!0)},o(o){b(t.$$.fragment,o),a=!1},d(o){o&&h(l),y(t,o)}}}function Ze(i){let e=[],l=new Map,t,a,r=N(i[1]);const o=s=>s[4];for(let s=0;s<r.length;s+=1){let n=ee(i,r,s),f=o(n);l.set(f,e[s]=te(f,n))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();t=T()},l(s){for(let n=0;n<e.length;n+=1)e[n].l(s);t=T()},m(s,n){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(s,n);g(s,t,n),a=!0},p(s,[n]){n&7&&(r=N(s[1]),R(),e=he(e,n,o,1,s,r,l,t.parentNode,de,te,t,ee),H())},i(s){if(!a){for(let n=0;n<r.length;n+=1)d(e[n]);a=!0}},o(s){for(let n=0;n<e.length;n+=1)b(e[n]);a=!1},d(s){s&&h(t);for(let n=0;n<e.length;n+=1)e[n].d(s)}}}function xe(i,e,l){let t,a,{schema:r}=e,{state:o=void 0}=e;return i.$$set=s=>{"schema"in s&&l(3,r=s.schema),"state"in s&&l(0,o=s.state)},i.$$.update=()=>{i.$$.dirty&8&&l(2,t=new Set((r==null?void 0:r.required)||[])),i.$$.dirty&8&&l(1,a=Object.entries((r==null?void 0:r.properties)||{}).filter(([s])=>s!=="type").map(([s,n])=>({name:s,property:n})))},[o,a,t,r]}class et extends P{constructor(e){super(),z(this,e,xe,Ze,O,{schema:3,state:0})}}function tt(i){let e,l,t,a,r;const o=i[3].default,s=ae(o,i,i[2],null);return{c(){e=S("li"),l=S("button"),s&&s.c(),this.h()},l(n){e=w(n,"LI",{class:!0});var f=E(e);l=w(f,"BUTTON",{type:!0,class:!0,role:!0,"aria-selected":!0,"aria-controls":!0});var u=E(l);s&&s.l(u),u.forEach(h),f.forEach(h),this.h()},h(){p(l,"type","button"),p(l,"class","border-b-2 -mb-[2px] px-4 py-2 transition-colors"),p(l,"role","tab"),p(l,"aria-selected",i[0]),p(l,"aria-controls",i[1]),C(l,"text-green-400",i[0]),C(l,"border-current",i[0]),C(l,"border-transparent",!i[0]),C(l,"hover:border-white",!i[0]),p(e,"class","inline-block")},m(n,f){g(n,e,f),F(e,l),s&&s.m(l,null),t=!0,a||(r=pe(l,"click",i[4]),a=!0)},p(n,[f]){s&&s.p&&(!t||f&4)&&oe(s,o,n,n[2],t?fe(o,n[2],f,null):ie(n[2]),null),(!t||f&1)&&p(l,"aria-selected",n[0]),(!t||f&2)&&p(l,"aria-controls",n[1]),(!t||f&1)&&C(l,"text-green-400",n[0]),(!t||f&1)&&C(l,"border-current",n[0]),(!t||f&1)&&C(l,"border-transparent",!n[0]),(!t||f&1)&&C(l,"hover:border-white",!n[0])},i(n){t||(d(s,n),t=!0)},o(n){b(s,n),t=!1},d(n){n&&h(e),s&&s.d(n),a=!1,r()}}}function lt(i,e,l){let{$$slots:t={},$$scope:a}=e,{selected:r=!1}=e,{controls:o}=e;function s(n){be.call(this,i,n)}return i.$$set=n=>{"selected"in n&&l(0,r=n.selected),"controls"in n&&l(1,o=n.controls),"$$scope"in n&&l(2,a=n.$$scope)},[r,o,a,t,s]}class nt extends P{constructor(e){super(),z(this,e,lt,tt,O,{selected:0,controls:1})}}function rt(i){let e;return{c(){e=ce(i[2])},l(l){e=_e(l,i[2])},m(l,t){g(l,e,t)},p(l,t){t&4&&me(e,l[2])},d(l){l&&h(e)}}}function st(i){let e,l;return e=new nt({props:{selected:i[1]===i[0],controls:"custom-form",$$slots:{default:[rt]},$$scope:{ctx:i}}}),e.$on("click",i[4]),{c(){$(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,a){k(e,t,a),l=!0},p(t,[a]){const r={};a&3&&(r.selected=t[1]===t[0]),a&36&&(r.$$scope={dirty:a,ctx:t}),e.$set(r)},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){y(e,t)}}}function at(i,e,l){let t,a,{selectedType:r}=e,{schema:o}=e;const s=()=>{l(0,r=t)};return i.$$set=n=>{"selectedType"in n&&l(0,r=n.selectedType),"schema"in n&&l(3,o=n.schema)},i.$$.update=()=>{i.$$.dirty&8&&l(1,t=o.properties.type.const),i.$$.dirty&2&&l(2,a=ge(t.toLocaleLowerCase()))},[r,t,a,o,s]}class ot extends P{constructor(e){super(),z(this,e,at,st,O,{selectedType:0,schema:3})}}function le(i,e,l){const t=i.slice();return t[13]=e[l],t}function it(i){let e,l,t="All devices",a,r,o,s,n;return a=new Ee({props:{devices:i[4]}}),{c(){e=S("select"),l=S("option"),l.textContent=t,$(a.$$.fragment),this.h()},l(f){e=w(f,"SELECT",{class:!0,id:!0,form:!0});var u=E(e);l=w(u,"OPTION",{"data-svelte-h":!0}),Se(l)!=="svelte-lc7nb8"&&(l.textContent=t),v(a.$$.fragment,u),u.forEach(h),this.h()},h(){l.__value="",D(l,l.__value),p(e,"class",r=i[16]+" cursor-pointer"),p(e,"id","control-serial"),p(e,"form","custom-form"),i[1]===void 0&&$e(()=>i[10].call(e))},m(f,u){g(f,e,u),F(e,l),k(a,e,null),J(e,i[1],!0),o=!0,s||(n=pe(e,"change",i[10]),s=!0)},p(f,u){const _={};u&16&&(_.devices=f[4]),a.$set(_),(!o||u&65536&&r!==(r=f[16]+" cursor-pointer"))&&p(e,"class",r),u&2&&J(e,f[1])},i(f){o||(d(a.$$.fragment,f),o=!0)},o(f){b(a.$$.fragment,f),o=!1},d(f){f&&h(e),y(a),s=!1,n()}}}function ne(i){let e,l;return e=new V({props:{label:"Power",$$slots:{default:[ft]},$$scope:{ctx:i}}}),{c(){$(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,a){k(e,t,a),l=!0},p(t,a){const r={};a&131074&&(r.$$scope={dirty:a,ctx:t}),e.$set(r)},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){y(e,t)}}}function ft(i){let e,l;return e=new Be({props:{serial:i[1]}}),{c(){$(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,a){k(e,t,a),l=!0},p(t,a){const r={};a&2&&(r.serial=t[1]),e.$set(r)},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){y(e,t)}}}function re(i,e){let l,t,a,r;function o(n){e[11](n)}let s={schema:e[13]};return e[0]!==void 0&&(s.selectedType=e[0]),t=new ot({props:s}),ke.push(()=>Te(t,"selectedType",o)),{key:i,first:null,c(){l=T(),$(t.$$.fragment),this.h()},l(n){l=T(),v(t.$$.fragment,n),this.h()},h(){this.first=l},m(n,f){g(n,l,f),k(t,n,f),r=!0},p(n,f){e=n;const u={};!a&&f&1&&(a=!0,u.selectedType=e[0],ye(()=>a=!1)),t.$set(u)},i(n){r||(d(t.$$.fragment,n),r=!0)},o(n){b(t.$$.fragment,n),r=!1},d(n){n&&h(l),y(t,n)}}}function ut(i){let e=[],l=new Map,t,a,r=N(U);const o=s=>s[13].properties.type.const;for(let s=0;s<r.length;s+=1){let n=le(i,r,s),f=o(n);l.set(f,e[s]=re(f,n))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();t=T()},l(s){for(let n=0;n<e.length;n+=1)e[n].l(s);t=T()},m(s,n){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(s,n);g(s,t,n),a=!0},p(s,n){n&1&&(r=N(U),R(),e=he(e,n,o,1,s,r,l,t.parentNode,de,re,t,le),H())},i(s){if(!a){for(let n=0;n<r.length;n+=1)d(e[n]);a=!0}},o(s){for(let n=0;n<e.length;n+=1)b(e[n]);a=!1},d(s){s&&h(t);for(let n=0;n<e.length;n+=1)e[n].d(s)}}}function se(i){var t;let e,l;return e=new et({props:{schema:i[2],state:(t=i[3])==null?void 0:t.state}}),{c(){$(e.$$.fragment)},l(a){v(e.$$.fragment,a)},m(a,r){k(e,a,r),l=!0},p(a,r){var s;const o={};r&4&&(o.schema=a[2]),r&8&&(o.state=(s=a[3])==null?void 0:s.state),e.$set(o)},i(a){l||(d(e.$$.fragment,a),l=!0)},o(a){b(e.$$.fragment,a),l=!1},d(a){y(e,a)}}}function ct(i){let e=i[0],l,t,a,r=se(i);return t=new Ce({props:{loading:i[12]}}),{c(){r.c(),l=A(),$(t.$$.fragment)},l(o){r.l(o),l=I(o),v(t.$$.fragment,o)},m(o,s){r.m(o,s),g(o,l,s),k(t,o,s),a=!0},p(o,s){s&1&&O(e,e=o[0])?(R(),b(r,1,1,ve),H(),r=se(o),r.c(),d(r,1),r.m(l.parentNode,l)):r.p(o,s);const n={};s&4096&&(n.loading=o[12]),t.$set(n)},i(o){a||(d(r),d(t.$$.fragment,o),a=!0)},o(o){b(r),b(t.$$.fragment,o),a=!1},d(o){o&&h(l),r.d(o),y(t,o)}}}function _t(i){var L,j;let e,l,t,a=!i[3]||((j=(L=i[3])==null?void 0:L.connection)==null?void 0:j.includes("android")),r,o,s,n,f,u;l=new V({props:{for:"control-serial",label:"Device",$$slots:{default:[it,({inputClassName:c})=>({16:c}),({inputClassName:c})=>c?65536:0]},$$scope:{ctx:i}}});let _=a&&ne(i);return s=new Ue({props:{$$slots:{default:[ut]},$$scope:{ctx:i}}}),f=new Ne({props:{id:"custom-form",class:"flex flex-col gap-y-4 px-2",role:"tabpanel",action:"/api/device/state/"+i[1],onSubmit:i[7],$$slots:{default:[ct,({loading:c})=>({12:c}),({loading:c})=>c?4096:0]},$$scope:{ctx:i}}}),{c(){e=S("div"),$(l.$$.fragment),t=A(),_&&_.c(),r=A(),o=S("nav"),$(s.$$.fragment),n=A(),$(f.$$.fragment),this.h()},l(c){e=w(c,"DIV",{class:!0});var m=E(e);v(l.$$.fragment,m),t=I(m),_&&_.l(m),m.forEach(h),r=I(c),o=w(c,"NAV",{class:!0});var q=E(o);v(s.$$.fragment,q),q.forEach(h),n=I(c),v(f.$$.fragment,c),this.h()},h(){p(e,"class","flex flex-col gap-y-4 px-2 mb-4"),p(o,"class","mb-6")},m(c,m){g(c,e,m),k(l,e,null),F(e,t),_&&_.m(e,null),g(c,r,m),g(c,o,m),k(s,o,null),g(c,n,m),k(f,c,m),u=!0},p(c,[m]){var W,K;const q={};m&196626&&(q.$$scope={dirty:m,ctx:c}),l.$set(q),m&8&&(a=!c[3]||((K=(W=c[3])==null?void 0:W.connection)==null?void 0:K.includes("android"))),a?_?(_.p(c,m),m&8&&d(_,1)):(_=ne(c),_.c(),d(_,1),_.m(e,null)):_&&(R(),b(_,1,1,()=>{_=null}),H());const B={};m&131073&&(B.$$scope={dirty:m,ctx:c}),s.$set(B);const M={};m&2&&(M.action="/api/device/state/"+c[1]),m&135181&&(M.$$scope={dirty:m,ctx:c}),f.$set(M)},i(c){u||(d(l.$$.fragment,c),d(_),d(s.$$.fragment,c),d(f.$$.fragment,c),u=!0)},o(c){b(l.$$.fragment,c),b(_),b(s.$$.fragment,c),b(f.$$.fragment,c),u=!1},d(c){c&&(h(e),h(r),h(o),h(n)),y(l),_&&_.d(),y(s),y(f,c)}}}function mt(i,e,l){let t,a,r,o,{data:s}=e;const{state:n}=qe();G(i,n,m=>l(9,r=m));const f=Oe(n);G(i,f,m=>l(4,o=m));let u="BLANK",_=s.defaultSerial||"";async function L(m,q){const B=Object.fromEntries(m);await Fe(q.toString(),{...B,type:u})}function j(){_=we(this),l(1,_)}function c(m){u=m,l(0,u)}return i.$$set=m=>{"data"in m&&l(8,s=m.data)},i.$$.update=()=>{i.$$.dirty&514&&l(3,t=r.get(_)),i.$$.dirty&1&&l(2,a=U.find(m=>m.properties.type.const===u))},[u,_,a,t,o,n,f,L,s,r,j,c]}class Ct extends P{constructor(e){super(),z(this,e,mt,_t,O,{data:8})}}export{Ct as component,Et as universal};
