import{s as L,b as U,n as H}from"../chunks/scheduler.fd4d87b3.js";import{S as V,i as j,k as h,l as g,m as v,t as b,a as C,n as w,s as T,b as P,j as _,d as p,e as x,c as E,p as y,f as i,B as q,u as I,C as O,g as S}from"../chunks/index.64515c27.js";import{R as K,D as X}from"../chunks/DeviceOptions.b118da36.js";import{H as z}from"../chunks/HorizontalField.160b8ef4.js";import{V as G}from"../chunks/VerticalField.f39dd869.js";import{F as J}from"../chunks/Form.09dfc92a.js";import{g as M,s as Q,a as W}from"../chunks/4.edd4c780.js";function Y(a){let e,r;return{c(){e=x("textarea"),this.h()},l(s){e=E(s,"TEXTAREA",{class:!0,id:!0,name:!0,rows:!0,placeholder:!0}),y(e).forEach(p),this.h()},h(){i(e,"class",r=a[6]),e.required=!0,i(e,"id","control-text"),i(e,"name","text"),i(e,"rows","10"),i(e,"placeholder"," Apple \r Banana \r Carrot")},m(s,o){_(s,e,o)},p(s,o){o&64&&r!==(r=s[6])&&i(e,"class",r)},d(s){s&&p(e)}}}function Z(a){let e;return{c(){e=x("input"),this.h()},l(r){e=E(r,"INPUT",{id:!0,name:!0,type:!0}),this.h()},h(){i(e,"id","control-color"),i(e,"name","backgroundColor"),i(e,"type","color"),e.value="#ffffff"},m(r,s){_(r,e,s)},p:H,d(r){r&&p(e)}}}function ee(a){let e,r,s,o;return r=new X({props:{devices:a[1]}}),{c(){e=x("select"),h(r.$$.fragment),this.h()},l(n){e=E(n,"SELECT",{name:!0,id:!0,class:!0});var l=y(e);g(r.$$.fragment,l),l.forEach(p),this.h()},h(){e.multiple=!0,i(e,"name","device"),i(e,"id","control-serial"),i(e,"class",s=a[6])},m(n,l){_(n,e,l),v(r,e,null),q(e,a[0]),o=!0},p(n,l){const c={};l&2&&(c.devices=n[1]),r.$set(c),(!o||l&64&&s!==(s=n[6]))&&i(e,"class",s),(!o||l&1)&&q(e,n[0])},i(n){o||(b(r.$$.fragment,n),o=!0)},o(n){C(r.$$.fragment,n),o=!1},d(n){n&&p(e),w(r)}}}function te(a){let e,r,s="Ignore",o,n="Blank",l,c="Off",u;return{c(){e=x("select"),r=x("option"),r.textContent=s,o=x("option"),o.textContent=n,l=x("option"),l.textContent=c,this.h()},l($){e=E($,"SELECT",{id:!0,name:!0,class:!0});var m=y(e);r=E(m,"OPTION",{"data-svelte-h":!0}),I(r)!=="svelte-u6vf1u"&&(r.textContent=s),o=E(m,"OPTION",{"data-svelte-h":!0}),I(o)!=="svelte-1u68x92"&&(o.textContent=n),l=E(m,"OPTION",{"data-svelte-h":!0}),I(l)!=="svelte-14ilfoc"&&(l.textContent=c),m.forEach(p),this.h()},h(){r.__value="ignore",O(r,r.__value),o.__value="blank",O(o,o.__value),l.__value="off",O(l,l.__value),i(e,"id","control-rest"),i(e,"name","rest"),i(e,"class",u=a[6])},m($,m){_($,e,m),S(e,r),S(e,o),S(e,l)},p($,m){m&64&&u!==(u=$[6])&&i(e,"class",u)},d($){$&&p(e)}}}function se(a){let e;return{c(){e=x("input"),this.h()},l(r){e=E(r,"INPUT",{id:!0,name:!0,type:!0}),this.h()},h(){i(e,"id","control-delay"),i(e,"name","delay"),i(e,"type","number"),e.value="0"},m(r,s){_(r,e,s)},p:H,d(r){r&&p(e)}}}function re(a){let e,r,s,o,n,l,c,u,$,m,d,k;return e=new G({props:{for:"control-text",label:"Text",$$slots:{default:[Y,({inputClassName:t})=>({6:t}),({inputClassName:t})=>t?64:0]},$$scope:{ctx:a}}}),s=new z({props:{for:"control-color",label:"Background Color",$$slots:{default:[Z]},$$scope:{ctx:a}}}),n=new z({props:{for:"control-serial",label:"Devices",$$slots:{default:[ee,({inputClassName:t})=>({6:t}),({inputClassName:t})=>t?64:0]},$$scope:{ctx:a}}}),c=new z({props:{for:"control-rest",label:"Remaining Cells",$$slots:{default:[te,({inputClassName:t})=>({6:t}),({inputClassName:t})=>t?64:0]},$$scope:{ctx:a}}}),$=new z({props:{for:"control-delay",label:"Update delay",$$slots:{default:[se]},$$scope:{ctx:a}}}),d=new K({props:{loading:a[5]}}),{c(){h(e.$$.fragment),r=T(),h(s.$$.fragment),o=T(),h(n.$$.fragment),l=T(),h(c.$$.fragment),u=T(),h($.$$.fragment),m=T(),h(d.$$.fragment)},l(t){g(e.$$.fragment,t),r=P(t),g(s.$$.fragment,t),o=P(t),g(n.$$.fragment,t),l=P(t),g(c.$$.fragment,t),u=P(t),g($.$$.fragment,t),m=P(t),g(d.$$.fragment,t)},m(t,f){v(e,t,f),_(t,r,f),v(s,t,f),_(t,o,f),v(n,t,f),_(t,l,f),v(c,t,f),_(t,u,f),v($,t,f),_(t,m,f),v(d,t,f),k=!0},p(t,f){const N={};f&192&&(N.$$scope={dirty:f,ctx:t}),e.$set(N);const R={};f&128&&(R.$$scope={dirty:f,ctx:t}),s.$set(R);const A={};f&195&&(A.$$scope={dirty:f,ctx:t}),n.$set(A);const B={};f&192&&(B.$$scope={dirty:f,ctx:t}),c.$set(B);const F={};f&128&&(F.$$scope={dirty:f,ctx:t}),$.$set(F);const D={};f&32&&(D.loading=t[5]),d.$set(D)},i(t){k||(b(e.$$.fragment,t),b(s.$$.fragment,t),b(n.$$.fragment,t),b(c.$$.fragment,t),b($.$$.fragment,t),b(d.$$.fragment,t),k=!0)},o(t){C(e.$$.fragment,t),C(s.$$.fragment,t),C(n.$$.fragment,t),C(c.$$.fragment,t),C($.$$.fragment,t),C(d.$$.fragment,t),k=!1},d(t){t&&(p(r),p(o),p(l),p(u),p(m)),w(e,t),w(s,t),w(n,t),w(c,t),w($,t),w(d,t)}}}function oe(a){let e,r;return e=new J({props:{class:"flex flex-col gap-y-4",action:"/api/action/text",onSubmit:ne,$$slots:{default:[re,({loading:s})=>({5:s}),({loading:s})=>s?32:0]},$$scope:{ctx:a}}}),{c(){h(e.$$.fragment)},l(s){g(e.$$.fragment,s)},m(s,o){v(e,s,o),r=!0},p(s,[o]){const n={};o&163&&(n.$$scope={dirty:o,ctx:s}),e.$set(n)},i(s){r||(b(e.$$.fragment,s),r=!0)},o(s){C(e.$$.fragment,s),r=!1},d(s){w(e,s)}}}async function ne(a,e){const r=a.get("backgroundColor");r!=="#ffffff"&&e.searchParams.set("backgroundColor",r),e.searchParams.set("rest",a.get("rest")),e.searchParams.set("delay",a.get("delay")),a.getAll("device").forEach(s=>{e.searchParams.append("device",s)});try{const s=await fetch(e.toString(),{method:"post",headers:{"content-type":"text/plain"},body:a.get("text")});if(!s.ok)throw new Error(s.statusText)}catch(s){throw console.error(s),s}}function ae(a,e,r){let s,o;const{state:n}=M(),l=Q(n);U(a,l,u=>r(1,o=u));const c=W(n);return U(a,c,u=>r(0,s=u)),[s,o,l,c]}class pe extends V{constructor(e){super(),j(this,e,ae,oe,L,{})}}export{pe as component};
