import{s as J,l as K,n as M,r as R,o as W}from"../chunks/scheduler.fd4d87b3.js";import{S as z,i as V,s as y,e as p,h as G,d as g,b as w,c as _,p as I,u as B,f as r,j as P,g as i,C as F,z as T,K as X}from"../chunks/index.64515c27.js";import{p as Y,f as U,g as H}from"../chunks/state-socket.b0f23eaa.js";import{d as j,w as Q}from"../chunks/index.5159c792.js";import"../chunks/web.85761f5a.js";const Z=!0,$=Z,ee=new Set(["BLANK","TEXT","IMAGE","WEB","CLOCK","BUSY"]),te=async({url:a})=>({id:a.searchParams.get("id")||"",autoJoin:a.searchParams.has("autojoin")}),fe=Object.freeze(Object.defineProperty({__proto__:null,load:te},Symbol.toStringTag,{value:"Module"}));function D(){const a=Q({active:!1});return{state:a,active:j(a,s=>s.active),error:j(a,s=>s.error)}}function se(){const a=new AbortController,{state:s,...n}=D();async function e(){try{await document.documentElement.requestFullscreen().then(()=>s.set({active:!0}),t=>s.set({active:!1,error:t})),s.set({active:!0})}catch(t){if(t instanceof Error)s.set({active:!1,error:t});else throw t}}return e(),document.addEventListener("fullscreenchange",()=>{s.set({active:!!document.fullscreenElement})},a),{...n,async release(){a.abort(),await document.exitFullscreen()}}}function ae(){if("wakeLock"in navigator){let a=function(){n!==null&&document.visibilityState==="visible"&&f()};const s=new AbortController;let n;const{state:e,...t}=D();async function f(){try{n=await navigator.wakeLock.request("screen"),e.set({active:!0}),n.addEventListener("release",()=>{e.set({active:!1})},s)}catch(u){if(u instanceof DOMException)e.set({active:!1,error:u});else throw u}}return f(),document.addEventListener("visibilitychange",a,s),document.addEventListener("fullscreenchange",a,s),{...t,async release(){s.abort(),await(n==null?void 0:n.release())}}}else return}function ne(a){let s,n,e,t,f,u,l,C="Cell ID",S,o,L,m,d,k="Reset",x,v,O="Join",q,A;return{c(){s=y(),n=p("div"),e=p("form"),t=p("img"),u=y(),l=p("label"),l.textContent=C,S=y(),o=p("input"),L=y(),m=p("div"),d=p("button"),d.textContent=k,x=y(),v=p("button"),v.textContent=O,this.h()},l(c){G("svelte-1rqvp1e",document.head).forEach(g),s=w(c),n=_(c,"DIV",{class:!0});var N=I(n);e=_(N,"FORM",{action:!0,method:!0,class:!0});var h=I(e);t=_(h,"IMG",{src:!0,alt:!0,width:!0,height:!0}),u=w(h),l=_(h,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),B(l)!=="svelte-10tqeo"&&(l.textContent=C),S=w(h),o=_(h,"INPUT",{id:!0,name:!0,type:!0,class:!0}),L=w(h),m=_(h,"DIV",{class:!0});var E=I(m);d=_(E,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),B(d)!=="svelte-1if3dms"&&(d.textContent=k),x=w(E),v=_(E,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),B(v)!=="svelte-19tnfmz"&&(v.textContent=O),E.forEach(g),h.forEach(g),N.forEach(g),this.h()},h(){document.title="New Cell | CellWall",K(t.src,f="/logo.png")||r(t,"src",f),r(t,"alt",""),r(t,"width","48"),r(t,"height","48"),r(l,"for","control-id"),r(l,"class","svelte-1n83scs"),r(o,"id","control-id"),r(o,"name","id"),r(o,"type","text"),o.required=!0,r(o,"class","svelte-1n83scs"),r(d,"type","reset"),r(d,"class","svelte-1n83scs"),r(v,"type","submit"),r(v,"class","svelte-1n83scs"),r(m,"class","buttons svelte-1n83scs"),r(e,"action","/cell/frame/blank"),r(e,"method","get"),r(e,"class","svelte-1n83scs"),r(n,"class","fill center wrapper")},m(c,b){P(c,s,b),P(c,n,b),i(n,e),i(e,t),i(e,u),i(e,l),i(e,S),i(e,o),F(o,a[0]),i(e,L),i(e,m),i(m,d),i(m,x),i(m,v),q||(A=[T(o,"input",a[3]),T(d,"click",re),T(e,"submit",X(a[1]))],q=!0)},p(c,[b]){b&1&&o.value!==c[0]&&F(o,c[0])},i:M,o:M,d(c){c&&(g(s),g(n)),q=!1,R(A)}}}function re(){localStorage.removeItem("id")}function le(a,s,n){let{data:e}=s,t=e.id||"";W(()=>{if(!t){const l=localStorage.getItem("id");l&&n(0,t=l)}});async function f(){localStorage.setItem("id",t),se(),ae();const l=Y(...Array.from(ee,C=>U(C,t)));await H(U("BLANK",t),{replaceState:!1}),await l}function u(){t=this.value,n(0,t)}return a.$$set=l=>{"data"in l&&n(2,e=l.data)},a.$$.update=()=>{a.$$.dirty&4&&e.autoJoin&&$&&f()},[t,f,e,u]}class me extends z{constructor(s){super(),V(this,s,le,ne,J,{data:2})}}export{me as component,fe as universal};
