import{S as L,i as V,s as K,w as h,x as g,y as v,q as b,o as w,B as E,W as D,k as O,m as x,g as d,d as u,e as T,c as C,a as I,b as f,E as H,ai as U,t as S,h as y,M as z}from"../../chunks/index-629ae59a.js";import{R as M,D as W}from"../../chunks/DeviceOptions-d64a21b5.js";import{H as P}from"../../chunks/HorizontalField-0cec1cbf.js";import{V as X}from"../../chunks/VerticalField-5b0645a0.js";import{F as j}from"../../chunks/Form-260ec5a6.js";import{g as G,s as J,a as Q}from"../../chunks/__layout-a0c70fc0.js";import"../../chunks/Label-756fd465.js";import"../../chunks/snackbar-host-7ef2e025.js";import"../../chunks/web-75f832b0.js";import"../../chunks/index-6cd92273.js";import"../../chunks/TopBar-c38e5fcd.js";import"../../chunks/index-2813b233.js";function Y(n){let e,r;return{c(){e=T("textarea"),this.h()},l(s){e=C(s,"TEXTAREA",{class:!0,id:!0,name:!0,rows:!0,placeholder:!0}),I(e).forEach(u),this.h()},h(){f(e,"class",r=n[6]),e.required=!0,f(e,"id","control-text"),f(e,"name","text"),f(e,"rows","10"),f(e,"placeholder"," Apple \r Banana \r Carrot")},m(s,o){d(s,e,o)},p(s,o){o&64&&r!==(r=s[6])&&f(e,"class",r)},d(s){s&&u(e)}}}function Z(n){let e;return{c(){e=T("input"),this.h()},l(r){e=C(r,"INPUT",{id:!0,name:!0,type:!0}),this.h()},h(){f(e,"id","control-color"),f(e,"name","backgroundColor"),f(e,"type","color"),e.value="#ffffff"},m(r,s){d(r,e,s)},p:H,d(r){r&&u(e)}}}function ee(n){let e,r,s,o;return r=new W({props:{devices:n[1]}}),{c(){e=T("select"),h(r.$$.fragment),this.h()},l(a){e=C(a,"SELECT",{name:!0,id:!0,class:!0});var l=I(e);g(r.$$.fragment,l),l.forEach(u),this.h()},h(){e.multiple=!0,f(e,"name","device"),f(e,"id","control-serial"),f(e,"class",s=n[6])},m(a,l){d(a,e,l),v(r,e,null),U(e,n[0]),o=!0},p(a,l){const c={};l&2&&(c.devices=a[1]),r.$set(c),(!o||l&64&&s!==(s=a[6]))&&f(e,"class",s),(!o||l&1)&&U(e,a[0])},i(a){o||(b(r.$$.fragment,a),o=!0)},o(a){w(r.$$.fragment,a),o=!1},d(a){a&&u(e),E(r)}}}function te(n){let e,r,s,o,a,l,c,m;return{c(){e=T("select"),r=T("option"),s=S("Ignore"),o=T("option"),a=S("Blank"),l=T("option"),c=S("Off"),this.h()},l($){e=C($,"SELECT",{id:!0,name:!0,class:!0});var p=I(e);r=C(p,"OPTION",{});var _=I(r);s=y(_,"Ignore"),_.forEach(u),o=C(p,"OPTION",{});var k=I(o);a=y(k,"Blank"),k.forEach(u),l=C(p,"OPTION",{});var t=I(l);c=y(t,"Off"),t.forEach(u),p.forEach(u),this.h()},h(){r.__value="ignore",r.value=r.__value,o.__value="blank",o.value=o.__value,l.__value="off",l.value=l.__value,f(e,"id","control-rest"),f(e,"name","rest"),f(e,"class",m=n[6])},m($,p){d($,e,p),z(e,r),z(r,s),z(e,o),z(o,a),z(e,l),z(l,c)},p($,p){p&64&&m!==(m=$[6])&&f(e,"class",m)},d($){$&&u(e)}}}function se(n){let e;return{c(){e=T("input"),this.h()},l(r){e=C(r,"INPUT",{id:!0,name:!0,type:!0}),this.h()},h(){f(e,"id","control-delay"),f(e,"name","delay"),f(e,"type","number"),e.value="0"},m(r,s){d(r,e,s)},p:H,d(r){r&&u(e)}}}function re(n){let e,r,s,o,a,l,c,m,$,p,_,k;return e=new X({props:{for:"control-text",label:"Text",$$slots:{default:[Y,({inputClassName:t})=>({6:t}),({inputClassName:t})=>t?64:0]},$$scope:{ctx:n}}}),s=new P({props:{for:"control-color",label:"Background Color",$$slots:{default:[Z]},$$scope:{ctx:n}}}),a=new P({props:{for:"control-serial",label:"Devices",$$slots:{default:[ee,({inputClassName:t})=>({6:t}),({inputClassName:t})=>t?64:0]},$$scope:{ctx:n}}}),c=new P({props:{for:"control-rest",label:"Remaining Cells",$$slots:{default:[te,({inputClassName:t})=>({6:t}),({inputClassName:t})=>t?64:0]},$$scope:{ctx:n}}}),$=new P({props:{for:"control-delay",label:"Update delay",$$slots:{default:[se]},$$scope:{ctx:n}}}),_=new M({props:{loading:n[5]}}),{c(){h(e.$$.fragment),r=O(),h(s.$$.fragment),o=O(),h(a.$$.fragment),l=O(),h(c.$$.fragment),m=O(),h($.$$.fragment),p=O(),h(_.$$.fragment)},l(t){g(e.$$.fragment,t),r=x(t),g(s.$$.fragment,t),o=x(t),g(a.$$.fragment,t),l=x(t),g(c.$$.fragment,t),m=x(t),g($.$$.fragment,t),p=x(t),g(_.$$.fragment,t)},m(t,i){v(e,t,i),d(t,r,i),v(s,t,i),d(t,o,i),v(a,t,i),d(t,l,i),v(c,t,i),d(t,m,i),v($,t,i),d(t,p,i),v(_,t,i),k=!0},p(t,i){const B={};i&192&&(B.$$scope={dirty:i,ctx:t}),e.$set(B);const N={};i&128&&(N.$$scope={dirty:i,ctx:t}),s.$set(N);const R={};i&195&&(R.$$scope={dirty:i,ctx:t}),a.$set(R);const F={};i&192&&(F.$$scope={dirty:i,ctx:t}),c.$set(F);const q={};i&128&&(q.$$scope={dirty:i,ctx:t}),$.$set(q);const A={};i&32&&(A.loading=t[5]),_.$set(A)},i(t){k||(b(e.$$.fragment,t),b(s.$$.fragment,t),b(a.$$.fragment,t),b(c.$$.fragment,t),b($.$$.fragment,t),b(_.$$.fragment,t),k=!0)},o(t){w(e.$$.fragment,t),w(s.$$.fragment,t),w(a.$$.fragment,t),w(c.$$.fragment,t),w($.$$.fragment,t),w(_.$$.fragment,t),k=!1},d(t){E(e,t),t&&u(r),E(s,t),t&&u(o),E(a,t),t&&u(l),E(c,t),t&&u(m),E($,t),t&&u(p),E(_,t)}}}function oe(n){let e,r;return e=new j({props:{class:"flex flex-col gap-y-4",action:"/api/action/text",onSubmit:ae,$$slots:{default:[re,({loading:s})=>({5:s}),({loading:s})=>s?32:0]},$$scope:{ctx:n}}}),{c(){h(e.$$.fragment)},l(s){g(e.$$.fragment,s)},m(s,o){v(e,s,o),r=!0},p(s,[o]){const a={};o&163&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){r||(b(e.$$.fragment,s),r=!0)},o(s){w(e.$$.fragment,s),r=!1},d(s){E(e,s)}}}async function ae(n,e){const r=n.get("backgroundColor");r!=="#ffffff"&&e.searchParams.set("backgroundColor",r),e.searchParams.set("rest",n.get("rest")),e.searchParams.set("delay",n.get("delay"));try{const s=await fetch(e.toString(),{method:"post",headers:{"content-type":"text/plain"},body:n.get("text")});if(!s.ok)throw new Error(s.statusText)}catch(s){throw console.error(s),s}}function ne(n,e,r){let s,o;const{state:a}=G(),l=J(a);D(n,l,m=>r(1,o=m));const c=Q(a);return D(n,c,m=>r(0,s=m)),[s,o,l,c]}class ve extends L{constructor(e){super(),V(this,e,ne,oe,K,{})}}export{ve as default};
