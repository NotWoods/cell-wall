import{S as L,i as V,s as K,w as h,x as g,y as v,q as b,o as E,B as w,W as D,k as O,m as P,g as d,d as m,e as T,c as C,a as I,b as f,E as H,ai as U,t as S,h as y,M as z}from"../../chunks/index-629ae59a.js";import{R as M,D as W}from"../../chunks/DeviceOptions-d64a21b5.js";import{H as x}from"../../chunks/HorizontalField-0cec1cbf.js";import{V as X}from"../../chunks/VerticalField-5b0645a0.js";import{F as j}from"../../chunks/Form-260ec5a6.js";import{g as G,s as J,a as Q}from"../../chunks/__layout-a0c70fc0.js";import"../../chunks/Label-756fd465.js";import"../../chunks/snackbar-host-7ef2e025.js";import"../../chunks/web-75f832b0.js";import"../../chunks/index-6cd92273.js";import"../../chunks/TopBar-c38e5fcd.js";import"../../chunks/index-2813b233.js";function Y(l){let e,r;return{c(){e=T("textarea"),this.h()},l(s){e=C(s,"TEXTAREA",{class:!0,id:!0,name:!0,rows:!0,placeholder:!0}),I(e).forEach(m),this.h()},h(){f(e,"class",r=l[6]),e.required=!0,f(e,"id","control-text"),f(e,"name","text"),f(e,"rows","10"),f(e,"placeholder"," Apple \r Banana \r Carrot")},m(s,o){d(s,e,o)},p(s,o){o&64&&r!==(r=s[6])&&f(e,"class",r)},d(s){s&&m(e)}}}function Z(l){let e;return{c(){e=T("input"),this.h()},l(r){e=C(r,"INPUT",{id:!0,name:!0,type:!0}),this.h()},h(){f(e,"id","control-color"),f(e,"name","backgroundColor"),f(e,"type","color"),e.value="#ffffff"},m(r,s){d(r,e,s)},p:H,d(r){r&&m(e)}}}function ee(l){let e,r,s,o;return r=new W({props:{devices:l[1]}}),{c(){e=T("select"),h(r.$$.fragment),this.h()},l(a){e=C(a,"SELECT",{name:!0,id:!0,class:!0});var n=I(e);g(r.$$.fragment,n),n.forEach(m),this.h()},h(){e.multiple=!0,f(e,"name","device"),f(e,"id","control-serial"),f(e,"class",s=l[6])},m(a,n){d(a,e,n),v(r,e,null),U(e,l[0]),o=!0},p(a,n){const c={};n&2&&(c.devices=a[1]),r.$set(c),(!o||n&64&&s!==(s=a[6]))&&f(e,"class",s),(!o||n&1)&&U(e,a[0])},i(a){o||(b(r.$$.fragment,a),o=!0)},o(a){E(r.$$.fragment,a),o=!1},d(a){a&&m(e),w(r)}}}function te(l){let e,r,s,o,a,n,c,u;return{c(){e=T("select"),r=T("option"),s=S("Ignore"),o=T("option"),a=S("Blank"),n=T("option"),c=S("Off"),this.h()},l($){e=C($,"SELECT",{id:!0,name:!0,class:!0});var p=I(e);r=C(p,"OPTION",{});var _=I(r);s=y(_,"Ignore"),_.forEach(m),o=C(p,"OPTION",{});var k=I(o);a=y(k,"Blank"),k.forEach(m),n=C(p,"OPTION",{});var t=I(n);c=y(t,"Off"),t.forEach(m),p.forEach(m),this.h()},h(){r.__value="ignore",r.value=r.__value,o.__value="blank",o.value=o.__value,n.__value="off",n.value=n.__value,f(e,"id","control-rest"),f(e,"name","rest"),f(e,"class",u=l[6])},m($,p){d($,e,p),z(e,r),z(r,s),z(e,o),z(o,a),z(e,n),z(n,c)},p($,p){p&64&&u!==(u=$[6])&&f(e,"class",u)},d($){$&&m(e)}}}function se(l){let e;return{c(){e=T("input"),this.h()},l(r){e=C(r,"INPUT",{id:!0,name:!0,type:!0}),this.h()},h(){f(e,"id","control-delay"),f(e,"name","delay"),f(e,"type","number"),e.value="0"},m(r,s){d(r,e,s)},p:H,d(r){r&&m(e)}}}function re(l){let e,r,s,o,a,n,c,u,$,p,_,k;return e=new X({props:{for:"control-text",label:"Text",$$slots:{default:[Y,({inputClassName:t})=>({6:t}),({inputClassName:t})=>t?64:0]},$$scope:{ctx:l}}}),s=new x({props:{for:"control-color",label:"Background Color",$$slots:{default:[Z]},$$scope:{ctx:l}}}),a=new x({props:{for:"control-serial",label:"Devices",$$slots:{default:[ee,({inputClassName:t})=>({6:t}),({inputClassName:t})=>t?64:0]},$$scope:{ctx:l}}}),c=new x({props:{for:"control-rest",label:"Remaining Cells",$$slots:{default:[te,({inputClassName:t})=>({6:t}),({inputClassName:t})=>t?64:0]},$$scope:{ctx:l}}}),$=new x({props:{for:"control-delay",label:"Update delay",$$slots:{default:[se]},$$scope:{ctx:l}}}),_=new M({props:{loading:l[5]}}),{c(){h(e.$$.fragment),r=O(),h(s.$$.fragment),o=O(),h(a.$$.fragment),n=O(),h(c.$$.fragment),u=O(),h($.$$.fragment),p=O(),h(_.$$.fragment)},l(t){g(e.$$.fragment,t),r=P(t),g(s.$$.fragment,t),o=P(t),g(a.$$.fragment,t),n=P(t),g(c.$$.fragment,t),u=P(t),g($.$$.fragment,t),p=P(t),g(_.$$.fragment,t)},m(t,i){v(e,t,i),d(t,r,i),v(s,t,i),d(t,o,i),v(a,t,i),d(t,n,i),v(c,t,i),d(t,u,i),v($,t,i),d(t,p,i),v(_,t,i),k=!0},p(t,i){const B={};i&192&&(B.$$scope={dirty:i,ctx:t}),e.$set(B);const N={};i&128&&(N.$$scope={dirty:i,ctx:t}),s.$set(N);const R={};i&195&&(R.$$scope={dirty:i,ctx:t}),a.$set(R);const A={};i&192&&(A.$$scope={dirty:i,ctx:t}),c.$set(A);const F={};i&128&&(F.$$scope={dirty:i,ctx:t}),$.$set(F);const q={};i&32&&(q.loading=t[5]),_.$set(q)},i(t){k||(b(e.$$.fragment,t),b(s.$$.fragment,t),b(a.$$.fragment,t),b(c.$$.fragment,t),b($.$$.fragment,t),b(_.$$.fragment,t),k=!0)},o(t){E(e.$$.fragment,t),E(s.$$.fragment,t),E(a.$$.fragment,t),E(c.$$.fragment,t),E($.$$.fragment,t),E(_.$$.fragment,t),k=!1},d(t){w(e,t),t&&m(r),w(s,t),t&&m(o),w(a,t),t&&m(n),w(c,t),t&&m(u),w($,t),t&&m(p),w(_,t)}}}function oe(l){let e,r;return e=new j({props:{class:"flex flex-col gap-y-4",action:"/api/action/text",onSubmit:ae,$$slots:{default:[re,({loading:s})=>({5:s}),({loading:s})=>s?32:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},l(s){g(e.$$.fragment,s)},m(s,o){v(e,s,o),r=!0},p(s,[o]){const a={};o&163&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){r||(b(e.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),r=!1},d(s){w(e,s)}}}async function ae(l,e){const r=l.get("backgroundColor");r!=="#ffffff"&&e.searchParams.set("backgroundColor",r),e.searchParams.set("rest",l.get("rest")),e.searchParams.set("delay",l.get("delay")),l.getAll("device").forEach(s=>{e.searchParams.append("device",s)});try{const s=await fetch(e.toString(),{method:"post",headers:{"content-type":"text/plain"},body:l.get("text")});if(!s.ok)throw new Error(s.statusText)}catch(s){throw console.error(s),s}}function le(l,e,r){let s,o;const{state:a}=G(),n=J(a);D(l,n,u=>r(1,o=u));const c=Q(a);return D(l,c,u=>r(0,s=u)),[s,o,n,c]}class ve extends L{constructor(e){super(),V(this,e,le,oe,K,{})}}export{ve as default};
