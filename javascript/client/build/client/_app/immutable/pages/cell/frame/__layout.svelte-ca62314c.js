import{S as g,i as b,s as $,O as w,P as E,a as h,d as f,b as _,g as m,M as O,l as y,E as v,v as L,Q as R,F as U,I as z,e as M,c as P,J as T,K as A,L as B,q as d,R as J,T as Q,o as p,U as W,V as G,w as V,x as j,y as F,B as K,k as S,N as H,m as C,p as X,W as Y,r as Z,n as x}from"../../../chunks/index-629ae59a.js";import{c as ee,a as te,s as se,f as re,g as ne}from"../../../chunks/state-socket-b8e35e3e.js";import{r as oe}from"../../../chunks/index-6cd92273.js";import{q as ae,f as le}from"../../../chunks/index-2813b233.js";import"../../../chunks/web-75f832b0.js";import{r as ie}from"../../../chunks/random-ca7fbb84.js";import"../../../chunks/singletons-d1fb5791.js";function I(n){let e,s,t;return{c(){e=w("svg"),s=w("path"),this.h()},l(r){e=E(r,"svg",{class:!0,xmlns:!0,viewBox:!0,height:!0,width:!0,fill:!0,stroke:!0});var a=h(e);s=E(a,"path",{d:!0}),h(s).forEach(f),a.forEach(f),this.h()},h(){_(s,"d","M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"),_(e,"class","socket-error svelte-oss7oo"),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"viewBox","0 0 24 24"),_(e,"height","24px"),_(e,"width","24px"),_(e,"fill",t=n[1]==="error"?"#DC2626":"#EA580C"),_(e,"stroke","#fff")},m(r,a){m(r,e,a),O(e,s)},p(r,a){a&2&&t!==(t=r[1]==="error"?"#DC2626":"#EA580C")&&_(e,"fill",t)},d(r){r&&f(e)}}}function ce(n){let e,s=n[1]!=="open"&&I(n);return{c(){s&&s.c(),e=y()},l(t){s&&s.l(t),e=y()},m(t,r){s&&s.m(t,r),m(t,e,r)},p(t,[r]){t[1]!=="open"?s?s.p(t,r):(s=I(t),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},i:v,o:v,d(t){s&&s.d(t),t&&f(e)}}}function ue(n){return oe("open",e=>{const s=new AbortController;return n==null||n.addEventListener("error",()=>e("error"),s),n==null||n.addEventListener("close",()=>e("close"),s),()=>s.abort()})}function fe(n,e,s){let t,r,a=v,l=()=>(a(),a=U(t,i=>s(1,r=i)),t);n.$$.on_destroy.push(()=>a());let{socket:o}=e;return L(()=>{document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&R(t)!=="open"&&location.reload()})}),n.$$set=i=>{"socket"in i&&s(2,o=i.socket)},n.$$.update=()=>{n.$$.dirty&4&&l(s(0,t=ue(o)))},[t,r,o]}class _e extends g{constructor(e){super(),b(this,e,fe,ce,$,{socket:2})}}function me(n){let e,s,t,r;const a=n[2].default,l=z(a,n,n[1],null);return{c(){e=M("div"),l&&l.c(),this.h()},l(o){e=P(o,"DIV",{class:!0});var i=h(e);l&&l.l(i),i.forEach(f),this.h()},h(){_(e,"class","inner fill svelte-noax5s")},m(o,i){m(o,e,i),l&&l.m(e,null),r=!0},p(o,[i]){n=o,l&&l.p&&(!r||i&2)&&T(l,a,n,n[1],r?B(a,n[1],i,null):A(n[1]),null)},i(o){r||(d(l,o),J(()=>{t&&t.end(1),s=Q(e,de,{duration:D,x:n[0].x,y:n[0].y}),s.start()}),r=!0)},o(o){p(l,o),s&&s.invalidate(),t=W(e,le,{delay:D,duration:50}),r=!1},d(o){o&&f(e),l&&l.d(o),o&&t&&t.end()}}}function de(n,{duration:e,x:s=0,y:t=0}){const r=getComputedStyle(n),a=r.transform==="none"?"":r.transform;return{delay:0,duration:e,easing:ae,css:l=>`transform: ${a} translate(${(1-l)*s}%, ${(1-l)*t}%);`}}const N={left:{x:-100,y:0},right:{x:100,y:0},top:{x:0,y:-100},bottom:{x:0,y:100}},pe=Object.keys(N),D=500;function ve(n,e,s){let{$$slots:t={},$$scope:r}=e;const a=N[ie(pe)];return n.$$set=l=>{"$$scope"in l&&s(1,r=l.$$scope)},[a,r,t]}class he extends g{constructor(e){super(),b(this,e,ve,me,$,{})}}function ye(n){let e;const s=n[5].default,t=z(s,n,n[6],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,a){t&&t.m(r,a),e=!0},p(r,a){t&&t.p&&(!e||a&64)&&T(t,s,r,r[6],e?B(s,r[6],a,null):A(r[6]),null)},i(r){e||(d(t,r),e=!0)},o(r){p(t,r),e=!1},d(r){t&&t.d(r)}}}function q(n){let e,s;return e=new he({props:{$$slots:{default:[ye]},$$scope:{ctx:n}}}),{c(){V(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){F(e,t,r),s=!0},p(t,r){const a={};r&64&&(a.$$scope={dirty:r,ctx:t}),e.$set(a)},i(t){s||(d(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){K(e,t)}}}function $e(n){let e,s;return e=new _e({props:{socket:n[1]}}),{c(){V(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){F(e,t,r),s=!0},p:v,i(t){s||(d(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){K(e,t)}}}function ge(n){let e,s,t=n[0].type,r,a,l,o=q(n),i=n[1]&&$e(n);return{c(){e=S(),s=M("div"),o.c(),r=S(),i&&i.c(),a=y(),this.h()},l(c){H('[data-svelte="svelte-al2hjo"]',document.head).forEach(f),e=C(c),s=P(c,"DIV",{class:!0});var k=h(s);o.l(k),k.forEach(f),r=C(c),i&&i.l(c),a=y(),this.h()},h(){document.title="Cell",_(s,"class","layout svelte-12yt1eb")},m(c,u){m(c,e,u),m(c,s,u),o.m(s,null),m(c,r,u),i&&i.m(c,u),m(c,a,u),l=!0},p(c,[u]){u&1&&$(t,t=c[0].type)?(x(),p(o,1,1,v),X(),o=q(c),o.c(),d(o,1),o.m(s,null)):o.p(c,u),c[1]&&i.p(c,u)},i(c){l||(d(o),d(i),l=!0)},o(c){p(o),p(i),l=!1},d(c){c&&f(e),c&&f(s),o.d(c),c&&f(r),i&&i.d(c),c&&f(a)}}}function qe(){return G("frame")}const Le=async({url:n})=>{const e=n.searchParams.get("id");return e?{props:{serial:e}}:{status:400,error:new Error("Missing ID")}};function be(n,e,s){let t,r,{$$slots:a={},$$scope:l}=e,{serial:o}=e;const i=ee(o),c=te(i);return Y(n,c,u=>s(0,r=u)),L(()=>{se(i)}),Z("frame",{socket:i,state:c}),n.$$set=u=>{"serial"in u&&s(3,o=u.serial),"$$scope"in u&&s(6,l=u.$$scope)},n.$$.update=()=>{n.$$.dirty&9&&s(4,t=re(r.type,o)),n.$$.dirty&16&&ne(t,{replaceState:!0})},[r,i,c,o,t,a,l]}class ze extends g{constructor(e){super(),b(this,e,be,ge,$,{serial:3})}}export{ze as default,qe as getFrameContext,Le as load};
