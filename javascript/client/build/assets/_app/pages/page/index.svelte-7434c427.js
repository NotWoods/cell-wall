import{a2 as m,a3 as p,S as b,i as _,s as g,e as w,t as y,c as k,a as S,g as C,d as u,b as d,f as R,H as E,I as h,a4 as j,R as x}from"../../chunks/vendor-958806bc.js";import{C as A}from"../../chunks/state-33679332.js";function L(e,t){{const a=new WebSocket(e);return m(t,r=>{const s=new AbortController;return a.addEventListener("message",o=>{console.log(o.data),r(o.data)},s),()=>s.abort()})}}function T(e){let t,a;return{c(){t=w("a"),a=y("Refresh"),this.h()},l(r){t=k(r,"A",{href:!0});var s=S(t);a=C(s,"Refresh"),s.forEach(u),this.h()},h(){t.hidden=!0,d(t,"href",e[1])},m(r,s){R(r,t,s),E(t,a),e[5](t)},p(r,[s]){s&2&&d(t,"href",r[1])},i:h,o:h,d(r){r&&u(t),e[5](null)}}}const U=p(L("ws://localhost:3000","{}"),e=>JSON.parse(e));function W({state:e,info:t}={}){switch(e==null?void 0:e.type){case A.WEB:return new URL(e.url,t==null?void 0:t.server);default:return}}function q(e,t,a){let r,s,o;j(e,U,n=>a(4,o=n));let{serial:i}=t,c;function f(n){x[n?"unshift":"push"](()=>{c=n,a(0,c)})}return e.$$set=n=>{"serial"in n&&a(2,i=n.serial)},e.$$.update=()=>{var n,l;e.$$.dirty&20&&a(3,r=o[i]),e.$$.dirty&8&&a(1,s=(l=(n=W(r))==null?void 0:n.href)!=null?l:"#"),e.$$.dirty&9&&(console.log(r),c==null||c.click())},[c,s,i,r,o,f]}class H extends b{constructor(t){super();_(this,t,q,T,g,{serial:2})}}export{H as default};
